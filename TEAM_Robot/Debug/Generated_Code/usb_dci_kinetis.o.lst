   1              		.syntax unified
   2              		.cpu cortex-m4
   3              		.eabi_attribute 27, 3
   4              		.eabi_attribute 28, 1
   5              		.fpu fpv4-sp-d16
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 6
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.thumb
  16              		.file	"usb_dci_kinetis.c"
  17              		.text
  18              	.Ltext0:
  19              		.cfi_sections	.debug_frame
  20              		.comm	g_Mem,1024,512
  21              		.global	g_bdtmap
  22              		.section	.bss.g_bdtmap,"aw",%nobits
  23              		.align	2
  26              	g_bdtmap:
  27 0000 00000000 		.space	4
  28              		.section	.bss.g_bdt_elem,"aw",%nobits
  29              		.align	2
  32              	g_bdt_elem:
  33 0000 00000000 		.space	576
  33      00000000 
  33      00000000 
  33      00000000 
  33      00000000 
  34              		.section	.bss.g_dci_controller_Id,"aw",%nobits
  37              	g_dci_controller_Id:
  38 0000 00       		.space	1
  39              		.section	.bss.g_bdt_address,"aw",%nobits
  40              		.align	2
  43              	g_bdt_address:
  44 0000 00000000 		.space	4
  45              		.section	.data.g_trf_direction,"aw",%progbits
  48              	g_trf_direction:
  49 0000 FF       		.byte	-1
  50              		.section	.text.USB_Bus_Reset_Handler,"ax",%progbits
  51              		.align	2
  52              		.thumb
  53              		.thumb_func
  55              	USB_Bus_Reset_Handler:
  56              	.LFB0:
  57              		.file 1 "../Generated_Code/usb_dci_kinetis.c"
   1:../Generated_Code/usb_dci_kinetis.c **** /******************************************************************************
   2:../Generated_Code/usb_dci_kinetis.c ****  *
   3:../Generated_Code/usb_dci_kinetis.c ****  * Freescale Semiconductor Inc.
   4:../Generated_Code/usb_dci_kinetis.c ****  * (c) Copyright 2004-2012 Freescale Semiconductor, Inc.
   5:../Generated_Code/usb_dci_kinetis.c ****  * ALL RIGHTS RESERVED.
   6:../Generated_Code/usb_dci_kinetis.c ****  *
   7:../Generated_Code/usb_dci_kinetis.c ****  ******************************************************************************
   8:../Generated_Code/usb_dci_kinetis.c ****  *
   9:../Generated_Code/usb_dci_kinetis.c ****  * THIS SOFTWARE IS PROVIDED BY FREESCALE "AS IS" AND ANY EXPRESSED OR
  10:../Generated_Code/usb_dci_kinetis.c ****  * IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
  11:../Generated_Code/usb_dci_kinetis.c ****  * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
  12:../Generated_Code/usb_dci_kinetis.c ****  * IN NO EVENT SHALL FREESCALE OR ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
  13:../Generated_Code/usb_dci_kinetis.c ****  * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
  14:../Generated_Code/usb_dci_kinetis.c ****  * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
  15:../Generated_Code/usb_dci_kinetis.c ****  * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
  16:../Generated_Code/usb_dci_kinetis.c ****  * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
  17:../Generated_Code/usb_dci_kinetis.c ****  * STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING
  18:../Generated_Code/usb_dci_kinetis.c ****  * IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF
  19:../Generated_Code/usb_dci_kinetis.c ****  * THE POSSIBILITY OF SUCH DAMAGE.
  20:../Generated_Code/usb_dci_kinetis.c ****  *
  21:../Generated_Code/usb_dci_kinetis.c ****  **************************************************************************//*!
  22:../Generated_Code/usb_dci_kinetis.c ****  *
  23:../Generated_Code/usb_dci_kinetis.c ****  * @file usb_dci_kinetis.c
  24:../Generated_Code/usb_dci_kinetis.c ****  *
  25:../Generated_Code/usb_dci_kinetis.c ****  * @author
  26:../Generated_Code/usb_dci_kinetis.c ****  *
  27:../Generated_Code/usb_dci_kinetis.c ****  * @version
  28:../Generated_Code/usb_dci_kinetis.c ****  *
  29:../Generated_Code/usb_dci_kinetis.c ****  * @date
  30:../Generated_Code/usb_dci_kinetis.c ****  *
  31:../Generated_Code/usb_dci_kinetis.c ****  * @brief The file contains Kinetis USB stack controller layer implementation.
  32:../Generated_Code/usb_dci_kinetis.c ****  *
  33:../Generated_Code/usb_dci_kinetis.c ****  *****************************************************************************/
  34:../Generated_Code/usb_dci_kinetis.c **** 
  35:../Generated_Code/usb_dci_kinetis.c **** /******************************************************************************
  36:../Generated_Code/usb_dci_kinetis.c ****  * Includes
  37:../Generated_Code/usb_dci_kinetis.c ****  *****************************************************************************/
  38:../Generated_Code/usb_dci_kinetis.c **** #include <string.h>
  39:../Generated_Code/usb_dci_kinetis.c **** #include "usb_dciapi.h" /* USB DCI API Header File */
  40:../Generated_Code/usb_dci_kinetis.c **** #include "usb_devapi.h" /* USB Device API Header File */
  41:../Generated_Code/usb_dci_kinetis.c **** #include "usb_dci_kinetis.h"    /* USB DCI Header File */
  42:../Generated_Code/usb_dci_kinetis.c **** #include "usb_bdt_kinetis.h"    /* USB BDT Structure Header File */
  43:../Generated_Code/usb_dci_kinetis.c **** #include "wdt_kinetis.h"
  44:../Generated_Code/usb_dci_kinetis.c **** #include "usb_class.h"
  45:../Generated_Code/usb_dci_kinetis.c **** 
  46:../Generated_Code/usb_dci_kinetis.c **** /*****************************************************************************
  47:../Generated_Code/usb_dci_kinetis.c ****  * Constant and Macro's - None
  48:../Generated_Code/usb_dci_kinetis.c ****  *****************************************************************************/
  49:../Generated_Code/usb_dci_kinetis.c **** /****************************************************************************
  50:../Generated_Code/usb_dci_kinetis.c ****  * Global Variables
  51:../Generated_Code/usb_dci_kinetis.c ****  ****************************************************************************/
  52:../Generated_Code/usb_dci_kinetis.c **** #ifdef USE_FEEDBACK_ENDPOINT
  53:../Generated_Code/usb_dci_kinetis.c **** 	extern uint_32 feedback_data;
  54:../Generated_Code/usb_dci_kinetis.c **** 	extern uint_32 gNrSamples;
  55:../Generated_Code/usb_dci_kinetis.c **** #endif
  56:../Generated_Code/usb_dci_kinetis.c **** 
  57:../Generated_Code/usb_dci_kinetis.c **** /* location for BDT Table and buff */
  58:../Generated_Code/usb_dci_kinetis.c **** #if (defined(__CWCC__)||defined(__GNUC__))
  59:../Generated_Code/usb_dci_kinetis.c **** 	__attribute__((__aligned__(512)))
  60:../Generated_Code/usb_dci_kinetis.c **** #elif defined(__IAR_SYSTEMS_ICC__)
  61:../Generated_Code/usb_dci_kinetis.c **** 	#pragma data_alignment = 512
  62:../Generated_Code/usb_dci_kinetis.c **** #endif
  63:../Generated_Code/usb_dci_kinetis.c **** 
  64:../Generated_Code/usb_dci_kinetis.c **** #if !HIGH_SPEED_DEVICE
  65:../Generated_Code/usb_dci_kinetis.c **** 	#if defined __CC_ARM
  66:../Generated_Code/usb_dci_kinetis.c **** 	  __align(512) uint_8 g_Mem[BYTES_1024];
  67:../Generated_Code/usb_dci_kinetis.c **** 	#else
  68:../Generated_Code/usb_dci_kinetis.c **** #if 0 
  69:../Generated_Code/usb_dci_kinetis.c **** 		static uint_8 g_Mem[BYTES_1024];
  70:../Generated_Code/usb_dci_kinetis.c **** #else
  71:../Generated_Code/usb_dci_kinetis.c **** 		uint_8 g_Mem[BYTES_1024];
  72:../Generated_Code/usb_dci_kinetis.c **** #endif
  73:../Generated_Code/usb_dci_kinetis.c **** 	#endif
  74:../Generated_Code/usb_dci_kinetis.c **** 	/* Pointer to BDT Map Structure */
  75:../Generated_Code/usb_dci_kinetis.c **** 	BDTMAP *g_bdtmap = NULL;
  76:../Generated_Code/usb_dci_kinetis.c **** 	/* per endpoint per direction bdt index structure */
  77:../Generated_Code/usb_dci_kinetis.c **** 	static BDT_ELEM  g_bdt_elem[MAX_BDT_INDEX >> 1];
  78:../Generated_Code/usb_dci_kinetis.c **** #endif
  79:../Generated_Code/usb_dci_kinetis.c **** /* stores Controller ID */
  80:../Generated_Code/usb_dci_kinetis.c **** static uint_8 g_dci_controller_Id = 0;
  81:../Generated_Code/usb_dci_kinetis.c **** #if HIGH_SPEED_DEVICE
  82:../Generated_Code/usb_dci_kinetis.c **** static uint_8 g_dci_address_state = 0;
  83:../Generated_Code/usb_dci_kinetis.c **** #endif /* HIGH_SPEED_DEVICE */
  84:../Generated_Code/usb_dci_kinetis.c **** 
  85:../Generated_Code/usb_dci_kinetis.c **** #if !HIGH_SPEED_DEVICE
  86:../Generated_Code/usb_dci_kinetis.c **** /* Start BDT buffer Address */
  87:../Generated_Code/usb_dci_kinetis.c **** static uint_32 g_bdt_address;
  88:../Generated_Code/usb_dci_kinetis.c **** #endif /* HIGH_SPEED_DEVICE */
  89:../Generated_Code/usb_dci_kinetis.c **** /* Transfer direction */
  90:../Generated_Code/usb_dci_kinetis.c **** static uint_8 g_trf_direction = USB_TRF_UNKNOWN;
  91:../Generated_Code/usb_dci_kinetis.c **** 
  92:../Generated_Code/usb_dci_kinetis.c **** 
  93:../Generated_Code/usb_dci_kinetis.c **** // HIGH_SPEED_DEVICE
  94:../Generated_Code/usb_dci_kinetis.c **** #if HIGH_SPEED_DEVICE
  95:../Generated_Code/usb_dci_kinetis.c **** 	#define MAX_DTDS_PER_EP     5	// maximum number of transfer descriptors
  96:../Generated_Code/usb_dci_kinetis.c **** 	#define DTD_FREE            0
  97:../Generated_Code/usb_dci_kinetis.c **** 	#define DTD_BUSY            1
  98:../Generated_Code/usb_dci_kinetis.c **** 	#define MAX_ENDPOINT_NUMBER 4
  99:../Generated_Code/usb_dci_kinetis.c **** 
 100:../Generated_Code/usb_dci_kinetis.c **** 	// QH structures are 64-byte aligned
 101:../Generated_Code/usb_dci_kinetis.c **** 	#define TOTAL_QHD_SIZE (SIZE_OF_QHD * (MAX_ENDPOINT_NUMBER * 2))
 102:../Generated_Code/usb_dci_kinetis.c **** 	// TD structures are 64-byte aligned
 103:../Generated_Code/usb_dci_kinetis.c **** 	#define TOTAL_QTD_SIZE ((SIZE_OF_DTD0) * (MAX_ENDPOINT_NUMBER * 2) * MAX_DTDS_PER_EP)
 104:../Generated_Code/usb_dci_kinetis.c **** 
 105:../Generated_Code/usb_dci_kinetis.c **** 	#ifdef __CWCC__
 106:../Generated_Code/usb_dci_kinetis.c **** 		#pragma define_section usb_dqh ".usb_dqh" RW
 107:../Generated_Code/usb_dci_kinetis.c **** 		__declspec(usb_dqh) uint_8 g_usbd_qh_buf[TOTAL_QHD_SIZE];	// 512
 108:../Generated_Code/usb_dci_kinetis.c **** 		#pragma define_section usb_dtd ".usb_dtd" RW
 109:../Generated_Code/usb_dci_kinetis.c **** 		__declspec(usb_dtd) uint_8 g_usbd_td_buf[TOTAL_QTD_SIZE];	// 1280
 110:../Generated_Code/usb_dci_kinetis.c **** 	#else
 111:../Generated_Code/usb_dci_kinetis.c **** 		#pragma data_alignment=(0x1000)
 112:../Generated_Code/usb_dci_kinetis.c **** 		uint_8 g_usbd_qh_buf[TOTAL_QHD_SIZE];	// 512
 113:../Generated_Code/usb_dci_kinetis.c **** 		#pragma data_alignment=(0x800)
 114:../Generated_Code/usb_dci_kinetis.c **** 		uint_8 g_usbd_td_buf[TOTAL_QTD_SIZE];	// 1280
 115:../Generated_Code/usb_dci_kinetis.c **** 	#endif
 116:../Generated_Code/usb_dci_kinetis.c **** 
 117:../Generated_Code/usb_dci_kinetis.c **** 
 118:../Generated_Code/usb_dci_kinetis.c **** 	/* flag status for td */
 119:../Generated_Code/usb_dci_kinetis.c **** 	static struct _td_status
 120:../Generated_Code/usb_dci_kinetis.c **** 	{
 121:../Generated_Code/usb_dci_kinetis.c **** 		uint_8  status;                 // DTD_BUSY or DTD_FREE
 122:../Generated_Code/usb_dci_kinetis.c **** 		unsigned int total_bytes;       // Original total bytes to transfer (not used by EP0)
 123:../Generated_Code/usb_dci_kinetis.c **** 		volatile struct dtd_setup_t *phys_td;   // Pointer to physical TD (not used by EP0)
 124:../Generated_Code/usb_dci_kinetis.c **** 	} g_usbd_td_flag[MAX_ENDPOINT_NUMBER * 2][MAX_DTDS_PER_EP];
 125:../Generated_Code/usb_dci_kinetis.c **** 	static struct dtd_setup_t *g_usbd_qh_tail[MAX_ENDPOINT_NUMBER * 2];
 126:../Generated_Code/usb_dci_kinetis.c **** #endif // HIGH_SPEED_DEVICE
 127:../Generated_Code/usb_dci_kinetis.c **** 
 128:../Generated_Code/usb_dci_kinetis.c **** /*****************************************************************************
 129:../Generated_Code/usb_dci_kinetis.c ****  * Local Types - None
 130:../Generated_Code/usb_dci_kinetis.c ****  *****************************************************************************/
 131:../Generated_Code/usb_dci_kinetis.c **** 
 132:../Generated_Code/usb_dci_kinetis.c **** /*****************************************************************************
 133:../Generated_Code/usb_dci_kinetis.c ****  * Local Functions Prototypes
 134:../Generated_Code/usb_dci_kinetis.c ****  *****************************************************************************/
 135:../Generated_Code/usb_dci_kinetis.c **** static void USB_Bus_Reset_Handler(void);
 136:../Generated_Code/usb_dci_kinetis.c **** #if !HIGH_SPEED_DEVICE
 137:../Generated_Code/usb_dci_kinetis.c **** static uint_8 USB_DCI_Get_BDT_Index(uint_8 ep_num,
 138:../Generated_Code/usb_dci_kinetis.c ****                                     uint_8 direction,
 139:../Generated_Code/usb_dci_kinetis.c ****                                     boolean odd);
 140:../Generated_Code/usb_dci_kinetis.c **** static uint_8 USB_DCI_Validate_Param(uint_8 ep_num,
 141:../Generated_Code/usb_dci_kinetis.c ****                                     uint_8 direction,
 142:../Generated_Code/usb_dci_kinetis.c ****                                     boolean odd);
 143:../Generated_Code/usb_dci_kinetis.c **** #ifdef LONG_SEND_TRANSACTION
 144:../Generated_Code/usb_dci_kinetis.c **** static void USB_DCI_Prepare_Send_Data(P_BUFF_DSC buffer_dsc,
 145:../Generated_Code/usb_dci_kinetis.c ****                                     P_BDT_ELEM bdt_elem);
 146:../Generated_Code/usb_dci_kinetis.c **** #endif /* LONG_SEND_TRANSACTION */
 147:../Generated_Code/usb_dci_kinetis.c **** static void USB_Bus_Token_Cpl_Handler(uint_8 stat,
 148:../Generated_Code/usb_dci_kinetis.c ****                                     USB_DEV_EVENT_STRUCT* event);
 149:../Generated_Code/usb_dci_kinetis.c **** #endif /* HIGH_SPEED_DEVICE */
 150:../Generated_Code/usb_dci_kinetis.c **** 
 151:../Generated_Code/usb_dci_kinetis.c **** // HIGH_SPEED_DEVICE
 152:../Generated_Code/usb_dci_kinetis.c **** #if HIGH_SPEED_DEVICE
 153:../Generated_Code/usb_dci_kinetis.c **** static uint_8 K70_ULPI_SetDeviceMode(uint_8 controller_ID);
 154:../Generated_Code/usb_dci_kinetis.c **** static void usbd_ep_qh_init(uint_8 controller_ID,
 155:../Generated_Code/usb_dci_kinetis.c **** 		unsigned char endpt_number, unsigned char direction,
 156:../Generated_Code/usb_dci_kinetis.c **** 		unsigned int max_pkt_len,
 157:../Generated_Code/usb_dci_kinetis.c **** 		unsigned int zlt, unsigned char mult, uint_32 next_dtd);
 158:../Generated_Code/usb_dci_kinetis.c **** static void usbd_setup_qhead(struct dqh_t *qhead);
 159:../Generated_Code/usb_dci_kinetis.c **** static void usbd_setup_td(struct dtd_t *td);
 160:../Generated_Code/usb_dci_kinetis.c **** static unsigned int usbd_get_dqh(uint_8 controller_ID, unsigned char endpt_number, unsigned char di
 161:../Generated_Code/usb_dci_kinetis.c **** static void usbd_ep_setup(uint_8 controller_ID, unsigned char endpt_number, unsigned char direction
 162:../Generated_Code/usb_dci_kinetis.c **** static void usbd_ep_complete_handler(
 163:../Generated_Code/usb_dci_kinetis.c ****     USB_DEV_EVENT_STRUCT* event /* [IN] Pointer to USB EVENT Structure */
 164:../Generated_Code/usb_dci_kinetis.c **** );
 165:../Generated_Code/usb_dci_kinetis.c **** static void usbd_setup_packet_handler(
 166:../Generated_Code/usb_dci_kinetis.c ****     USB_DEV_EVENT_STRUCT* event /* [IN] Pointer to USB EVENT Structure */
 167:../Generated_Code/usb_dci_kinetis.c **** );
 168:../Generated_Code/usb_dci_kinetis.c **** static void usbd_read_setup_packet(uint_8 controller_ID, unsigned char *setup_packet);
 169:../Generated_Code/usb_dci_kinetis.c **** static void usbd_port_change(
 170:../Generated_Code/usb_dci_kinetis.c **** 		USB_DEV_EVENT_STRUCT* event /* [IN] Pointer to USB EVENT Structure */
 171:../Generated_Code/usb_dci_kinetis.c **** );
 172:../Generated_Code/usb_dci_kinetis.c **** static void usbd_ep0_complete(USB_DEV_EVENT_STRUCT* event);
 173:../Generated_Code/usb_dci_kinetis.c **** static void usbd_dtd_complete(USB_DEV_EVENT_STRUCT* event);
 174:../Generated_Code/usb_dci_kinetis.c **** static usb_status_t usbd_receive_data_ep0out(uint_8 controller_ID, unsigned int ep0_data_buffer, un
 175:../Generated_Code/usb_dci_kinetis.c **** static usb_status_t usbd_receive_data_epxout(uint_8 controller_ID, unsigned int epx_data_buffer, ui
 176:../Generated_Code/usb_dci_kinetis.c **** static void usbd_add_td(uint_8 controller_ID, unsigned char ep_num, unsigned char direction, struct
 177:../Generated_Code/usb_dci_kinetis.c **** static void usbd_prime_ep(uint_8 controller_ID, unsigned char ep_num, unsigned char direction, stru
 178:../Generated_Code/usb_dci_kinetis.c **** static usb_status_t usbd_send_data_epxin(uint_8 controller_ID, unsigned int epx_data_buffer, uint_8
 179:../Generated_Code/usb_dci_kinetis.c **** static usb_status_t usbd_send_data_ep0in(uint_8 controller_ID,
 180:../Generated_Code/usb_dci_kinetis.c ****                                          unsigned int ep0_data_buffer, unsigned int sz,
 181:../Generated_Code/usb_dci_kinetis.c ****                                          unsigned char zlt_enable);
 182:../Generated_Code/usb_dci_kinetis.c **** 
 183:../Generated_Code/usb_dci_kinetis.c **** #endif
 184:../Generated_Code/usb_dci_kinetis.c **** #ifdef USB_LOWPOWERMODE
 185:../Generated_Code/usb_dci_kinetis.c **** 	static void Enter_StopMode(STOP_MODE stop_mode);
 186:../Generated_Code/usb_dci_kinetis.c **** #endif
 187:../Generated_Code/usb_dci_kinetis.c **** /*****************************************************************************
 188:../Generated_Code/usb_dci_kinetis.c ****  * Local Variables - None
 189:../Generated_Code/usb_dci_kinetis.c ****  *****************************************************************************/
 190:../Generated_Code/usb_dci_kinetis.c **** 
 191:../Generated_Code/usb_dci_kinetis.c **** /*****************************************************************************
 192:../Generated_Code/usb_dci_kinetis.c ****  * Local Functions
 193:../Generated_Code/usb_dci_kinetis.c ****  *****************************************************************************/
 194:../Generated_Code/usb_dci_kinetis.c **** 
 195:../Generated_Code/usb_dci_kinetis.c **** /**************************************************************************//*!
 196:../Generated_Code/usb_dci_kinetis.c ****  *
 197:../Generated_Code/usb_dci_kinetis.c ****  * @name  USB_Bus_Reset_Handler
 198:../Generated_Code/usb_dci_kinetis.c ****  *
 199:../Generated_Code/usb_dci_kinetis.c ****  * @brief The function handles Bus Reset Interrupt
 200:../Generated_Code/usb_dci_kinetis.c ****  *
 201:../Generated_Code/usb_dci_kinetis.c ****  * @param  None
 202:../Generated_Code/usb_dci_kinetis.c ****  *
 203:../Generated_Code/usb_dci_kinetis.c ****  * @return None
 204:../Generated_Code/usb_dci_kinetis.c ****  *
 205:../Generated_Code/usb_dci_kinetis.c ****  ******************************************************************************
 206:../Generated_Code/usb_dci_kinetis.c ****  * This functions is called when USB Bus Reset event is received on USB Bus.
 207:../Generated_Code/usb_dci_kinetis.c ****  * This function clears all the errors conditions and reinit Global data
 208:../Generated_Code/usb_dci_kinetis.c ****  * structures. Also resets USB device controller.
 209:../Generated_Code/usb_dci_kinetis.c ****  *****************************************************************************/
 210:../Generated_Code/usb_dci_kinetis.c **** static void USB_Bus_Reset_Handler (void)
 211:../Generated_Code/usb_dci_kinetis.c **** {
  58              		.loc 1 211 0
  59              		.cfi_startproc
  60              		@ args = 0, pretend = 0, frame = 0
  61              		@ frame_needed = 1, uses_anonymous_args = 0
  62 0000 80B5     		push	{r7, lr}
  63              		.cfi_def_cfa_offset 8
  64              		.cfi_offset 7, -8
  65              		.cfi_offset 14, -4
  66 0002 00AF     		add	r7, sp, #0
  67              		.cfi_def_cfa_register 7
 212:../Generated_Code/usb_dci_kinetis.c **** #if !HIGH_SPEED_DEVICE
 213:../Generated_Code/usb_dci_kinetis.c **** 	USB0_ERRSTAT = ERR_STAT_CLEAR_ALL;  /* clear USB error flag */
  68              		.loc 1 213 0
  69 0004 294B     		ldr	r3, .L2
  70 0006 BF22     		movs	r2, #191
  71 0008 83F88820 		strb	r2, [r3, #136]
 214:../Generated_Code/usb_dci_kinetis.c **** 	USB0_CTL |= USB_CTL_ODDRST_MASK;                /* Reset to Even buffer */
  72              		.loc 1 214 0
  73 000c 274B     		ldr	r3, .L2
  74 000e 274A     		ldr	r2, .L2
  75 0010 92F89420 		ldrb	r2, [r2, #148]
  76 0014 D2B2     		uxtb	r2, r2
  77 0016 42F00202 		orr	r2, r2, #2
  78 001a D2B2     		uxtb	r2, r2
  79 001c 83F89420 		strb	r2, [r3, #148]
 215:../Generated_Code/usb_dci_kinetis.c **** 	USB0_ADDR = 0;                       /* reset to default address */
  80              		.loc 1 215 0
  81 0020 224B     		ldr	r3, .L2
  82 0022 0022     		movs	r2, #0
  83 0024 83F89820 		strb	r2, [r3, #152]
 216:../Generated_Code/usb_dci_kinetis.c **** 	/* Select System Clock and Disable Weak Pull Downs */
 217:../Generated_Code/usb_dci_kinetis.c **** 	USB0_USBCTRL = 0x00;
  84              		.loc 1 217 0
  85 0028 204B     		ldr	r3, .L2
  86 002a 0022     		movs	r2, #0
  87 002c 83F80021 		strb	r2, [r3, #256]
 218:../Generated_Code/usb_dci_kinetis.c **** 
 219:../Generated_Code/usb_dci_kinetis.c **** 	/* Clear bdt elem structure */
 220:../Generated_Code/usb_dci_kinetis.c **** 	Clear_Mem((uint_8_ptr)(g_bdt_elem),
  88              		.loc 1 220 0
  89 0030 1F48     		ldr	r0, .L2+4
  90 0032 4FF41071 		mov	r1, #576
  91 0036 FF22     		movs	r2, #255
  92 0038 FFF7FEFF 		bl	Clear_Mem
 221:../Generated_Code/usb_dci_kinetis.c **** 			(sizeof(BDT_ELEM) * (MAX_BDT_INDEX >> 1)),
 222:../Generated_Code/usb_dci_kinetis.c **** 			(uint_8)UNINITIALISED_VAL);
 223:../Generated_Code/usb_dci_kinetis.c **** 
 224:../Generated_Code/usb_dci_kinetis.c **** 	/* Clear Memory for BDT and buffer Data */
 225:../Generated_Code/usb_dci_kinetis.c ****     Clear_Mem((uint_8_ptr)g_bdtmap,(uint_32) BYTES_1024, (uint_8)0);
  93              		.loc 1 225 0
  94 003c 1D4B     		ldr	r3, .L2+8
  95 003e 1B68     		ldr	r3, [r3]
  96 0040 1846     		mov	r0, r3
  97 0042 4FF48061 		mov	r1, #1024
  98 0046 0022     		movs	r2, #0
  99 0048 FFF7FEFF 		bl	Clear_Mem
 226:../Generated_Code/usb_dci_kinetis.c **** 
 227:../Generated_Code/usb_dci_kinetis.c **** 	/* Initialize BDT buffer address */
 228:../Generated_Code/usb_dci_kinetis.c **** 	g_bdt_address = ((uint_32)g_bdtmap + BYTES_512);
 100              		.loc 1 228 0
 101 004c 194B     		ldr	r3, .L2+8
 102 004e 1B68     		ldr	r3, [r3]
 103 0050 03F50072 		add	r2, r3, #512
 104 0054 184B     		ldr	r3, .L2+12
 105 0056 1A60     		str	r2, [r3]
 229:../Generated_Code/usb_dci_kinetis.c **** 
 230:../Generated_Code/usb_dci_kinetis.c **** 	g_trf_direction = USB_TRF_UNKNOWN;
 106              		.loc 1 230 0
 107 0058 184B     		ldr	r3, .L2+16
 108 005a FF22     		movs	r2, #255
 109 005c 1A70     		strb	r2, [r3]
 231:../Generated_Code/usb_dci_kinetis.c **** 
 232:../Generated_Code/usb_dci_kinetis.c **** 	USB0_CTL &= ~USB_CTL_ODDRST_MASK;
 110              		.loc 1 232 0
 111 005e 134B     		ldr	r3, .L2
 112 0060 124A     		ldr	r2, .L2
 113 0062 92F89420 		ldrb	r2, [r2, #148]
 114 0066 D2B2     		uxtb	r2, r2
 115 0068 22F00202 		bic	r2, r2, #2
 116 006c D2B2     		uxtb	r2, r2
 117 006e 83F89420 		strb	r2, [r3, #148]
 233:../Generated_Code/usb_dci_kinetis.c **** 	USB0_USBTRC0 |= 0x40;             /* attach CFv1 core to USB bus */
 118              		.loc 1 233 0
 119 0072 0E4B     		ldr	r3, .L2
 120 0074 0D4A     		ldr	r2, .L2
 121 0076 92F80C21 		ldrb	r2, [r2, #268]
 122 007a D2B2     		uxtb	r2, r2
 123 007c 42F04002 		orr	r2, r2, #64
 124 0080 D2B2     		uxtb	r2, r2
 125 0082 83F80C21 		strb	r2, [r3, #268]
 234:../Generated_Code/usb_dci_kinetis.c **** 
 235:../Generated_Code/usb_dci_kinetis.c **** 	USB0_ERREN = ERR_ENB_ENABLE_ALL;   /* Enable All Error Interrupts */
 126              		.loc 1 235 0
 127 0086 094B     		ldr	r3, .L2
 128 0088 BF22     		movs	r2, #191
 129 008a 83F88C20 		strb	r2, [r3, #140]
 236:../Generated_Code/usb_dci_kinetis.c **** 	USB0_INTEN = INTENB_BUS_RESET_VAL; /* Enable All Interrupts except RESUME */
 130              		.loc 1 236 0
 131 008e 074B     		ldr	r3, .L2
 132 0090 9F22     		movs	r2, #159
 133 0092 83F88420 		strb	r2, [r3, #132]
 237:../Generated_Code/usb_dci_kinetis.c **** 	USB0_CTL &= ~USB_CTL_TXSUSPENDTOKENBUSY_MASK;
 134              		.loc 1 237 0
 135 0096 054B     		ldr	r3, .L2
 136 0098 044A     		ldr	r2, .L2
 137 009a 92F89420 		ldrb	r2, [r2, #148]
 138 009e D2B2     		uxtb	r2, r2
 139 00a0 22F02002 		bic	r2, r2, #32
 140 00a4 D2B2     		uxtb	r2, r2
 141 00a6 83F89420 		strb	r2, [r3, #148]
 238:../Generated_Code/usb_dci_kinetis.c **** 
 239:../Generated_Code/usb_dci_kinetis.c **** #else
 240:../Generated_Code/usb_dci_kinetis.c **** 	uint_32 reg;
 241:../Generated_Code/usb_dci_kinetis.c **** 
 242:../Generated_Code/usb_dci_kinetis.c **** 	//Clear the device address
 243:../Generated_Code/usb_dci_kinetis.c **** 	USBHS_DEVICEADDR &= ~USBHS_DEVICEADDR_USBADR_MASK;
 244:../Generated_Code/usb_dci_kinetis.c **** 
 245:../Generated_Code/usb_dci_kinetis.c **** 	// 1. Clear all setup token semaphores
 246:../Generated_Code/usb_dci_kinetis.c **** 	reg = USBHS_EPSETUPSR;
 247:../Generated_Code/usb_dci_kinetis.c **** 	USBHS_EPSETUPSR = reg;
 248:../Generated_Code/usb_dci_kinetis.c **** 
 249:../Generated_Code/usb_dci_kinetis.c **** 	// 2. Clear all the endpoint complete status bits
 250:../Generated_Code/usb_dci_kinetis.c **** 	reg = USBHS_EPCOMPLETE;
 251:../Generated_Code/usb_dci_kinetis.c **** 	USBHS_EPCOMPLETE = reg;
 252:../Generated_Code/usb_dci_kinetis.c **** 
 253:../Generated_Code/usb_dci_kinetis.c **** 	// 3. Cancel all primed status
 254:../Generated_Code/usb_dci_kinetis.c **** 	while(USBHS_EPPRIME);
 255:../Generated_Code/usb_dci_kinetis.c **** 	USBHS_EPFLUSH = 0xffffffff;
 256:../Generated_Code/usb_dci_kinetis.c **** 
 257:../Generated_Code/usb_dci_kinetis.c **** 	// 4. If reset bit is not cleared at this point force reset device
 258:../Generated_Code/usb_dci_kinetis.c **** 	if(!(USBHS_PORTSC1 & USBHS_PORTSC1_PR_MASK)){
 259:../Generated_Code/usb_dci_kinetis.c **** 		USBHS_USBCMD |= USBHS_USBCMD_RST_MASK;
 260:../Generated_Code/usb_dci_kinetis.c **** 	}
 261:../Generated_Code/usb_dci_kinetis.c **** 
 262:../Generated_Code/usb_dci_kinetis.c **** 	// 5. Free(reset) all allocated dTDs
 263:../Generated_Code/usb_dci_kinetis.c **** 	memset(g_usbd_td_buf, 0, TOTAL_QTD_SIZE);
 264:../Generated_Code/usb_dci_kinetis.c **** 	memset(g_usbd_td_flag,
 265:../Generated_Code/usb_dci_kinetis.c **** 			0,
 266:../Generated_Code/usb_dci_kinetis.c **** 			MAX_ENDPOINT_NUMBER * 2 * MAX_DTDS_PER_EP * sizeof(g_usbd_td_flag)/sizeof(*g_usbd_td_flag)
 267:../Generated_Code/usb_dci_kinetis.c **** 			);
 268:../Generated_Code/usb_dci_kinetis.c **** 
 269:../Generated_Code/usb_dci_kinetis.c **** 	g_trf_direction = USB_TRF_UNKNOWN;
 270:../Generated_Code/usb_dci_kinetis.c ****     UNUSED(g_trf_direction);
 271:../Generated_Code/usb_dci_kinetis.c **** #endif
 272:../Generated_Code/usb_dci_kinetis.c **** }
 142              		.loc 1 272 0
 143 00aa 80BD     		pop	{r7, pc}
 144              	.L3:
 145              		.align	2
 146              	.L2:
 147 00ac 00200740 		.word	1074208768
 148 00b0 00000000 		.word	g_bdt_elem
 149 00b4 00000000 		.word	g_bdtmap
 150 00b8 00000000 		.word	g_bdt_address
 151 00bc 00000000 		.word	g_trf_direction
 152              		.cfi_endproc
 153              	.LFE0:
 155              		.section	.text.USB_DCI_Get_BDT_Index,"ax",%progbits
 156              		.align	2
 157              		.thumb
 158              		.thumb_func
 160              	USB_DCI_Get_BDT_Index:
 161              	.LFB1:
 273:../Generated_Code/usb_dci_kinetis.c **** 
 274:../Generated_Code/usb_dci_kinetis.c **** #if !HIGH_SPEED_DEVICE
 275:../Generated_Code/usb_dci_kinetis.c **** /**************************************************************************//*!
 276:../Generated_Code/usb_dci_kinetis.c ****  *
 277:../Generated_Code/usb_dci_kinetis.c ****  * @name  USB_DCI_Get_BDT_Index
 278:../Generated_Code/usb_dci_kinetis.c ****  *
 279:../Generated_Code/usb_dci_kinetis.c ****  * @brief The function maps endpoint number and direction to bdt index
 280:../Generated_Code/usb_dci_kinetis.c ****  *
 281:../Generated_Code/usb_dci_kinetis.c ****  * @param  ep_num   : Endpoint Number
 282:../Generated_Code/usb_dci_kinetis.c ****  * @param  direction: Endpoint direction
 283:../Generated_Code/usb_dci_kinetis.c ****  * @param  odd      : Odd or even buffer
 284:../Generated_Code/usb_dci_kinetis.c ****  *
 285:../Generated_Code/usb_dci_kinetis.c ****  * @return bdt index         : Mapped bdt index
 286:../Generated_Code/usb_dci_kinetis.c ****  *         INVALID_BDT_INDEX : In case of error
 287:../Generated_Code/usb_dci_kinetis.c ****  *
 288:../Generated_Code/usb_dci_kinetis.c ****  ******************************************************************************
 289:../Generated_Code/usb_dci_kinetis.c ****  * This function returns BDT Index from Endpoint number, direction,
 290:../Generated_Code/usb_dci_kinetis.c ****  * odd/even buffer
 291:../Generated_Code/usb_dci_kinetis.c ****  *****************************************************************************/
 292:../Generated_Code/usb_dci_kinetis.c **** static uint_8 USB_DCI_Get_BDT_Index (
 293:../Generated_Code/usb_dci_kinetis.c ****     uint_8 ep_num,     /* [IN] Endpoint Number */
 294:../Generated_Code/usb_dci_kinetis.c ****     uint_8 direction,  /* [IN] Endpoint direction */
 295:../Generated_Code/usb_dci_kinetis.c ****     boolean odd        /* [IN] Odd or even buffer */
 296:../Generated_Code/usb_dci_kinetis.c **** )
 297:../Generated_Code/usb_dci_kinetis.c **** {
 162              		.loc 1 297 0
 163              		.cfi_startproc
 164              		@ args = 0, pretend = 0, frame = 16
 165              		@ frame_needed = 1, uses_anonymous_args = 0
 166              		@ link register save eliminated.
 167 0000 80B4     		push	{r7}
 168              		.cfi_def_cfa_offset 4
 169              		.cfi_offset 7, -4
 170 0002 85B0     		sub	sp, sp, #20
 171              		.cfi_def_cfa_offset 24
 172 0004 00AF     		add	r7, sp, #0
 173              		.cfi_def_cfa_register 7
 174 0006 1346     		mov	r3, r2
 175 0008 0246     		mov	r2, r0
 176 000a FA71     		strb	r2, [r7, #7]
 177 000c 0A46     		mov	r2, r1
 178 000e BA71     		strb	r2, [r7, #6]
 179 0010 7B71     		strb	r3, [r7, #5]
 298:../Generated_Code/usb_dci_kinetis.c ****     uint_8 bdt_index = INVALID_BDT_INDEX;
 180              		.loc 1 298 0
 181 0012 FF23     		movs	r3, #255
 182 0014 FB73     		strb	r3, [r7, #15]
 299:../Generated_Code/usb_dci_kinetis.c **** 
 300:../Generated_Code/usb_dci_kinetis.c ****     if(ep_num < MAX_SUPPORTED_ENDPOINTS)
 183              		.loc 1 300 0
 184 0016 FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 185 0018 062B     		cmp	r3, #6
 186 001a 0BD8     		bhi	.L5
 301:../Generated_Code/usb_dci_kinetis.c ****     {
 302:../Generated_Code/usb_dci_kinetis.c ****         /* per endpoint 4 bdt_index -- 2 for recv 2 for send */
 303:../Generated_Code/usb_dci_kinetis.c ****         bdt_index=(uint_8)((ep_num * 4) + (uint_8)odd);
 187              		.loc 1 303 0
 188 001c FB79     		ldrb	r3, [r7, #7]
 189 001e 9B00     		lsls	r3, r3, #2
 190 0020 DAB2     		uxtb	r2, r3
 191 0022 7B79     		ldrb	r3, [r7, #5]
 192 0024 1344     		add	r3, r3, r2
 193 0026 FB73     		strb	r3, [r7, #15]
 304:../Generated_Code/usb_dci_kinetis.c **** 
 305:../Generated_Code/usb_dci_kinetis.c ****         if(direction == USB_SEND)
 194              		.loc 1 305 0
 195 0028 BB79     		ldrb	r3, [r7, #6]	@ zero_extendqisi2
 196 002a 012B     		cmp	r3, #1
 197 002c 02D1     		bne	.L5
 306:../Generated_Code/usb_dci_kinetis.c ****         {
 307:../Generated_Code/usb_dci_kinetis.c ****             bdt_index += 2;
 198              		.loc 1 307 0
 199 002e FB7B     		ldrb	r3, [r7, #15]
 200 0030 0233     		adds	r3, r3, #2
 201 0032 FB73     		strb	r3, [r7, #15]
 202              	.L5:
 308:../Generated_Code/usb_dci_kinetis.c ****         }
 309:../Generated_Code/usb_dci_kinetis.c ****     }
 310:../Generated_Code/usb_dci_kinetis.c ****     return bdt_index;
 203              		.loc 1 310 0
 204 0034 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 311:../Generated_Code/usb_dci_kinetis.c **** }
 205              		.loc 1 311 0
 206 0036 1846     		mov	r0, r3
 207 0038 1437     		adds	r7, r7, #20
 208 003a BD46     		mov	sp, r7
 209              		@ sp needed
 210 003c 5DF8047B 		ldr	r7, [sp], #4
 211 0040 7047     		bx	lr
 212              		.cfi_endproc
 213              	.LFE1:
 215 0042 00BF     		.section	.text.USB_DCI_Validate_Param,"ax",%progbits
 216              		.align	2
 217              		.thumb
 218              		.thumb_func
 220              	USB_DCI_Validate_Param:
 221              	.LFB2:
 312:../Generated_Code/usb_dci_kinetis.c **** 
 313:../Generated_Code/usb_dci_kinetis.c **** /**************************************************************************//*!
 314:../Generated_Code/usb_dci_kinetis.c ****  *
 315:../Generated_Code/usb_dci_kinetis.c ****  * @name  USB_DCI_Validate_Param
 316:../Generated_Code/usb_dci_kinetis.c ****  *
 317:../Generated_Code/usb_dci_kinetis.c ****  * @brief The function validates endpoint number & direction parameters
 318:../Generated_Code/usb_dci_kinetis.c ****  *        and returns bdt index.
 319:../Generated_Code/usb_dci_kinetis.c ****  *
 320:../Generated_Code/usb_dci_kinetis.c ****  * @param  ep_num   : Endpoint Number
 321:../Generated_Code/usb_dci_kinetis.c ****  * @param  direction: Endpoint direction
 322:../Generated_Code/usb_dci_kinetis.c ****  * @param  odd      : odd or even buffer
 323:../Generated_Code/usb_dci_kinetis.c ****  *
 324:../Generated_Code/usb_dci_kinetis.c ****  * @return bdt index         : mapped bdt index
 325:../Generated_Code/usb_dci_kinetis.c ****  *         INVALID_BDT_INDEX : incase of error
 326:../Generated_Code/usb_dci_kinetis.c ****  *
 327:../Generated_Code/usb_dci_kinetis.c ****  ******************************************************************************
 328:../Generated_Code/usb_dci_kinetis.c ****  * This function validates endpoint parameters and returns bdt index
 329:../Generated_Code/usb_dci_kinetis.c ****  *****************************************************************************/
 330:../Generated_Code/usb_dci_kinetis.c **** static uint_8 USB_DCI_Validate_Param (
 331:../Generated_Code/usb_dci_kinetis.c ****     uint_8 ep_num,     /* [IN] Endpoint Number */
 332:../Generated_Code/usb_dci_kinetis.c ****     uint_8 direction,  /* [IN] Endpoint direction */
 333:../Generated_Code/usb_dci_kinetis.c ****     boolean odd        /* [IN] Odd or even buffer */
 334:../Generated_Code/usb_dci_kinetis.c **** )
 335:../Generated_Code/usb_dci_kinetis.c **** {
 222              		.loc 1 335 0
 223              		.cfi_startproc
 224              		@ args = 0, pretend = 0, frame = 16
 225              		@ frame_needed = 1, uses_anonymous_args = 0
 226 0000 80B5     		push	{r7, lr}
 227              		.cfi_def_cfa_offset 8
 228              		.cfi_offset 7, -8
 229              		.cfi_offset 14, -4
 230 0002 84B0     		sub	sp, sp, #16
 231              		.cfi_def_cfa_offset 24
 232 0004 00AF     		add	r7, sp, #0
 233              		.cfi_def_cfa_register 7
 234 0006 1346     		mov	r3, r2
 235 0008 0246     		mov	r2, r0
 236 000a FA71     		strb	r2, [r7, #7]
 237 000c 0A46     		mov	r2, r1
 238 000e BA71     		strb	r2, [r7, #6]
 239 0010 7B71     		strb	r3, [r7, #5]
 336:../Generated_Code/usb_dci_kinetis.c ****     /* Get bdt index mapped to endpoint number-direction and odd/even buffer */
 337:../Generated_Code/usb_dci_kinetis.c ****     uint_8 bdt_index = USB_DCI_Get_BDT_Index(ep_num, direction, odd);
 240              		.loc 1 337 0
 241 0012 F979     		ldrb	r1, [r7, #7]	@ zero_extendqisi2
 242 0014 BA79     		ldrb	r2, [r7, #6]	@ zero_extendqisi2
 243 0016 7B79     		ldrb	r3, [r7, #5]	@ zero_extendqisi2
 244 0018 0846     		mov	r0, r1
 245 001a 1146     		mov	r1, r2
 246 001c 1A46     		mov	r2, r3
 247 001e FFF7FEFF 		bl	USB_DCI_Get_BDT_Index
 248 0022 0346     		mov	r3, r0
 249 0024 FB73     		strb	r3, [r7, #15]
 338:../Generated_Code/usb_dci_kinetis.c **** 
 339:../Generated_Code/usb_dci_kinetis.c ****     if((bdt_index  != INVALID_BDT_INDEX) &&
 250              		.loc 1 339 0
 251 0026 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 252 0028 FF2B     		cmp	r3, #255
 253 002a 10D0     		beq	.L8
 340:../Generated_Code/usb_dci_kinetis.c ****         (g_bdt_elem[TRANSFER_INDEX(bdt_index)].len ==
 254              		.loc 1 340 0 discriminator 1
 255 002c FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 256 002e 5B08     		lsrs	r3, r3, #1
 257 0030 DBB2     		uxtb	r3, r3
 258 0032 1A46     		mov	r2, r3
 259 0034 0849     		ldr	r1, .L10
 260 0036 1346     		mov	r3, r2
 261 0038 DB00     		lsls	r3, r3, #3
 262 003a 1344     		add	r3, r3, r2
 263 003c 5B00     		lsls	r3, r3, #1
 264 003e 0B44     		add	r3, r3, r1
 265 0040 1A88     		ldrh	r2, [r3]
 339:../Generated_Code/usb_dci_kinetis.c ****     if((bdt_index  != INVALID_BDT_INDEX) &&
 266              		.loc 1 339 0 discriminator 1
 267 0042 4FF6FF73 		movw	r3, #65535
 268 0046 9A42     		cmp	r2, r3
 269 0048 01D1     		bne	.L8
 341:../Generated_Code/usb_dci_kinetis.c ****         (uint_16)UNINITIALISED_VAL))
 342:../Generated_Code/usb_dci_kinetis.c ****     {
 343:../Generated_Code/usb_dci_kinetis.c ****         /* Incase length in bdt_elem is uninitialised return invalid index */
 344:../Generated_Code/usb_dci_kinetis.c ****         bdt_index = INVALID_BDT_INDEX;
 270              		.loc 1 344 0
 271 004a FF23     		movs	r3, #255
 272 004c FB73     		strb	r3, [r7, #15]
 273              	.L8:
 345:../Generated_Code/usb_dci_kinetis.c ****     }
 346:../Generated_Code/usb_dci_kinetis.c ****     return bdt_index;
 274              		.loc 1 346 0
 275 004e FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 347:../Generated_Code/usb_dci_kinetis.c **** }
 276              		.loc 1 347 0
 277 0050 1846     		mov	r0, r3
 278 0052 1037     		adds	r7, r7, #16
 279 0054 BD46     		mov	sp, r7
 280              		@ sp needed
 281 0056 80BD     		pop	{r7, pc}
 282              	.L11:
 283              		.align	2
 284              	.L10:
 285 0058 00000000 		.word	g_bdt_elem
 286              		.cfi_endproc
 287              	.LFE2:
 289              		.section	.text.USB_DCI_Prepare_Send_Data,"ax",%progbits
 290              		.align	2
 291              		.thumb
 292              		.thumb_func
 294              	USB_DCI_Prepare_Send_Data:
 295              	.LFB3:
 348:../Generated_Code/usb_dci_kinetis.c **** #endif /* HIGH_SPEED_DEVICE */
 349:../Generated_Code/usb_dci_kinetis.c **** 
 350:../Generated_Code/usb_dci_kinetis.c **** #ifdef LONG_SEND_TRANSACTION
 351:../Generated_Code/usb_dci_kinetis.c **** #if !HIGH_SPEED_DEVICE
 352:../Generated_Code/usb_dci_kinetis.c **** /**************************************************************************//*!
 353:../Generated_Code/usb_dci_kinetis.c ****  *
 354:../Generated_Code/usb_dci_kinetis.c ****  * @name  USB_DCI_Prepare_Send_Data
 355:../Generated_Code/usb_dci_kinetis.c ****  *
 356:../Generated_Code/usb_dci_kinetis.c ****  * @brief The function sets up the BDT for Send
 357:../Generated_Code/usb_dci_kinetis.c ****  *
 358:../Generated_Code/usb_dci_kinetis.c ****  * @param  buffer_dsc   : Pointer to buffer descriptor element in USB_RAM
 359:../Generated_Code/usb_dci_kinetis.c ****  * @param  bdt_elem     : Pointer to per endpoint/direction structure
 360:../Generated_Code/usb_dci_kinetis.c ****  *
 361:../Generated_Code/usb_dci_kinetis.c ****  * @return None
 362:../Generated_Code/usb_dci_kinetis.c ****  *
 363:../Generated_Code/usb_dci_kinetis.c ****  ******************************************************************************
 364:../Generated_Code/usb_dci_kinetis.c ****  * This functions configures Buffer Descriptor (Address and Count)
 365:../Generated_Code/usb_dci_kinetis.c ****  *****************************************************************************/
 366:../Generated_Code/usb_dci_kinetis.c **** static void USB_DCI_Prepare_Send_Data (
 367:../Generated_Code/usb_dci_kinetis.c ****     P_BUFF_DSC buffer_dsc,  /* [OUT] Pointer to buffer descriptor
 368:../Generated_Code/usb_dci_kinetis.c ****                                 element in USB_RAM */
 369:../Generated_Code/usb_dci_kinetis.c ****     P_BDT_ELEM bdt_elem     /* [IN] Pointer to per endpoint/direction
 370:../Generated_Code/usb_dci_kinetis.c ****                                 structure */
 371:../Generated_Code/usb_dci_kinetis.c **** )
 372:../Generated_Code/usb_dci_kinetis.c **** {
 296              		.loc 1 372 0
 297              		.cfi_startproc
 298              		@ args = 0, pretend = 0, frame = 16
 299              		@ frame_needed = 1, uses_anonymous_args = 0
 300              		@ link register save eliminated.
 301 0000 80B4     		push	{r7}
 302              		.cfi_def_cfa_offset 4
 303              		.cfi_offset 7, -4
 304 0002 85B0     		sub	sp, sp, #20
 305              		.cfi_def_cfa_offset 24
 306 0004 00AF     		add	r7, sp, #0
 307              		.cfi_def_cfa_register 7
 308 0006 7860     		str	r0, [r7, #4]
 309 0008 3960     		str	r1, [r7]
 373:../Generated_Code/usb_dci_kinetis.c ****     uint_8_ptr buff_ptr = bdt_elem->app_buffer + bdt_elem->curr_offset;
 310              		.loc 1 373 0
 311 000a 3B68     		ldr	r3, [r7]
 312 000c D3F80620 		ldr	r2, [r3, #6]	@ unaligned
 313 0010 3B68     		ldr	r3, [r7]
 314 0012 9B89     		ldrh	r3, [r3, #12]	@ unaligned
 315 0014 9BB2     		uxth	r3, r3
 316 0016 1344     		add	r3, r3, r2
 317 0018 BB60     		str	r3, [r7, #8]
 374:../Generated_Code/usb_dci_kinetis.c ****     uint_16 current_count = 0;
 318              		.loc 1 374 0
 319 001a 0023     		movs	r3, #0
 320 001c FB81     		strh	r3, [r7, #14]	@ movhi
 375:../Generated_Code/usb_dci_kinetis.c **** 
 376:../Generated_Code/usb_dci_kinetis.c ****     /* adjust size based on the input at the init endpoint */
 377:../Generated_Code/usb_dci_kinetis.c ****     if((bdt_elem->app_len - bdt_elem->curr_offset) > bdt_elem->len)
 321              		.loc 1 377 0
 322 001e 3B68     		ldr	r3, [r7]
 323 0020 5B89     		ldrh	r3, [r3, #10]	@ unaligned
 324 0022 9BB2     		uxth	r3, r3
 325 0024 1A46     		mov	r2, r3
 326 0026 3B68     		ldr	r3, [r7]
 327 0028 9B89     		ldrh	r3, [r3, #12]	@ unaligned
 328 002a 9BB2     		uxth	r3, r3
 329 002c D21A     		subs	r2, r2, r3
 330 002e 3B68     		ldr	r3, [r7]
 331 0030 1B88     		ldrh	r3, [r3]	@ unaligned
 332 0032 9BB2     		uxth	r3, r3
 333 0034 9A42     		cmp	r2, r3
 334 0036 06DD     		ble	.L13
 378:../Generated_Code/usb_dci_kinetis.c ****     {
 379:../Generated_Code/usb_dci_kinetis.c ****         /* If size of packet is greater than endpoint buffer size */
 380:../Generated_Code/usb_dci_kinetis.c ****         current_count = bdt_elem->len;
 335              		.loc 1 380 0
 336 0038 3B68     		ldr	r3, [r7]
 337 003a 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 338 003c 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 339 003e 1B02     		lsls	r3, r3, #8
 340 0040 1343     		orrs	r3, r3, r2
 341 0042 FB81     		strh	r3, [r7, #14]	@ movhi
 342 0044 07E0     		b	.L14
 343              	.L13:
 381:../Generated_Code/usb_dci_kinetis.c ****     }
 382:../Generated_Code/usb_dci_kinetis.c ****     else
 383:../Generated_Code/usb_dci_kinetis.c ****     {
 384:../Generated_Code/usb_dci_kinetis.c ****         /* If size of packet is smaller than endpoint buffer size */
 385:../Generated_Code/usb_dci_kinetis.c ****         current_count = (uint_16)(bdt_elem->app_len - bdt_elem->curr_offset);
 344              		.loc 1 385 0
 345 0046 3B68     		ldr	r3, [r7]
 346 0048 5B89     		ldrh	r3, [r3, #10]	@ unaligned
 347 004a 9AB2     		uxth	r2, r3
 348 004c 3B68     		ldr	r3, [r7]
 349 004e 9B89     		ldrh	r3, [r3, #12]	@ unaligned
 350 0050 9BB2     		uxth	r3, r3
 351 0052 D31A     		subs	r3, r2, r3
 352 0054 FB81     		strh	r3, [r7, #14]	@ movhi
 353              	.L14:
 386:../Generated_Code/usb_dci_kinetis.c ****     }
 387:../Generated_Code/usb_dci_kinetis.c **** 
 388:../Generated_Code/usb_dci_kinetis.c ****     buffer_dsc->cnt = SWAP16(current_count);
 354              		.loc 1 388 0
 355 0056 7B68     		ldr	r3, [r7, #4]
 356 0058 FA89     		ldrh	r2, [r7, #14]	@ movhi
 357 005a 5A80     		strh	r2, [r3, #2]	@ unaligned
 389:../Generated_Code/usb_dci_kinetis.c **** 
 390:../Generated_Code/usb_dci_kinetis.c ****     buffer_dsc->addr = SWAP32((uint_32)buff_ptr);
 358              		.loc 1 390 0
 359 005c BA68     		ldr	r2, [r7, #8]
 360 005e 7B68     		ldr	r3, [r7, #4]
 361 0060 5A60     		str	r2, [r3, #4]	@ unaligned
 391:../Generated_Code/usb_dci_kinetis.c **** }
 362              		.loc 1 391 0
 363 0062 1437     		adds	r7, r7, #20
 364 0064 BD46     		mov	sp, r7
 365              		@ sp needed
 366 0066 5DF8047B 		ldr	r7, [sp], #4
 367 006a 7047     		bx	lr
 368              		.cfi_endproc
 369              	.LFE3:
 371              		.section	.text.USB_DCI_Init,"ax",%progbits
 372              		.align	2
 373              		.global	USB_DCI_Init
 374              		.thumb
 375              		.thumb_func
 377              	USB_DCI_Init:
 378              	.LFB4:
 392:../Generated_Code/usb_dci_kinetis.c **** #endif /* HIGH_SPEED_DEVICE */
 393:../Generated_Code/usb_dci_kinetis.c **** #endif /* LONG_SEND_TRANSACTION */
 394:../Generated_Code/usb_dci_kinetis.c **** 
 395:../Generated_Code/usb_dci_kinetis.c **** /*****************************************************************************
 396:../Generated_Code/usb_dci_kinetis.c ****  * Global Functions
 397:../Generated_Code/usb_dci_kinetis.c ****  *****************************************************************************/
 398:../Generated_Code/usb_dci_kinetis.c **** 
 399:../Generated_Code/usb_dci_kinetis.c **** /**************************************************************************//*!
 400:../Generated_Code/usb_dci_kinetis.c ****  *
 401:../Generated_Code/usb_dci_kinetis.c ****  * @name  USB_DCI_Init
 402:../Generated_Code/usb_dci_kinetis.c ****  *
 403:../Generated_Code/usb_dci_kinetis.c ****  * @brief The function initializes the Controller layer
 404:../Generated_Code/usb_dci_kinetis.c ****  *
 405:../Generated_Code/usb_dci_kinetis.c ****  * @param controller_ID : Controller ID
 406:../Generated_Code/usb_dci_kinetis.c ****  *
 407:../Generated_Code/usb_dci_kinetis.c ****  * @return status
 408:../Generated_Code/usb_dci_kinetis.c ****  *         USB_OK    : Always
 409:../Generated_Code/usb_dci_kinetis.c ****  ******************************************************************************
 410:../Generated_Code/usb_dci_kinetis.c ****  * Initializes the USB controller
 411:../Generated_Code/usb_dci_kinetis.c ****  *****************************************************************************/
 412:../Generated_Code/usb_dci_kinetis.c **** uint_8 USB_DCI_Init (
 413:../Generated_Code/usb_dci_kinetis.c ****     uint_8    controller_ID,   /* [IN] Controller ID */
 414:../Generated_Code/usb_dci_kinetis.c ****     uint_8    bVregEn         /* Enables or disables internal regulator */
 415:../Generated_Code/usb_dci_kinetis.c **** )
 416:../Generated_Code/usb_dci_kinetis.c **** {
 379              		.loc 1 416 0
 380              		.cfi_startproc
 381              		@ args = 0, pretend = 0, frame = 8
 382              		@ frame_needed = 1, uses_anonymous_args = 0
 383 0000 80B5     		push	{r7, lr}
 384              		.cfi_def_cfa_offset 8
 385              		.cfi_offset 7, -8
 386              		.cfi_offset 14, -4
 387 0002 82B0     		sub	sp, sp, #8
 388              		.cfi_def_cfa_offset 16
 389 0004 00AF     		add	r7, sp, #0
 390              		.cfi_def_cfa_register 7
 391 0006 0246     		mov	r2, r0
 392 0008 0B46     		mov	r3, r1
 393 000a FA71     		strb	r2, [r7, #7]
 394 000c BB71     		strb	r3, [r7, #6]
 417:../Generated_Code/usb_dci_kinetis.c **** #if !HIGH_SPEED_DEVICE
 418:../Generated_Code/usb_dci_kinetis.c **** #if USB_USER_CONFIG_USE_STACK_INIT
 419:../Generated_Code/usb_dci_kinetis.c **** 	/* Select System Clock and Disable Weak Pull Downs */
 420:../Generated_Code/usb_dci_kinetis.c **** 	USB0_USBCTRL = 0x00;
 395              		.loc 1 420 0
 396 000e 4C4B     		ldr	r3, .L20
 397 0010 0022     		movs	r2, #0
 398 0012 83F80021 		strb	r2, [r3, #256]
 421:../Generated_Code/usb_dci_kinetis.c **** #endif
 422:../Generated_Code/usb_dci_kinetis.c **** 	
 423:../Generated_Code/usb_dci_kinetis.c **** 	/* save the controller_ID for future use */
 424:../Generated_Code/usb_dci_kinetis.c ****     g_dci_controller_Id = controller_ID;
 399              		.loc 1 424 0
 400 0016 4B4B     		ldr	r3, .L20+4
 401 0018 FA79     		ldrb	r2, [r7, #7]
 402 001a 1A70     		strb	r2, [r3]
 425:../Generated_Code/usb_dci_kinetis.c **** 
 426:../Generated_Code/usb_dci_kinetis.c ****     /* Clear bdt elem structure */
 427:../Generated_Code/usb_dci_kinetis.c ****     Clear_Mem((uint_8_ptr)(g_bdt_elem),
 403              		.loc 1 427 0
 404 001c 4A48     		ldr	r0, .L20+8
 405 001e 4FF41071 		mov	r1, #576
 406 0022 FF22     		movs	r2, #255
 407 0024 FFF7FEFF 		bl	Clear_Mem
 428:../Generated_Code/usb_dci_kinetis.c ****        (sizeof(BDT_ELEM) * (MAX_BDT_INDEX >> 1)),
 429:../Generated_Code/usb_dci_kinetis.c ****        (uint_8)UNINITIALISED_VAL);
 430:../Generated_Code/usb_dci_kinetis.c ****     g_bdtmap = (BDTMAP *)((uint_32)g_Mem);
 408              		.loc 1 430 0
 409 0028 484B     		ldr	r3, .L20+12
 410 002a 494A     		ldr	r2, .L20+16
 411 002c 1A60     		str	r2, [r3]
 431:../Generated_Code/usb_dci_kinetis.c **** 
 432:../Generated_Code/usb_dci_kinetis.c ****     /* Clear Memory for BDT and buffer Data */
 433:../Generated_Code/usb_dci_kinetis.c ****     Clear_Mem((uint_8_ptr)g_bdtmap,(uint_32) BYTES_1024, (uint_8)0);
 412              		.loc 1 433 0
 413 002e 474B     		ldr	r3, .L20+12
 414 0030 1B68     		ldr	r3, [r3]
 415 0032 1846     		mov	r0, r3
 416 0034 4FF48061 		mov	r1, #1024
 417 0038 0022     		movs	r2, #0
 418 003a FFF7FEFF 		bl	Clear_Mem
 434:../Generated_Code/usb_dci_kinetis.c **** 
 435:../Generated_Code/usb_dci_kinetis.c ****     #ifndef OTG_BUILD
 436:../Generated_Code/usb_dci_kinetis.c ****     #if 1   /* hardware bug workaround */ /* << EST: need to keep this workaround for FRDM-KL25Z */
 437:../Generated_Code/usb_dci_kinetis.c ****     /* Hard Reset to the USB Module */
 438:../Generated_Code/usb_dci_kinetis.c ****     USB0_USBTRC0 |= USB_USBTRC0_USBRESET_MASK;
 419              		.loc 1 438 0
 420 003e 404B     		ldr	r3, .L20
 421 0040 3F4A     		ldr	r2, .L20
 422 0042 92F80C21 		ldrb	r2, [r2, #268]
 423 0046 D2B2     		uxtb	r2, r2
 424 0048 62F07F02 		orn	r2, r2, #127
 425 004c D2B2     		uxtb	r2, r2
 426 004e 83F80C21 		strb	r2, [r3, #268]
 439:../Generated_Code/usb_dci_kinetis.c **** 
 440:../Generated_Code/usb_dci_kinetis.c ****     /* loop till the Reset bit clears  */
 441:../Generated_Code/usb_dci_kinetis.c ****     while((USB0_USBTRC0 & USB_USBTRC0_USBRESET_MASK))
 427              		.loc 1 441 0
 428 0052 00BF     		nop
 429              	.L16:
 430              		.loc 1 441 0 is_stmt 0 discriminator 1
 431 0054 3A4B     		ldr	r3, .L20
 432 0056 93F80C31 		ldrb	r3, [r3, #268]
 433 005a DBB2     		uxtb	r3, r3
 434 005c DBB2     		uxtb	r3, r3
 435 005e 5BB2     		sxtb	r3, r3
 436 0060 002B     		cmp	r3, #0
 437 0062 F7DB     		blt	.L16
 442:../Generated_Code/usb_dci_kinetis.c ****     {
 443:../Generated_Code/usb_dci_kinetis.c ****     };
 444:../Generated_Code/usb_dci_kinetis.c ****     #if !USB_USER_CONFIG_USE_STACK_INIT
 445:../Generated_Code/usb_dci_kinetis.c ****     {
 446:../Generated_Code/usb_dci_kinetis.c ****       /* need to re-init USB, as the hard reset above has reset the whole module! */
 447:../Generated_Code/usb_dci_kinetis.c ****       void USB0_Init(void); /* prototype */
 448:../Generated_Code/usb_dci_kinetis.c ****       USB0_Init(); /* call Processor Expert Init_USB_OTG Init() */
 449:../Generated_Code/usb_dci_kinetis.c ****     }
 450:../Generated_Code/usb_dci_kinetis.c ****     #endif
 451:../Generated_Code/usb_dci_kinetis.c **** 
 452:../Generated_Code/usb_dci_kinetis.c ****     #endif
 453:../Generated_Code/usb_dci_kinetis.c ****     #endif
 454:../Generated_Code/usb_dci_kinetis.c **** 
 455:../Generated_Code/usb_dci_kinetis.c ****     g_trf_direction = USB_TRF_UNKNOWN;
 438              		.loc 1 455 0 is_stmt 1
 439 0064 3B4B     		ldr	r3, .L20+20
 440 0066 FF22     		movs	r2, #255
 441 0068 1A70     		strb	r2, [r3]
 456:../Generated_Code/usb_dci_kinetis.c **** 
 457:../Generated_Code/usb_dci_kinetis.c **** #if USB_USER_CONFIG_USE_STACK_INIT
 458:../Generated_Code/usb_dci_kinetis.c ****     /* Asynchronous Resume Interrupt Enable */
 459:../Generated_Code/usb_dci_kinetis.c ****     USB0_USBTRC0 |= 0x40; /* undocumented bit???? */
 442              		.loc 1 459 0
 443 006a 354B     		ldr	r3, .L20
 444 006c 344A     		ldr	r2, .L20
 445 006e 92F80C21 		ldrb	r2, [r2, #268]
 446 0072 D2B2     		uxtb	r2, r2
 447 0074 42F04002 		orr	r2, r2, #64
 448 0078 D2B2     		uxtb	r2, r2
 449 007a 83F80C21 		strb	r2, [r3, #268]
 460:../Generated_Code/usb_dci_kinetis.c **** #endif
 461:../Generated_Code/usb_dci_kinetis.c ****     if(bVregEn)
 450              		.loc 1 461 0
 451 007e BB79     		ldrb	r3, [r7, #6]	@ zero_extendqisi2
 452 0080 002B     		cmp	r3, #0
 453 0082 06D0     		beq	.L17
 462:../Generated_Code/usb_dci_kinetis.c ****     {
 463:../Generated_Code/usb_dci_kinetis.c ****     	SIM_SOPT1 |= SIM_SOPT1_USBREGEN_MASK;	// enable usb voltage regulator
 454              		.loc 1 463 0
 455 0084 344B     		ldr	r3, .L20+24
 456 0086 344A     		ldr	r2, .L20+24
 457 0088 1268     		ldr	r2, [r2]
 458 008a 42F00042 		orr	r2, r2, #-2147483648
 459 008e 1A60     		str	r2, [r3]
 460 0090 05E0     		b	.L18
 461              	.L17:
 464:../Generated_Code/usb_dci_kinetis.c ****     }
 465:../Generated_Code/usb_dci_kinetis.c ****     else
 466:../Generated_Code/usb_dci_kinetis.c ****     {
 467:../Generated_Code/usb_dci_kinetis.c ****     	SIM_SOPT1 &= ~SIM_SOPT1_USBREGEN_MASK;	// disable usb voltage regulator
 462              		.loc 1 467 0
 463 0092 314B     		ldr	r3, .L20+24
 464 0094 304A     		ldr	r2, .L20+24
 465 0096 1268     		ldr	r2, [r2]
 466 0098 22F00042 		bic	r2, r2, #-2147483648
 467 009c 1A60     		str	r2, [r3]
 468              	.L18:
 468:../Generated_Code/usb_dci_kinetis.c ****     }
 469:../Generated_Code/usb_dci_kinetis.c **** 
 470:../Generated_Code/usb_dci_kinetis.c ****     /* Set the BDT Table address, Need to be on 512 byte boundary */
 471:../Generated_Code/usb_dci_kinetis.c ****     /* D8 Bit is masked in BDT_PAGE_01 */
 472:../Generated_Code/usb_dci_kinetis.c ****     USB0_BDTPAGE1 = (uint_8)(((uint_32)g_bdtmap >> 8)& 0xFE);
 469              		.loc 1 472 0
 470 009e 284B     		ldr	r3, .L20
 471 00a0 2A4A     		ldr	r2, .L20+12
 472 00a2 1268     		ldr	r2, [r2]
 473 00a4 120A     		lsrs	r2, r2, #8
 474 00a6 D2B2     		uxtb	r2, r2
 475 00a8 22F00102 		bic	r2, r2, #1
 476 00ac D2B2     		uxtb	r2, r2
 477 00ae 83F89C20 		strb	r2, [r3, #156]
 473:../Generated_Code/usb_dci_kinetis.c ****     USB0_BDTPAGE2 = (uint_8)((uint_32)g_bdtmap >> 16);
 478              		.loc 1 473 0
 479 00b2 234B     		ldr	r3, .L20
 480 00b4 254A     		ldr	r2, .L20+12
 481 00b6 1268     		ldr	r2, [r2]
 482 00b8 120C     		lsrs	r2, r2, #16
 483 00ba D2B2     		uxtb	r2, r2
 484 00bc 83F8B020 		strb	r2, [r3, #176]
 474:../Generated_Code/usb_dci_kinetis.c ****     USB0_BDTPAGE3 = (uint_8)((uint_32)g_bdtmap >> 24);
 485              		.loc 1 474 0
 486 00c0 1F4B     		ldr	r3, .L20
 487 00c2 224A     		ldr	r2, .L20+12
 488 00c4 1268     		ldr	r2, [r2]
 489 00c6 120E     		lsrs	r2, r2, #24
 490 00c8 D2B2     		uxtb	r2, r2
 491 00ca 83F8B420 		strb	r2, [r3, #180]
 475:../Generated_Code/usb_dci_kinetis.c **** 
 476:../Generated_Code/usb_dci_kinetis.c ****     /* Initialized BDT buffer address */
 477:../Generated_Code/usb_dci_kinetis.c ****     g_bdt_address = ((uint_32)g_bdtmap + BYTES_512);
 492              		.loc 1 477 0
 493 00ce 1F4B     		ldr	r3, .L20+12
 494 00d0 1B68     		ldr	r3, [r3]
 495 00d2 03F50072 		add	r2, r3, #512
 496 00d6 214B     		ldr	r3, .L20+28
 497 00d8 1A60     		str	r2, [r3]
 478:../Generated_Code/usb_dci_kinetis.c **** 
 479:../Generated_Code/usb_dci_kinetis.c **** #if USB_USER_CONFIG_USE_STACK_INIT
 480:../Generated_Code/usb_dci_kinetis.c ****     #ifndef OTG_BUILD
 481:../Generated_Code/usb_dci_kinetis.c ****      /* Pull Up configuration */
 482:../Generated_Code/usb_dci_kinetis.c ****     USB0_CONTROL = USB_CONTROL_DPPULLUPNONOTG_MASK;
 498              		.loc 1 482 0
 499 00da 194B     		ldr	r3, .L20
 500 00dc 1022     		movs	r2, #16
 501 00de 83F80821 		strb	r2, [r3, #264]
 483:../Generated_Code/usb_dci_kinetis.c ****     #endif
 484:../Generated_Code/usb_dci_kinetis.c **** #endif
 485:../Generated_Code/usb_dci_kinetis.c ****     USB0_CTL = USB_CTL_USBENSOFEN_MASK; 	/* Enable USB module */
 502              		.loc 1 485 0
 503 00e2 174B     		ldr	r3, .L20
 504 00e4 0122     		movs	r2, #1
 505 00e6 83F89420 		strb	r2, [r3, #148]
 486:../Generated_Code/usb_dci_kinetis.c ****     USB0_ISTAT = INT_STAT_CLEAR_ALL;      	/* Clear USB interrupts*/
 506              		.loc 1 486 0
 507 00ea 154B     		ldr	r3, .L20
 508 00ec BF22     		movs	r2, #191
 509 00ee 83F88020 		strb	r2, [r3, #128]
 487:../Generated_Code/usb_dci_kinetis.c **** 
 488:../Generated_Code/usb_dci_kinetis.c ****     /* Remove suspend state */
 489:../Generated_Code/usb_dci_kinetis.c ****     USB0_USBCTRL &= ~USB_USBCTRL_SUSP_MASK;
 510              		.loc 1 489 0
 511 00f2 134B     		ldr	r3, .L20
 512 00f4 124A     		ldr	r2, .L20
 513 00f6 92F80021 		ldrb	r2, [r2, #256]
 514 00fa D2B2     		uxtb	r2, r2
 515 00fc 02F07F02 		and	r2, r2, #127
 516 0100 D2B2     		uxtb	r2, r2
 517 0102 83F80021 		strb	r2, [r3, #256]
 490:../Generated_Code/usb_dci_kinetis.c **** 
 491:../Generated_Code/usb_dci_kinetis.c **** #if USB_USER_CONFIG_USE_STACK_INIT
 492:../Generated_Code/usb_dci_kinetis.c ****     /* Enable USB RESET Interrupt */
 493:../Generated_Code/usb_dci_kinetis.c ****     USB0_INTEN |= USB_INTEN_USBRSTEN_MASK;
 518              		.loc 1 493 0
 519 0106 0E4B     		ldr	r3, .L20
 520 0108 0D4A     		ldr	r2, .L20
 521 010a 92F88420 		ldrb	r2, [r2, #132]
 522 010e D2B2     		uxtb	r2, r2
 523 0110 42F00102 		orr	r2, r2, #1
 524 0114 D2B2     		uxtb	r2, r2
 525 0116 83F88420 		strb	r2, [r3, #132]
 494:../Generated_Code/usb_dci_kinetis.c **** 
 495:../Generated_Code/usb_dci_kinetis.c ****     /* Enable USB Sleep Interrupt */
 496:../Generated_Code/usb_dci_kinetis.c ****     USB0_INTEN |= USB_INTEN_SLEEPEN_MASK;
 526              		.loc 1 496 0
 527 011a 094B     		ldr	r3, .L20
 528 011c 084A     		ldr	r2, .L20
 529 011e 92F88420 		ldrb	r2, [r2, #132]
 530 0122 D2B2     		uxtb	r2, r2
 531 0124 42F01002 		orr	r2, r2, #16
 532 0128 D2B2     		uxtb	r2, r2
 533 012a 83F88420 		strb	r2, [r3, #132]
 497:../Generated_Code/usb_dci_kinetis.c **** 
 498:../Generated_Code/usb_dci_kinetis.c ****     USB0_OTGCTL = USB_OTGCTL_DPHIGH_MASK | USB_OTGCTL_OTGEN_MASK;
 534              		.loc 1 498 0
 535 012e 044B     		ldr	r3, .L20
 536 0130 8422     		movs	r2, #132
 537 0132 1A77     		strb	r2, [r3, #28]
 499:../Generated_Code/usb_dci_kinetis.c **** #endif /* USB_USER_CONFIG_USE_STACK_INIT */
 500:../Generated_Code/usb_dci_kinetis.c **** #else	// HIGH_SPEED_DEVICE
 501:../Generated_Code/usb_dci_kinetis.c ****     /* save the controller_ID for future use */
 502:../Generated_Code/usb_dci_kinetis.c ****     g_dci_controller_Id = controller_ID;
 503:../Generated_Code/usb_dci_kinetis.c ****     memset(g_usbd_qh_buf, 0, TOTAL_QHD_SIZE);
 504:../Generated_Code/usb_dci_kinetis.c ****     memset(g_usbd_td_buf, 0, TOTAL_QTD_SIZE);
 505:../Generated_Code/usb_dci_kinetis.c **** 
 506:../Generated_Code/usb_dci_kinetis.c ****     // initialize module in device mode
 507:../Generated_Code/usb_dci_kinetis.c ****     uint_8 status;
 508:../Generated_Code/usb_dci_kinetis.c ****     status = K70_ULPI_SetDeviceMode(controller_ID);
 509:../Generated_Code/usb_dci_kinetis.c ****     if (status != USB_OK)
 510:../Generated_Code/usb_dci_kinetis.c ****     	return status;
 511:../Generated_Code/usb_dci_kinetis.c **** 
 512:../Generated_Code/usb_dci_kinetis.c ****     // initialize endpoint 0
 513:../Generated_Code/usb_dci_kinetis.c ****     usbd_ep_qh_init(controller_ID, EP0, IN, 64, 0, 0, 1);
 514:../Generated_Code/usb_dci_kinetis.c ****     usbd_ep_qh_init(controller_ID, EP0, OUT, 64, 0, 0, 1);
 515:../Generated_Code/usb_dci_kinetis.c **** 
 516:../Generated_Code/usb_dci_kinetis.c ****     // setup interrupts
 517:../Generated_Code/usb_dci_kinetis.c ****     USBHS_USBINTR = USBHS_USBINTR_UE_MASK	// USB interrupt
 518:../Generated_Code/usb_dci_kinetis.c ****     		| USBHS_USBINTR_UEE_MASK		// USB error
 519:../Generated_Code/usb_dci_kinetis.c ****     		| USBHS_USBINTR_PCE_MASK		// Port change
 520:../Generated_Code/usb_dci_kinetis.c ****     		| USBHS_USBINTR_URE_MASK		// Reset enable
 521:../Generated_Code/usb_dci_kinetis.c ****     		| USBHS_USBINTR_SRE_MASK		// SOF received
 522:../Generated_Code/usb_dci_kinetis.c ****     		| USBHS_USBINTR_SLE_MASK		// suspend received
 523:../Generated_Code/usb_dci_kinetis.c ****     		| USBHS_USBINTR_SEE_MASK;		// System error
 524:../Generated_Code/usb_dci_kinetis.c **** 
 525:../Generated_Code/usb_dci_kinetis.c ****     // enable pullup on DP and initiate attach event
 526:../Generated_Code/usb_dci_kinetis.c ****     USBHS_USBCMD |= USBHS_USBCMD_RS_MASK;
 527:../Generated_Code/usb_dci_kinetis.c **** #endif
 528:../Generated_Code/usb_dci_kinetis.c ****     return USB_OK;
 538              		.loc 1 528 0
 539 0134 0023     		movs	r3, #0
 529:../Generated_Code/usb_dci_kinetis.c **** }
 540              		.loc 1 529 0
 541 0136 1846     		mov	r0, r3
 542 0138 0837     		adds	r7, r7, #8
 543 013a BD46     		mov	sp, r7
 544              		@ sp needed
 545 013c 80BD     		pop	{r7, pc}
 546              	.L21:
 547 013e 00BF     		.align	2
 548              	.L20:
 549 0140 00200740 		.word	1074208768
 550 0144 00000000 		.word	g_dci_controller_Id
 551 0148 00000000 		.word	g_bdt_elem
 552 014c 00000000 		.word	g_bdtmap
 553 0150 00000000 		.word	g_Mem
 554 0154 00000000 		.word	g_trf_direction
 555 0158 00700440 		.word	1074032640
 556 015c 00000000 		.word	g_bdt_address
 557              		.cfi_endproc
 558              	.LFE4:
 560              		.section	.text.USB_DCI_DeInit,"ax",%progbits
 561              		.align	2
 562              		.global	USB_DCI_DeInit
 563              		.thumb
 564              		.thumb_func
 566              	USB_DCI_DeInit:
 567              	.LFB5:
 530:../Generated_Code/usb_dci_kinetis.c **** 
 531:../Generated_Code/usb_dci_kinetis.c **** /**************************************************************************//*!
 532:../Generated_Code/usb_dci_kinetis.c ****  *
 533:../Generated_Code/usb_dci_kinetis.c ****  * @name  USB_DCI_DeInit
 534:../Generated_Code/usb_dci_kinetis.c ****  *
 535:../Generated_Code/usb_dci_kinetis.c ****  * @brief The function de-initializes the Controller layer
 536:../Generated_Code/usb_dci_kinetis.c ****  *
 537:../Generated_Code/usb_dci_kinetis.c ****  * @param controller_ID : Controller ID
 538:../Generated_Code/usb_dci_kinetis.c ****  *
 539:../Generated_Code/usb_dci_kinetis.c ****  * @return status
 540:../Generated_Code/usb_dci_kinetis.c ****  *         USB_OK    : Always
 541:../Generated_Code/usb_dci_kinetis.c ****  ******************************************************************************
 542:../Generated_Code/usb_dci_kinetis.c ****  * Initializes the USB controller
 543:../Generated_Code/usb_dci_kinetis.c ****  *****************************************************************************/
 544:../Generated_Code/usb_dci_kinetis.c **** uint_8 USB_DCI_DeInit(void)
 545:../Generated_Code/usb_dci_kinetis.c **** {
 568              		.loc 1 545 0
 569              		.cfi_startproc
 570              		@ args = 0, pretend = 0, frame = 0
 571              		@ frame_needed = 1, uses_anonymous_args = 0
 572              		@ link register save eliminated.
 573 0000 80B4     		push	{r7}
 574              		.cfi_def_cfa_offset 4
 575              		.cfi_offset 7, -4
 576 0002 00AF     		add	r7, sp, #0
 577              		.cfi_def_cfa_register 7
 546:../Generated_Code/usb_dci_kinetis.c **** #if !HIGH_SPEED_DEVICE
 547:../Generated_Code/usb_dci_kinetis.c **** 
 548:../Generated_Code/usb_dci_kinetis.c **** #ifdef MCU_MK70F12
 549:../Generated_Code/usb_dci_kinetis.c **** #if 0 /* hardware bug workaround */
 550:../Generated_Code/usb_dci_kinetis.c **** 	// Reset module
 551:../Generated_Code/usb_dci_kinetis.c **** 	USB0_USBTRC0 |= USB_USBTRC0_USBRESET_MASK;
 552:../Generated_Code/usb_dci_kinetis.c **** 
 553:../Generated_Code/usb_dci_kinetis.c **** 	// Wait for reset to complete
 554:../Generated_Code/usb_dci_kinetis.c **** 	while((USB0_USBTRC0 & USB_USBTRC0_USBRESET_MASK));
 555:../Generated_Code/usb_dci_kinetis.c **** #endif
 556:../Generated_Code/usb_dci_kinetis.c **** 	
 557:../Generated_Code/usb_dci_kinetis.c **** #else
 558:../Generated_Code/usb_dci_kinetis.c **** 	/* Detach CFv1 core to USB bus*/
 559:../Generated_Code/usb_dci_kinetis.c **** 	USB0_USBTRC0 &= ~0x40;
 578              		.loc 1 559 0
 579 0004 174B     		ldr	r3, .L24
 580 0006 174A     		ldr	r2, .L24
 581 0008 92F80C21 		ldrb	r2, [r2, #268]
 582 000c D2B2     		uxtb	r2, r2
 583 000e 22F04002 		bic	r2, r2, #64
 584 0012 D2B2     		uxtb	r2, r2
 585 0014 83F80C21 		strb	r2, [r3, #268]
 560:../Generated_Code/usb_dci_kinetis.c **** #endif
 561:../Generated_Code/usb_dci_kinetis.c **** 
 562:../Generated_Code/usb_dci_kinetis.c **** 
 563:../Generated_Code/usb_dci_kinetis.c **** 	/* Clear USB interrupts*/
 564:../Generated_Code/usb_dci_kinetis.c **** 	USB0_ISTAT = INT_STAT_CLEAR_ALL;
 586              		.loc 1 564 0
 587 0018 124B     		ldr	r3, .L24
 588 001a BF22     		movs	r2, #191
 589 001c 83F88020 		strb	r2, [r3, #128]
 565:../Generated_Code/usb_dci_kinetis.c **** 
 566:../Generated_Code/usb_dci_kinetis.c **** 	/* Disable USB RESET Interrupt */
 567:../Generated_Code/usb_dci_kinetis.c **** 	USB0_INTEN &= ~USB_INTEN_USBRSTEN_MASK;
 590              		.loc 1 567 0
 591 0020 104B     		ldr	r3, .L24
 592 0022 104A     		ldr	r2, .L24
 593 0024 92F88420 		ldrb	r2, [r2, #132]
 594 0028 D2B2     		uxtb	r2, r2
 595 002a 22F00102 		bic	r2, r2, #1
 596 002e D2B2     		uxtb	r2, r2
 597 0030 83F88420 		strb	r2, [r3, #132]
 568:../Generated_Code/usb_dci_kinetis.c **** 
 569:../Generated_Code/usb_dci_kinetis.c ****     /* Disable USB module */
 570:../Generated_Code/usb_dci_kinetis.c **** 	USB0_CTL &= ~USB_CTL_USBENSOFEN_MASK;
 598              		.loc 1 570 0
 599 0034 0B4B     		ldr	r3, .L24
 600 0036 0B4A     		ldr	r2, .L24
 601 0038 92F89420 		ldrb	r2, [r2, #148]
 602 003c D2B2     		uxtb	r2, r2
 603 003e 22F00102 		bic	r2, r2, #1
 604 0042 D2B2     		uxtb	r2, r2
 605 0044 83F89420 		strb	r2, [r3, #148]
 571:../Generated_Code/usb_dci_kinetis.c **** 
 572:../Generated_Code/usb_dci_kinetis.c ****     USB0_OTGCTL &= ~(USB_OTGCTL_DPHIGH_MASK | USB_OTGCTL_OTGEN_MASK);
 606              		.loc 1 572 0
 607 0048 064B     		ldr	r3, .L24
 608 004a 064A     		ldr	r2, .L24
 609 004c 127F     		ldrb	r2, [r2, #28]
 610 004e D2B2     		uxtb	r2, r2
 611 0050 02F07B02 		and	r2, r2, #123
 612 0054 D2B2     		uxtb	r2, r2
 613 0056 1A77     		strb	r2, [r3, #28]
 573:../Generated_Code/usb_dci_kinetis.c **** #else	// HIGH_SPEED_DEVICE
 574:../Generated_Code/usb_dci_kinetis.c **** 
 575:../Generated_Code/usb_dci_kinetis.c **** #endif
 576:../Generated_Code/usb_dci_kinetis.c **** 	 return USB_OK;
 614              		.loc 1 576 0
 615 0058 0023     		movs	r3, #0
 577:../Generated_Code/usb_dci_kinetis.c **** }
 616              		.loc 1 577 0
 617 005a 1846     		mov	r0, r3
 618 005c BD46     		mov	sp, r7
 619              		@ sp needed
 620 005e 5DF8047B 		ldr	r7, [sp], #4
 621 0062 7047     		bx	lr
 622              	.L25:
 623              		.align	2
 624              	.L24:
 625 0064 00200740 		.word	1074208768
 626              		.cfi_endproc
 627              	.LFE5:
 629              		.section	.rodata
 630              		.align	2
 631              	.LC0:
 632 0000 08000000 		.word	8
 633 0004 04000000 		.word	4
 634              		.section	.text.USB_DCI_Init_EndPoint,"ax",%progbits
 635              		.align	2
 636              		.global	USB_DCI_Init_EndPoint
 637              		.thumb
 638              		.thumb_func
 640              	USB_DCI_Init_EndPoint:
 641              	.LFB6:
 578:../Generated_Code/usb_dci_kinetis.c **** 
 579:../Generated_Code/usb_dci_kinetis.c **** /**************************************************************************//*!
 580:../Generated_Code/usb_dci_kinetis.c ****  *
 581:../Generated_Code/usb_dci_kinetis.c ****  * @name  USB_DCI_Init_EndPoint
 582:../Generated_Code/usb_dci_kinetis.c ****  *
 583:../Generated_Code/usb_dci_kinetis.c ****  * @brief The function initializes an endpoint
 584:../Generated_Code/usb_dci_kinetis.c ****  *
 585:../Generated_Code/usb_dci_kinetis.c ****  * @param controller_ID : Controller ID
 586:../Generated_Code/usb_dci_kinetis.c ****  * @param ep_ptr        : Pointer to EndPoint Structures
 587:../Generated_Code/usb_dci_kinetis.c ****  * @param flag          : Zero Termination
 588:../Generated_Code/usb_dci_kinetis.c ****  *
 589:../Generated_Code/usb_dci_kinetis.c ****  * @return status
 590:../Generated_Code/usb_dci_kinetis.c ****  *         USB_OK                    : When Successfull
 591:../Generated_Code/usb_dci_kinetis.c ****  *         USBERR_EP_INIT_FAILED     : When Error
 592:../Generated_Code/usb_dci_kinetis.c ****  ******************************************************************************
 593:../Generated_Code/usb_dci_kinetis.c ****  *
 594:../Generated_Code/usb_dci_kinetis.c ****  * This function initializes an endpoint and the Bufffer Descriptor Table
 595:../Generated_Code/usb_dci_kinetis.c ****  * entry associated with it. Incase the input parameters are invalid it will
 596:../Generated_Code/usb_dci_kinetis.c ****  * return USBERR_EP_INIT_FAILED error.
 597:../Generated_Code/usb_dci_kinetis.c ****  *
 598:../Generated_Code/usb_dci_kinetis.c ****  *****************************************************************************/
 599:../Generated_Code/usb_dci_kinetis.c **** uint_8 USB_DCI_Init_EndPoint (
 600:../Generated_Code/usb_dci_kinetis.c ****     uint_8               controller_ID,/* [IN] Controller ID */
 601:../Generated_Code/usb_dci_kinetis.c ****     USB_EP_STRUCT_PTR    ep_ptr,       /* [IN] Pointer to Endpoint structure,
 602:../Generated_Code/usb_dci_kinetis.c ****                                                (endpoint number,
 603:../Generated_Code/usb_dci_kinetis.c ****                                                 endpoint type,
 604:../Generated_Code/usb_dci_kinetis.c ****                                                 endpoint direction,
 605:../Generated_Code/usb_dci_kinetis.c ****                                                 max packet size) */
 606:../Generated_Code/usb_dci_kinetis.c ****     boolean              flag          /* [IN] Zero Termination */
 607:../Generated_Code/usb_dci_kinetis.c **** )
 608:../Generated_Code/usb_dci_kinetis.c **** {
 642              		.loc 1 608 0
 643              		.cfi_startproc
 644              		@ args = 0, pretend = 0, frame = 32
 645              		@ frame_needed = 1, uses_anonymous_args = 0
 646 0000 80B5     		push	{r7, lr}
 647              		.cfi_def_cfa_offset 8
 648              		.cfi_offset 7, -8
 649              		.cfi_offset 14, -4
 650 0002 88B0     		sub	sp, sp, #32
 651              		.cfi_def_cfa_offset 40
 652 0004 00AF     		add	r7, sp, #0
 653              		.cfi_def_cfa_register 7
 654 0006 3960     		str	r1, [r7]
 655 0008 1346     		mov	r3, r2
 656 000a 0246     		mov	r2, r0
 657 000c FA71     		strb	r2, [r7, #7]
 658 000e BB71     		strb	r3, [r7, #6]
 609:../Generated_Code/usb_dci_kinetis.c **** #if !HIGH_SPEED_DEVICE
 610:../Generated_Code/usb_dci_kinetis.c ****     uint_8 bdtmap_index;
 611:../Generated_Code/usb_dci_kinetis.c ****     uint_8 bdtelem_index;
 612:../Generated_Code/usb_dci_kinetis.c ****     uint_8 ep_num = ep_ptr->ep_num;
 659              		.loc 1 612 0
 660 0010 3B68     		ldr	r3, [r7]
 661 0012 1B78     		ldrb	r3, [r3]
 662 0014 FB77     		strb	r3, [r7, #31]
 613:../Generated_Code/usb_dci_kinetis.c ****     uint_8 direction = ep_ptr->direction;
 663              		.loc 1 613 0
 664 0016 3B68     		ldr	r3, [r7]
 665 0018 9B78     		ldrb	r3, [r3, #2]
 666 001a BB77     		strb	r3, [r7, #30]
 614:../Generated_Code/usb_dci_kinetis.c ****     uint_32 ep_ctrl[2] = {EP_OUT, EP_IN};
 667              		.loc 1 614 0
 668 001c 764A     		ldr	r2, .L36
 669 001e 07F10C03 		add	r3, r7, #12
 670 0022 92E80300 		ldmia	r2, {r0, r1}
 671 0026 83E80300 		stmia	r3, {r0, r1}
 615:../Generated_Code/usb_dci_kinetis.c ****     P_BUFF_DSC temp;
 616:../Generated_Code/usb_dci_kinetis.c ****     P_BDT_ELEM bdt_elem;
 617:../Generated_Code/usb_dci_kinetis.c ****     UNUSED(controller_ID);
 618:../Generated_Code/usb_dci_kinetis.c **** 
 619:../Generated_Code/usb_dci_kinetis.c ****     /* if the max packet size is greater than the max buffer size */
 620:../Generated_Code/usb_dci_kinetis.c ****     if(ep_ptr->size > MAX_EP_BUFFER_SIZE)
 672              		.loc 1 620 0
 673 002a 3B68     		ldr	r3, [r7]
 674 002c B3F80330 		ldrh	r3, [r3, #3]	@ unaligned
 675 0030 9BB2     		uxth	r3, r3
 676 0032 B3F5007F 		cmp	r3, #512
 677 0036 06D9     		bls	.L27
 621:../Generated_Code/usb_dci_kinetis.c ****     {
 622:../Generated_Code/usb_dci_kinetis.c ****         ep_ptr->size = MAX_EP_BUFFER_SIZE;
 678              		.loc 1 622 0
 679 0038 3B68     		ldr	r3, [r7]
 680 003a 0022     		movs	r2, #0
 681 003c DA70     		strb	r2, [r3, #3]
 682 003e 0022     		movs	r2, #0
 683 0040 42F00202 		orr	r2, r2, #2
 684 0044 1A71     		strb	r2, [r3, #4]
 685              	.L27:
 623:../Generated_Code/usb_dci_kinetis.c ****     }
 624:../Generated_Code/usb_dci_kinetis.c **** 
 625:../Generated_Code/usb_dci_kinetis.c ****     /* Get the bdt index correspoding to the endpoint */
 626:../Generated_Code/usb_dci_kinetis.c ****     bdtmap_index = USB_DCI_Get_BDT_Index(ep_num, direction,
 686              		.loc 1 626 0
 687 0046 FA7F     		ldrb	r2, [r7, #31]	@ zero_extendqisi2
 688 0048 BB7F     		ldrb	r3, [r7, #30]	@ zero_extendqisi2
 689 004a 1046     		mov	r0, r2
 690 004c 1946     		mov	r1, r3
 691 004e 0022     		movs	r2, #0
 692 0050 FFF7FEFF 		bl	USB_DCI_Get_BDT_Index
 693 0054 0346     		mov	r3, r0
 694 0056 7B77     		strb	r3, [r7, #29]
 627:../Generated_Code/usb_dci_kinetis.c ****         USB_RAM_EVEN_BUFFER);
 628:../Generated_Code/usb_dci_kinetis.c ****     bdtelem_index = (uint_8)TRANSFER_INDEX(bdtmap_index);
 695              		.loc 1 628 0
 696 0058 7B7F     		ldrb	r3, [r7, #29]	@ zero_extendqisi2
 697 005a 5B08     		lsrs	r3, r3, #1
 698 005c 3B77     		strb	r3, [r7, #28]
 629:../Generated_Code/usb_dci_kinetis.c **** 
 630:../Generated_Code/usb_dci_kinetis.c ****     /*
 631:../Generated_Code/usb_dci_kinetis.c ****        incase the bdtmap_index is invalid
 632:../Generated_Code/usb_dci_kinetis.c ****        or already initialised return with an error
 633:../Generated_Code/usb_dci_kinetis.c ****     */
 634:../Generated_Code/usb_dci_kinetis.c ****     if((bdtmap_index  == INVALID_BDT_INDEX) ||
 699              		.loc 1 634 0
 700 005e 7B7F     		ldrb	r3, [r7, #29]	@ zero_extendqisi2
 701 0060 FF2B     		cmp	r3, #255
 702 0062 13D0     		beq	.L28
 635:../Generated_Code/usb_dci_kinetis.c ****        (g_bdt_elem[bdtelem_index].len != (uint_16)UNINITIALISED_VAL) ||
 703              		.loc 1 635 0 discriminator 1
 704 0064 3A7F     		ldrb	r2, [r7, #28]	@ zero_extendqisi2
 705 0066 6549     		ldr	r1, .L36+4
 706 0068 1346     		mov	r3, r2
 707 006a DB00     		lsls	r3, r3, #3
 708 006c 1344     		add	r3, r3, r2
 709 006e 5B00     		lsls	r3, r3, #1
 710 0070 0B44     		add	r3, r3, r1
 711 0072 1A88     		ldrh	r2, [r3]
 634:../Generated_Code/usb_dci_kinetis.c ****     if((bdtmap_index  == INVALID_BDT_INDEX) ||
 712              		.loc 1 634 0 discriminator 1
 713 0074 4FF6FF73 		movw	r3, #65535
 714 0078 9A42     		cmp	r2, r3
 715 007a 07D1     		bne	.L28
 636:../Generated_Code/usb_dci_kinetis.c ****        (ep_ptr->type > USB_INTERRUPT_PIPE) ||
 716              		.loc 1 636 0
 717 007c 3B68     		ldr	r3, [r7]
 718 007e 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 635:../Generated_Code/usb_dci_kinetis.c ****        (g_bdt_elem[bdtelem_index].len != (uint_16)UNINITIALISED_VAL) ||
 719              		.loc 1 635 0
 720 0080 032B     		cmp	r3, #3
 721 0082 03D8     		bhi	.L28
 637:../Generated_Code/usb_dci_kinetis.c ****        (ep_ptr->direction > USB_SEND))
 722              		.loc 1 637 0
 723 0084 3B68     		ldr	r3, [r7]
 724 0086 9B78     		ldrb	r3, [r3, #2]	@ zero_extendqisi2
 636:../Generated_Code/usb_dci_kinetis.c ****        (ep_ptr->type > USB_INTERRUPT_PIPE) ||
 725              		.loc 1 636 0
 726 0088 012B     		cmp	r3, #1
 727 008a 01D9     		bls	.L29
 728              	.L28:
 638:../Generated_Code/usb_dci_kinetis.c ****     {
 639:../Generated_Code/usb_dci_kinetis.c ****         return USBERR_EP_INIT_FAILED;
 729              		.loc 1 639 0
 730 008c 9523     		movs	r3, #149
 731 008e AEE0     		b	.L35
 732              	.L29:
 640:../Generated_Code/usb_dci_kinetis.c ****     }
 641:../Generated_Code/usb_dci_kinetis.c **** 
 642:../Generated_Code/usb_dci_kinetis.c ****     bdt_elem = &g_bdt_elem[bdtelem_index];
 733              		.loc 1 642 0
 734 0090 3A7F     		ldrb	r2, [r7, #28]	@ zero_extendqisi2
 735 0092 1346     		mov	r3, r2
 736 0094 DB00     		lsls	r3, r3, #3
 737 0096 1344     		add	r3, r3, r2
 738 0098 5B00     		lsls	r3, r3, #1
 739 009a 584A     		ldr	r2, .L36+4
 740 009c 1344     		add	r3, r3, r2
 741 009e BB61     		str	r3, [r7, #24]
 643:../Generated_Code/usb_dci_kinetis.c ****     /* Reset Handler resets bdtmap_index to UNINITIALISED_VAL */
 644:../Generated_Code/usb_dci_kinetis.c ****     if(bdt_elem->bdtmap_index == (uint_8)UNINITIALISED_VAL)
 742              		.loc 1 644 0
 743 00a0 BB69     		ldr	r3, [r7, #24]
 744 00a2 DB7B     		ldrb	r3, [r3, #15]	@ zero_extendqisi2
 745 00a4 FF2B     		cmp	r3, #255
 746 00a6 02D1     		bne	.L31
 645:../Generated_Code/usb_dci_kinetis.c ****     {
 646:../Generated_Code/usb_dci_kinetis.c ****         bdt_elem->bdtmap_index = 0;
 747              		.loc 1 646 0
 748 00a8 BB69     		ldr	r3, [r7, #24]
 749 00aa 0022     		movs	r2, #0
 750 00ac DA73     		strb	r2, [r3, #15]
 751              	.L31:
 647:../Generated_Code/usb_dci_kinetis.c ****     }
 648:../Generated_Code/usb_dci_kinetis.c **** 
 649:../Generated_Code/usb_dci_kinetis.c ****    /* update bdt element structure */
 650:../Generated_Code/usb_dci_kinetis.c ****     bdt_elem->len = (uint_16)ep_ptr->size;
 752              		.loc 1 650 0
 753 00ae 3B68     		ldr	r3, [r7]
 754 00b0 B3F80330 		ldrh	r3, [r3, #3]	@ unaligned
 755 00b4 9AB2     		uxth	r2, r3
 756 00b6 BB69     		ldr	r3, [r7, #24]
 757 00b8 1A80     		strh	r2, [r3]	@ unaligned
 651:../Generated_Code/usb_dci_kinetis.c ****     bdt_elem->flag = flag;
 758              		.loc 1 651 0
 759 00ba BB69     		ldr	r3, [r7, #24]
 760 00bc BA79     		ldrb	r2, [r7, #6]
 761 00be 9A73     		strb	r2, [r3, #14]
 652:../Generated_Code/usb_dci_kinetis.c ****     /* preserving even/odd buffer bit */
 653:../Generated_Code/usb_dci_kinetis.c ****     bdt_elem->bdtmap_index &= 0x01;
 762              		.loc 1 653 0
 763 00c0 BB69     		ldr	r3, [r7, #24]
 764 00c2 DB7B     		ldrb	r3, [r3, #15]	@ zero_extendqisi2
 765 00c4 03F00103 		and	r3, r3, #1
 766 00c8 DAB2     		uxtb	r2, r3
 767 00ca BB69     		ldr	r3, [r7, #24]
 768 00cc DA73     		strb	r2, [r3, #15]
 654:../Generated_Code/usb_dci_kinetis.c ****     bdt_elem->bdtmap_index |= ((direction << 1) | (ep_num << 2));
 769              		.loc 1 654 0
 770 00ce BB69     		ldr	r3, [r7, #24]
 771 00d0 DB7B     		ldrb	r3, [r3, #15]	@ zero_extendqisi2
 772 00d2 DAB2     		uxtb	r2, r3
 773 00d4 BB7F     		ldrb	r3, [r7, #30]	@ zero_extendqisi2
 774 00d6 5B00     		lsls	r3, r3, #1
 775 00d8 D9B2     		uxtb	r1, r3
 776 00da FB7F     		ldrb	r3, [r7, #31]	@ zero_extendqisi2
 777 00dc 9B00     		lsls	r3, r3, #2
 778 00de DBB2     		uxtb	r3, r3
 779 00e0 0B43     		orrs	r3, r3, r1
 780 00e2 DBB2     		uxtb	r3, r3
 781 00e4 1343     		orrs	r3, r3, r2
 782 00e6 DBB2     		uxtb	r3, r3
 783 00e8 DAB2     		uxtb	r2, r3
 784 00ea BB69     		ldr	r3, [r7, #24]
 785 00ec DA73     		strb	r2, [r3, #15]
 655:../Generated_Code/usb_dci_kinetis.c ****     bdt_elem->addr = g_bdt_address;
 786              		.loc 1 655 0
 787 00ee 444B     		ldr	r3, .L36+8
 788 00f0 1A68     		ldr	r2, [r3]
 789 00f2 BB69     		ldr	r3, [r7, #24]
 790 00f4 C3F80220 		str	r2, [r3, #2]	@ unaligned
 656:../Generated_Code/usb_dci_kinetis.c ****     bdt_elem->type = ep_ptr->type;
 791              		.loc 1 656 0
 792 00f8 3B68     		ldr	r3, [r7]
 793 00fa 5A78     		ldrb	r2, [r3, #1]	@ zero_extendqisi2
 794 00fc BB69     		ldr	r3, [r7, #24]
 795 00fe 5A74     		strb	r2, [r3, #17]
 657:../Generated_Code/usb_dci_kinetis.c ****     bdt_elem->direction = direction;
 796              		.loc 1 657 0
 797 0100 BB69     		ldr	r3, [r7, #24]
 798 0102 BA7F     		ldrb	r2, [r7, #30]
 799 0104 1A74     		strb	r2, [r3, #16]
 658:../Generated_Code/usb_dci_kinetis.c **** 
 659:../Generated_Code/usb_dci_kinetis.c ****     temp = &g_bdtmap->ep_dsc[bdt_elem->bdtmap_index];
 800              		.loc 1 659 0
 801 0106 3F4B     		ldr	r3, .L36+12
 802 0108 1A68     		ldr	r2, [r3]
 803 010a BB69     		ldr	r3, [r7, #24]
 804 010c DB7B     		ldrb	r3, [r3, #15]	@ zero_extendqisi2
 805 010e DB00     		lsls	r3, r3, #3
 806 0110 1344     		add	r3, r3, r2
 807 0112 7B61     		str	r3, [r7, #20]
 660:../Generated_Code/usb_dci_kinetis.c **** 
 661:../Generated_Code/usb_dci_kinetis.c ****     /* Update BDTMAP for endpoint's EVEN Buffer */
 662:../Generated_Code/usb_dci_kinetis.c ****     temp->cnt = SWAP16((uint_16)ep_ptr->size);
 808              		.loc 1 662 0
 809 0114 3B68     		ldr	r3, [r7]
 810 0116 B3F80330 		ldrh	r3, [r3, #3]	@ unaligned
 811 011a 9AB2     		uxth	r2, r3
 812 011c 7B69     		ldr	r3, [r7, #20]
 813 011e 5A80     		strh	r2, [r3, #2]	@ unaligned
 663:../Generated_Code/usb_dci_kinetis.c ****     temp->addr = SWAP32(g_bdt_address);
 814              		.loc 1 663 0
 815 0120 374B     		ldr	r3, .L36+8
 816 0122 1A68     		ldr	r2, [r3]
 817 0124 7B69     		ldr	r3, [r7, #20]
 818 0126 5A60     		str	r2, [r3, #4]	@ unaligned
 664:../Generated_Code/usb_dci_kinetis.c ****     temp->Stat._byte = (_CPU | _DATA0 | _DTS);
 819              		.loc 1 664 0
 820 0128 7B69     		ldr	r3, [r7, #20]
 821 012a 0822     		movs	r2, #8
 822 012c 1A70     		strb	r2, [r3]
 665:../Generated_Code/usb_dci_kinetis.c **** 
 666:../Generated_Code/usb_dci_kinetis.c ****     /* Update BDTMAP for endpoint's ODD Buffer */
 667:../Generated_Code/usb_dci_kinetis.c ****     temp = &g_bdtmap->ep_dsc[(uint8_t)((bdt_elem->bdtmap_index) ^ 1)];
 823              		.loc 1 667 0
 824 012e 354B     		ldr	r3, .L36+12
 825 0130 1A68     		ldr	r2, [r3]
 826 0132 BB69     		ldr	r3, [r7, #24]
 827 0134 DB7B     		ldrb	r3, [r3, #15]	@ zero_extendqisi2
 828 0136 83F00103 		eor	r3, r3, #1
 829 013a DBB2     		uxtb	r3, r3
 830 013c DB00     		lsls	r3, r3, #3
 831 013e 1344     		add	r3, r3, r2
 832 0140 7B61     		str	r3, [r7, #20]
 668:../Generated_Code/usb_dci_kinetis.c **** 
 669:../Generated_Code/usb_dci_kinetis.c ****     temp->cnt = SWAP16((uint_16)ep_ptr->size);
 833              		.loc 1 669 0
 834 0142 3B68     		ldr	r3, [r7]
 835 0144 B3F80330 		ldrh	r3, [r3, #3]	@ unaligned
 836 0148 9AB2     		uxth	r2, r3
 837 014a 7B69     		ldr	r3, [r7, #20]
 838 014c 5A80     		strh	r2, [r3, #2]	@ unaligned
 670:../Generated_Code/usb_dci_kinetis.c ****     temp->addr = SWAP32(g_bdt_address);
 839              		.loc 1 670 0
 840 014e 2C4B     		ldr	r3, .L36+8
 841 0150 1A68     		ldr	r2, [r3]
 842 0152 7B69     		ldr	r3, [r7, #20]
 843 0154 5A60     		str	r2, [r3, #4]	@ unaligned
 671:../Generated_Code/usb_dci_kinetis.c ****     temp->Stat._byte = (_CPU | _DATA1 | _DTS);
 844              		.loc 1 671 0
 845 0156 7B69     		ldr	r3, [r7, #20]
 846 0158 4822     		movs	r2, #72
 847 015a 1A70     		strb	r2, [r3]
 672:../Generated_Code/usb_dci_kinetis.c **** 
 673:../Generated_Code/usb_dci_kinetis.c ****     /* update the buffer address for the next endpoint */
 674:../Generated_Code/usb_dci_kinetis.c ****     g_bdt_address += ep_ptr->size;
 848              		.loc 1 674 0
 849 015c 3B68     		ldr	r3, [r7]
 850 015e B3F80330 		ldrh	r3, [r3, #3]	@ unaligned
 851 0162 9BB2     		uxth	r3, r3
 852 0164 1A46     		mov	r2, r3
 853 0166 264B     		ldr	r3, .L36+8
 854 0168 1B68     		ldr	r3, [r3]
 855 016a 1A44     		add	r2, r2, r3
 856 016c 244B     		ldr	r3, .L36+8
 857 016e 1A60     		str	r2, [r3]
 675:../Generated_Code/usb_dci_kinetis.c **** 
 676:../Generated_Code/usb_dci_kinetis.c ****     if(direction == USB_RECV)
 858              		.loc 1 676 0
 859 0170 BB7F     		ldrb	r3, [r7, #30]	@ zero_extendqisi2
 860 0172 002B     		cmp	r3, #0
 861 0174 0DD1     		bne	.L32
 677:../Generated_Code/usb_dci_kinetis.c ****     {
 678:../Generated_Code/usb_dci_kinetis.c ****         /*
 679:../Generated_Code/usb_dci_kinetis.c ****            For Recv Endpoints
 680:../Generated_Code/usb_dci_kinetis.c ****            Give SIE Control to DATA0
 681:../Generated_Code/usb_dci_kinetis.c ****         */
 682:../Generated_Code/usb_dci_kinetis.c ****         temp = &g_bdtmap->ep_dsc[bdt_elem->bdtmap_index];
 862              		.loc 1 682 0
 863 0176 234B     		ldr	r3, .L36+12
 864 0178 1A68     		ldr	r2, [r3]
 865 017a BB69     		ldr	r3, [r7, #24]
 866 017c DB7B     		ldrb	r3, [r3, #15]	@ zero_extendqisi2
 867 017e DB00     		lsls	r3, r3, #3
 868 0180 1344     		add	r3, r3, r2
 869 0182 7B61     		str	r3, [r7, #20]
 683:../Generated_Code/usb_dci_kinetis.c ****         temp->Stat._byte |= _SIE;
 870              		.loc 1 683 0
 871 0184 7B69     		ldr	r3, [r7, #20]
 872 0186 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 873 0188 63F07F03 		orn	r3, r3, #127
 874 018c DAB2     		uxtb	r2, r3
 875 018e 7B69     		ldr	r3, [r7, #20]
 876 0190 1A70     		strb	r2, [r3]
 877              	.L32:
 684:../Generated_Code/usb_dci_kinetis.c ****     }
 685:../Generated_Code/usb_dci_kinetis.c **** 
 686:../Generated_Code/usb_dci_kinetis.c ****     /* enable handshake for Non-Isochronous Endpoints */
 687:../Generated_Code/usb_dci_kinetis.c ****     ep_ctrl[direction] |= ((ep_ptr->type != USB_ISOCHRONOUS_PIPE) ?
 878              		.loc 1 687 0
 879 0192 B97F     		ldrb	r1, [r7, #30]	@ zero_extendqisi2
 880 0194 BB7F     		ldrb	r3, [r7, #30]	@ zero_extendqisi2
 881 0196 9B00     		lsls	r3, r3, #2
 882 0198 07F12000 		add	r0, r7, #32
 883 019c 0344     		add	r3, r3, r0
 884 019e 53F8142C 		ldr	r2, [r3, #-20]
 885 01a2 3B68     		ldr	r3, [r7]
 886 01a4 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 887 01a6 012B     		cmp	r3, #1
 888 01a8 01D0     		beq	.L33
 889              		.loc 1 687 0 is_stmt 0 discriminator 1
 890 01aa 0123     		movs	r3, #1
 891 01ac 00E0     		b	.L34
 892              	.L33:
 893              		.loc 1 687 0 discriminator 2
 894 01ae 0023     		movs	r3, #0
 895              	.L34:
 896              		.loc 1 687 0 discriminator 3
 897 01b0 1A43     		orrs	r2, r2, r3
 898 01b2 8B00     		lsls	r3, r1, #2
 899 01b4 07F12001 		add	r1, r7, #32
 900 01b8 0B44     		add	r3, r3, r1
 901 01ba 43F8142C 		str	r2, [r3, #-20]
 688:../Generated_Code/usb_dci_kinetis.c ****         HSHK_EN:0x00);
 689:../Generated_Code/usb_dci_kinetis.c ****     /* set the EndPoint Control MCU Register*/
 690:../Generated_Code/usb_dci_kinetis.c ****     *((&USB0_ENDPT0) + (4 * ep_num)) |= ep_ctrl[direction];
 902              		.loc 1 690 0 is_stmt 1 discriminator 3
 903 01be FB7F     		ldrb	r3, [r7, #31]	@ zero_extendqisi2
 904 01c0 9B00     		lsls	r3, r3, #2
 905 01c2 1A46     		mov	r2, r3
 906 01c4 104B     		ldr	r3, .L36+16
 907 01c6 1344     		add	r3, r3, r2
 908 01c8 FA7F     		ldrb	r2, [r7, #31]	@ zero_extendqisi2
 909 01ca 9200     		lsls	r2, r2, #2
 910 01cc 1146     		mov	r1, r2
 911 01ce 0E4A     		ldr	r2, .L36+16
 912 01d0 0A44     		add	r2, r2, r1
 913 01d2 1278     		ldrb	r2, [r2]
 914 01d4 D1B2     		uxtb	r1, r2
 915 01d6 BA7F     		ldrb	r2, [r7, #30]	@ zero_extendqisi2
 916 01d8 9200     		lsls	r2, r2, #2
 917 01da 07F12000 		add	r0, r7, #32
 918 01de 0244     		add	r2, r2, r0
 919 01e0 52F8142C 		ldr	r2, [r2, #-20]
 920 01e4 D2B2     		uxtb	r2, r2
 921 01e6 0A43     		orrs	r2, r2, r1
 922 01e8 D2B2     		uxtb	r2, r2
 923 01ea 1A70     		strb	r2, [r3]
 691:../Generated_Code/usb_dci_kinetis.c **** #else	/* HIGH_SPEED_DEVICE */
 692:../Generated_Code/usb_dci_kinetis.c ****     unsigned char mult;
 693:../Generated_Code/usb_dci_kinetis.c **** 
 694:../Generated_Code/usb_dci_kinetis.c ****     /* No need to initialize EP0 */
 695:../Generated_Code/usb_dci_kinetis.c ****     if (ep_ptr->ep_num == CONTROL_ENDPOINT)
 696:../Generated_Code/usb_dci_kinetis.c ****     	return USB_OK;
 697:../Generated_Code/usb_dci_kinetis.c **** 
 698:../Generated_Code/usb_dci_kinetis.c ****     switch (ep_ptr->type & 0x3) {
 699:../Generated_Code/usb_dci_kinetis.c **** 		case EP_TRANSFER_TYPE_CONTROL:
 700:../Generated_Code/usb_dci_kinetis.c **** 		case EP_TRANSFER_TYPE_BULK:
 701:../Generated_Code/usb_dci_kinetis.c **** 		case EP_TRANSFER_TYPE_INTERRUPT:
 702:../Generated_Code/usb_dci_kinetis.c **** 			mult = 0;
 703:../Generated_Code/usb_dci_kinetis.c **** 			break;
 704:../Generated_Code/usb_dci_kinetis.c **** 		case EP_TRANSFER_TYPE_ISOCHRONOUS:
 705:../Generated_Code/usb_dci_kinetis.c **** 			/* Calculate the ISO transfer High-Bandwidth Pipe Multiplier
 706:../Generated_Code/usb_dci_kinetis.c **** 			 * The ISO endpoints, must set Mult 1, 2, 3 for high speed
 707:../Generated_Code/usb_dci_kinetis.c **** 			 * and only 1 for full speed
 708:../Generated_Code/usb_dci_kinetis.c **** 			 */
 709:../Generated_Code/usb_dci_kinetis.c **** #ifdef ULPI_FORCE_FULLSPEED
 710:../Generated_Code/usb_dci_kinetis.c **** 			mult = 1;
 711:../Generated_Code/usb_dci_kinetis.c **** #else
 712:../Generated_Code/usb_dci_kinetis.c **** 			mult = (unsigned char)(1 + (((ep_ptr->size) >> 11) & 0x03));
 713:../Generated_Code/usb_dci_kinetis.c **** #endif
 714:../Generated_Code/usb_dci_kinetis.c ****     }
 715:../Generated_Code/usb_dci_kinetis.c **** 
 716:../Generated_Code/usb_dci_kinetis.c ****     /* setup dQH */
 717:../Generated_Code/usb_dci_kinetis.c ****     usbd_ep_qh_init(controller_ID, ep_ptr->ep_num, ep_ptr->direction, ep_ptr->size, flag, mult, 0xD
 718:../Generated_Code/usb_dci_kinetis.c **** 
 719:../Generated_Code/usb_dci_kinetis.c ****     /* enable endpoint */
 720:../Generated_Code/usb_dci_kinetis.c ****     usbd_ep_setup(controller_ID, ep_ptr->ep_num, ep_ptr->direction, ep_ptr->type);
 721:../Generated_Code/usb_dci_kinetis.c **** #endif /* HIGH_SPEED_DEVICE */
 722:../Generated_Code/usb_dci_kinetis.c ****     return USB_OK;
 924              		.loc 1 722 0 discriminator 3
 925 01ec 0023     		movs	r3, #0
 926              	.L35:
 723:../Generated_Code/usb_dci_kinetis.c **** }
 927              		.loc 1 723 0
 928 01ee 1846     		mov	r0, r3
 929 01f0 2037     		adds	r7, r7, #32
 930 01f2 BD46     		mov	sp, r7
 931              		@ sp needed
 932 01f4 80BD     		pop	{r7, pc}
 933              	.L37:
 934 01f6 00BF     		.align	2
 935              	.L36:
 936 01f8 00000000 		.word	.LC0
 937 01fc 00000000 		.word	g_bdt_elem
 938 0200 00000000 		.word	g_bdt_address
 939 0204 00000000 		.word	g_bdtmap
 940 0208 C0200740 		.word	1074208960
 941              		.cfi_endproc
 942              	.LFE6:
 944              		.section	.text._usb_device_cancel_transfer,"ax",%progbits
 945              		.align	2
 946              		.global	_usb_device_cancel_transfer
 947              		.thumb
 948              		.thumb_func
 950              	_usb_device_cancel_transfer:
 951              	.LFB7:
 724:../Generated_Code/usb_dci_kinetis.c **** 
 725:../Generated_Code/usb_dci_kinetis.c **** /**************************************************************************//*!
 726:../Generated_Code/usb_dci_kinetis.c ****  *
 727:../Generated_Code/usb_dci_kinetis.c ****  * @name  USB_DCI_Cancel_Transfer
 728:../Generated_Code/usb_dci_kinetis.c ****  *
 729:../Generated_Code/usb_dci_kinetis.c ****  * @brief The function cancels any pending Transfers which ahve not been sent
 730:../Generated_Code/usb_dci_kinetis.c ****  *
 731:../Generated_Code/usb_dci_kinetis.c ****  * @param handle          : USB Device handle
 732:../Generated_Code/usb_dci_kinetis.c ****  * @param endpoint_number : Endpoint number
 733:../Generated_Code/usb_dci_kinetis.c ****  * @param direction       : Endpoint direction
 734:../Generated_Code/usb_dci_kinetis.c ****  *
 735:../Generated_Code/usb_dci_kinetis.c ****  * @return status
 736:../Generated_Code/usb_dci_kinetis.c ****  *         USBERR_NOT_SUPPORTED : Always
 737:../Generated_Code/usb_dci_kinetis.c ****  ******************************************************************************
 738:../Generated_Code/usb_dci_kinetis.c ****  * This function just returns Error Code not supported
 739:../Generated_Code/usb_dci_kinetis.c ****  *****************************************************************************/
 740:../Generated_Code/usb_dci_kinetis.c **** uint_8 USB_DCI_Cancel_Transfer (
 741:../Generated_Code/usb_dci_kinetis.c ****     _usb_device_handle    handle,             /* [IN] USB Device handle */
 742:../Generated_Code/usb_dci_kinetis.c ****     uint_8                endpoint_number,    /* [IN] Endpoint number */
 743:../Generated_Code/usb_dci_kinetis.c ****     uint_8                direction           /* [IN] Endpoint direction */
 744:../Generated_Code/usb_dci_kinetis.c **** )
 745:../Generated_Code/usb_dci_kinetis.c **** {
 952              		.loc 1 745 0
 953              		.cfi_startproc
 954              		@ args = 0, pretend = 0, frame = 24
 955              		@ frame_needed = 1, uses_anonymous_args = 0
 956 0000 80B5     		push	{r7, lr}
 957              		.cfi_def_cfa_offset 8
 958              		.cfi_offset 7, -8
 959              		.cfi_offset 14, -4
 960 0002 86B0     		sub	sp, sp, #24
 961              		.cfi_def_cfa_offset 32
 962 0004 00AF     		add	r7, sp, #0
 963              		.cfi_def_cfa_register 7
 964 0006 7860     		str	r0, [r7, #4]
 965 0008 1346     		mov	r3, r2
 966 000a 0A46     		mov	r2, r1
 967 000c FA70     		strb	r2, [r7, #3]
 968 000e BB70     		strb	r3, [r7, #2]
 746:../Generated_Code/usb_dci_kinetis.c **** #if !HIGH_SPEED_DEVICE
 747:../Generated_Code/usb_dci_kinetis.c **** #ifdef LONG_TRANSACTION
 748:../Generated_Code/usb_dci_kinetis.c ****     uint_8 status= USBERR_UNKNOWN_ERROR;
 969              		.loc 1 748 0
 970 0010 C423     		movs	r3, #196
 971 0012 FB75     		strb	r3, [r7, #23]
 749:../Generated_Code/usb_dci_kinetis.c **** 
 750:../Generated_Code/usb_dci_kinetis.c ****     /* validate params and get the bdt index */
 751:../Generated_Code/usb_dci_kinetis.c ****     uint_8 bdt_index = USB_DCI_Validate_Param (endpoint_number, direction,
 972              		.loc 1 751 0
 973 0014 FA78     		ldrb	r2, [r7, #3]	@ zero_extendqisi2
 974 0016 BB78     		ldrb	r3, [r7, #2]	@ zero_extendqisi2
 975 0018 1046     		mov	r0, r2
 976 001a 1946     		mov	r1, r3
 977 001c 0022     		movs	r2, #0
 978 001e FFF7FEFF 		bl	USB_DCI_Validate_Param
 979 0022 0346     		mov	r3, r0
 980 0024 BB75     		strb	r3, [r7, #22]
 752:../Generated_Code/usb_dci_kinetis.c ****         USB_RAM_EVEN_BUFFER);
 753:../Generated_Code/usb_dci_kinetis.c ****     uint_8 bdtelem_index = (uint_8)TRANSFER_INDEX(bdt_index);
 981              		.loc 1 753 0
 982 0026 BB7D     		ldrb	r3, [r7, #22]	@ zero_extendqisi2
 983 0028 5B08     		lsrs	r3, r3, #1
 984 002a 7B75     		strb	r3, [r7, #21]
 754:../Generated_Code/usb_dci_kinetis.c ****     UNUSED(handle);
 755:../Generated_Code/usb_dci_kinetis.c **** 
 756:../Generated_Code/usb_dci_kinetis.c ****     /* Check for valid bdt index */
 757:../Generated_Code/usb_dci_kinetis.c ****     if(bdt_index != INVALID_BDT_INDEX)
 985              		.loc 1 757 0
 986 002c BB7D     		ldrb	r3, [r7, #22]	@ zero_extendqisi2
 987 002e FF2B     		cmp	r3, #255
 988 0030 2FD0     		beq	.L39
 989              	.LBB2:
 758:../Generated_Code/usb_dci_kinetis.c ****     {
 759:../Generated_Code/usb_dci_kinetis.c ****         P_BDT_ELEM bdt_elem = &g_bdt_elem[bdtelem_index];
 990              		.loc 1 759 0
 991 0032 7A7D     		ldrb	r2, [r7, #21]	@ zero_extendqisi2
 992 0034 1346     		mov	r3, r2
 993 0036 DB00     		lsls	r3, r3, #3
 994 0038 1344     		add	r3, r3, r2
 995 003a 5B00     		lsls	r3, r3, #1
 996 003c 174A     		ldr	r2, .L41
 997 003e 1344     		add	r3, r3, r2
 998 0040 3B61     		str	r3, [r7, #16]
 760:../Generated_Code/usb_dci_kinetis.c ****         P_BUFF_DSC buffer_dsc = &g_bdtmap->ep_dsc[bdt_elem->bdtmap_index];
 999              		.loc 1 760 0
 1000 0042 174B     		ldr	r3, .L41+4
 1001 0044 1A68     		ldr	r2, [r3]
 1002 0046 3B69     		ldr	r3, [r7, #16]
 1003 0048 DB7B     		ldrb	r3, [r3, #15]	@ zero_extendqisi2
 1004 004a DB00     		lsls	r3, r3, #3
 1005 004c 1344     		add	r3, r3, r2
 1006 004e FB60     		str	r3, [r7, #12]
 761:../Generated_Code/usb_dci_kinetis.c ****         P_BUFF_DSC buffer_dsc_alt = &g_bdtmap->ep_dsc[bdt_elem->bdtmap_index ^ 1];
 1007              		.loc 1 761 0
 1008 0050 134B     		ldr	r3, .L41+4
 1009 0052 1A68     		ldr	r2, [r3]
 1010 0054 3B69     		ldr	r3, [r7, #16]
 1011 0056 DB7B     		ldrb	r3, [r3, #15]	@ zero_extendqisi2
 1012 0058 83F00103 		eor	r3, r3, #1
 1013 005c DBB2     		uxtb	r3, r3
 1014 005e DB00     		lsls	r3, r3, #3
 1015 0060 1344     		add	r3, r3, r2
 1016 0062 BB60     		str	r3, [r7, #8]
 762:../Generated_Code/usb_dci_kinetis.c ****         /* Clear SIE Control Bit for both buffers*/
 763:../Generated_Code/usb_dci_kinetis.c ****         buffer_dsc->Stat._byte &= ~_SIE;
 1017              		.loc 1 763 0
 1018 0064 FB68     		ldr	r3, [r7, #12]
 1019 0066 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1020 0068 03F07F03 		and	r3, r3, #127
 1021 006c DAB2     		uxtb	r2, r3
 1022 006e FB68     		ldr	r3, [r7, #12]
 1023 0070 1A70     		strb	r2, [r3]
 764:../Generated_Code/usb_dci_kinetis.c ****         buffer_dsc_alt->Stat._byte &= ~_SIE;
 1024              		.loc 1 764 0
 1025 0072 BB68     		ldr	r3, [r7, #8]
 1026 0074 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1027 0076 03F07F03 		and	r3, r3, #127
 1028 007a DAB2     		uxtb	r2, r3
 1029 007c BB68     		ldr	r3, [r7, #8]
 1030 007e 1A70     		strb	r2, [r3]
 765:../Generated_Code/usb_dci_kinetis.c ****         bdt_elem->app_len = (USB_PACKET_SIZE)UNINITIALISED_VAL;
 1031              		.loc 1 765 0
 1032 0080 3B69     		ldr	r3, [r7, #16]
 1033 0082 4FF0FF32 		mov	r2, #-1
 1034 0086 9A72     		strb	r2, [r3, #10]
 1035 0088 4FF0FF32 		mov	r2, #-1
 1036 008c DA72     		strb	r2, [r3, #11]
 766:../Generated_Code/usb_dci_kinetis.c **** 
 767:../Generated_Code/usb_dci_kinetis.c ****         status = USB_OK;
 1037              		.loc 1 767 0
 1038 008e 0023     		movs	r3, #0
 1039 0090 FB75     		strb	r3, [r7, #23]
 1040              	.L39:
 1041              	.LBE2:
 768:../Generated_Code/usb_dci_kinetis.c ****     }
 769:../Generated_Code/usb_dci_kinetis.c ****     return status;
 1042              		.loc 1 769 0
 1043 0092 FB7D     		ldrb	r3, [r7, #23]	@ zero_extendqisi2
 770:../Generated_Code/usb_dci_kinetis.c **** #else
 771:../Generated_Code/usb_dci_kinetis.c ****     return USBERR_NOT_SUPPORTED;
 772:../Generated_Code/usb_dci_kinetis.c **** #endif
 773:../Generated_Code/usb_dci_kinetis.c **** #else	// HIGH_SPEED_DEVICE
 774:../Generated_Code/usb_dci_kinetis.c **** #ifdef USART_DEBUG
 775:../Generated_Code/usb_dci_kinetis.c ****     printf("%s\n", __func__);
 776:../Generated_Code/usb_dci_kinetis.c **** #endif
 777:../Generated_Code/usb_dci_kinetis.c ****     return USBERR_NOT_SUPPORTED;
 778:../Generated_Code/usb_dci_kinetis.c **** #endif
 779:../Generated_Code/usb_dci_kinetis.c **** }
 1044              		.loc 1 779 0
 1045 0094 1846     		mov	r0, r3
 1046 0096 1837     		adds	r7, r7, #24
 1047 0098 BD46     		mov	sp, r7
 1048              		@ sp needed
 1049 009a 80BD     		pop	{r7, pc}
 1050              	.L42:
 1051              		.align	2
 1052              	.L41:
 1053 009c 00000000 		.word	g_bdt_elem
 1054 00a0 00000000 		.word	g_bdtmap
 1055              		.cfi_endproc
 1056              	.LFE7:
 1058              		.section	.text.USB_DCI_Deinit_EndPoint,"ax",%progbits
 1059              		.align	2
 1060              		.global	USB_DCI_Deinit_EndPoint
 1061              		.thumb
 1062              		.thumb_func
 1064              	USB_DCI_Deinit_EndPoint:
 1065              	.LFB8:
 780:../Generated_Code/usb_dci_kinetis.c **** 
 781:../Generated_Code/usb_dci_kinetis.c **** /**************************************************************************//*!
 782:../Generated_Code/usb_dci_kinetis.c ****  *
 783:../Generated_Code/usb_dci_kinetis.c ****  * @name  USB_DCI_Deinit_EndPoint
 784:../Generated_Code/usb_dci_kinetis.c ****  *
 785:../Generated_Code/usb_dci_kinetis.c ****  * @brief The function de initializes an endpoint
 786:../Generated_Code/usb_dci_kinetis.c ****  *
 787:../Generated_Code/usb_dci_kinetis.c ****  * @param controller_ID : Controller ID
 788:../Generated_Code/usb_dci_kinetis.c ****  * @param ep_num        : Endpoint number
 789:../Generated_Code/usb_dci_kinetis.c ****  * @param direction     : Endpoint direction
 790:../Generated_Code/usb_dci_kinetis.c ****  *
 791:../Generated_Code/usb_dci_kinetis.c ****  * @return status
 792:../Generated_Code/usb_dci_kinetis.c ****  *         USB_OK                   : When successfull
 793:../Generated_Code/usb_dci_kinetis.c ****  *         USBERR_EP_DEINIT_FAILED  : When unsuccessfull
 794:../Generated_Code/usb_dci_kinetis.c ****  ******************************************************************************
 795:../Generated_Code/usb_dci_kinetis.c ****  *
 796:../Generated_Code/usb_dci_kinetis.c ****  * This function un-intializes the endpoint by clearing the corresponding
 797:../Generated_Code/usb_dci_kinetis.c ****  * endpoint control register and then clearing the bdt elem.
 798:../Generated_Code/usb_dci_kinetis.c ****  *
 799:../Generated_Code/usb_dci_kinetis.c ****  *****************************************************************************/
 800:../Generated_Code/usb_dci_kinetis.c **** uint_8 USB_DCI_Deinit_EndPoint (
 801:../Generated_Code/usb_dci_kinetis.c ****     uint_8    controller_ID,   /* [IN] Controller ID */
 802:../Generated_Code/usb_dci_kinetis.c ****     uint_8    ep_num,          /* [IN] Endpoint number */
 803:../Generated_Code/usb_dci_kinetis.c ****     uint_8    direction        /* [IN] Endpoint direction */
 804:../Generated_Code/usb_dci_kinetis.c **** )
 805:../Generated_Code/usb_dci_kinetis.c **** {
 1066              		.loc 1 805 0
 1067              		.cfi_startproc
 1068              		@ args = 0, pretend = 0, frame = 16
 1069              		@ frame_needed = 1, uses_anonymous_args = 0
 1070 0000 80B5     		push	{r7, lr}
 1071              		.cfi_def_cfa_offset 8
 1072              		.cfi_offset 7, -8
 1073              		.cfi_offset 14, -4
 1074 0002 84B0     		sub	sp, sp, #16
 1075              		.cfi_def_cfa_offset 24
 1076 0004 00AF     		add	r7, sp, #0
 1077              		.cfi_def_cfa_register 7
 1078 0006 1346     		mov	r3, r2
 1079 0008 0246     		mov	r2, r0
 1080 000a FA71     		strb	r2, [r7, #7]
 1081 000c 0A46     		mov	r2, r1
 1082 000e BA71     		strb	r2, [r7, #6]
 1083 0010 7B71     		strb	r3, [r7, #5]
 806:../Generated_Code/usb_dci_kinetis.c **** #if !HIGH_SPEED_DEVICE
 807:../Generated_Code/usb_dci_kinetis.c ****     /* validate params and get the bdt index */
 808:../Generated_Code/usb_dci_kinetis.c ****     uint_8 bdt_index = USB_DCI_Validate_Param (ep_num, direction,
 1084              		.loc 1 808 0
 1085 0012 BA79     		ldrb	r2, [r7, #6]	@ zero_extendqisi2
 1086 0014 7B79     		ldrb	r3, [r7, #5]	@ zero_extendqisi2
 1087 0016 1046     		mov	r0, r2
 1088 0018 1946     		mov	r1, r3
 1089 001a 0022     		movs	r2, #0
 1090 001c FFF7FEFF 		bl	USB_DCI_Validate_Param
 1091 0020 0346     		mov	r3, r0
 1092 0022 FB73     		strb	r3, [r7, #15]
 809:../Generated_Code/usb_dci_kinetis.c ****         USB_RAM_EVEN_BUFFER);
 810:../Generated_Code/usb_dci_kinetis.c ****     uint_8 bdtelem_index = (uint_8)TRANSFER_INDEX(bdt_index);
 1093              		.loc 1 810 0
 1094 0024 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 1095 0026 5B08     		lsrs	r3, r3, #1
 1096 0028 BB73     		strb	r3, [r7, #14]
 811:../Generated_Code/usb_dci_kinetis.c **** 
 812:../Generated_Code/usb_dci_kinetis.c ****     /* in case the bdt_index is invalid*/
 813:../Generated_Code/usb_dci_kinetis.c ****     if(bdt_index  == INVALID_BDT_INDEX)
 1097              		.loc 1 813 0
 1098 002a FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 1099 002c FF2B     		cmp	r3, #255
 1100 002e 01D1     		bne	.L44
 814:../Generated_Code/usb_dci_kinetis.c ****     {
 815:../Generated_Code/usb_dci_kinetis.c ****         return USBERR_EP_DEINIT_FAILED;
 1101              		.loc 1 815 0
 1102 0030 9623     		movs	r3, #150
 1103 0032 33E0     		b	.L45
 1104              	.L44:
 816:../Generated_Code/usb_dci_kinetis.c ****     }
 817:../Generated_Code/usb_dci_kinetis.c ****     USB_DCI_Cancel_Transfer(&controller_ID, ep_num, direction);
 1105              		.loc 1 817 0
 1106 0034 F91D     		adds	r1, r7, #7
 1107 0036 BA79     		ldrb	r2, [r7, #6]	@ zero_extendqisi2
 1108 0038 7B79     		ldrb	r3, [r7, #5]	@ zero_extendqisi2
 1109 003a 0846     		mov	r0, r1
 1110 003c 1146     		mov	r1, r2
 1111 003e 1A46     		mov	r2, r3
 1112 0040 FFF7FEFF 		bl	_usb_device_cancel_transfer
 818:../Generated_Code/usb_dci_kinetis.c ****     /* delete buffer space for both even and odd buffers */
 819:../Generated_Code/usb_dci_kinetis.c ****     g_bdt_address -= (g_bdt_elem[bdtelem_index].len);
 1113              		.loc 1 819 0
 1114 0044 174B     		ldr	r3, .L46
 1115 0046 1968     		ldr	r1, [r3]
 1116 0048 BA7B     		ldrb	r2, [r7, #14]	@ zero_extendqisi2
 1117 004a 1748     		ldr	r0, .L46+4
 1118 004c 1346     		mov	r3, r2
 1119 004e DB00     		lsls	r3, r3, #3
 1120 0050 1344     		add	r3, r3, r2
 1121 0052 5B00     		lsls	r3, r3, #1
 1122 0054 0344     		add	r3, r3, r0
 1123 0056 1B88     		ldrh	r3, [r3]
 1124 0058 CA1A     		subs	r2, r1, r3
 1125 005a 124B     		ldr	r3, .L46
 1126 005c 1A60     		str	r2, [r3]
 820:../Generated_Code/usb_dci_kinetis.c **** 
 821:../Generated_Code/usb_dci_kinetis.c ****     /* Disable endpoint */
 822:../Generated_Code/usb_dci_kinetis.c ****     *((&USB0_ENDPT0) + (4 * ep_num)) = EP_DISABLE;
 1127              		.loc 1 822 0
 1128 005e BB79     		ldrb	r3, [r7, #6]	@ zero_extendqisi2
 1129 0060 9B00     		lsls	r3, r3, #2
 1130 0062 1A46     		mov	r2, r3
 1131 0064 114B     		ldr	r3, .L46+8
 1132 0066 1344     		add	r3, r3, r2
 1133 0068 0022     		movs	r2, #0
 1134 006a 1A70     		strb	r2, [r3]
 823:../Generated_Code/usb_dci_kinetis.c **** 
 824:../Generated_Code/usb_dci_kinetis.c ****     /* un-initialize the bdt_elem structure for this endpoint */
 825:../Generated_Code/usb_dci_kinetis.c ****     g_bdt_elem[bdtelem_index].len = (uint_16)UNINITIALISED_VAL;
 1135              		.loc 1 825 0
 1136 006c BA7B     		ldrb	r2, [r7, #14]	@ zero_extendqisi2
 1137 006e 0E49     		ldr	r1, .L46+4
 1138 0070 1346     		mov	r3, r2
 1139 0072 DB00     		lsls	r3, r3, #3
 1140 0074 1344     		add	r3, r3, r2
 1141 0076 5B00     		lsls	r3, r3, #1
 1142 0078 0B44     		add	r3, r3, r1
 1143 007a 4FF6FF72 		movw	r2, #65535
 1144 007e 1A80     		strh	r2, [r3]	@ movhi
 826:../Generated_Code/usb_dci_kinetis.c ****     g_bdt_elem[bdtelem_index].addr = (uint_32)UNINITIALISED_VAL;
 1145              		.loc 1 826 0
 1146 0080 BA7B     		ldrb	r2, [r7, #14]	@ zero_extendqisi2
 1147 0082 0949     		ldr	r1, .L46+4
 1148 0084 1346     		mov	r3, r2
 1149 0086 DB00     		lsls	r3, r3, #3
 1150 0088 1344     		add	r3, r3, r2
 1151 008a 5B00     		lsls	r3, r3, #1
 1152 008c 0B44     		add	r3, r3, r1
 1153 008e 4FF0FF32 		mov	r2, #-1
 1154 0092 5A80     		strh	r2, [r3, #2]	@ movhi
 1155 0094 4FF0FF32 		mov	r2, #-1
 1156 0098 9A80     		strh	r2, [r3, #4]	@ movhi
 827:../Generated_Code/usb_dci_kinetis.c **** #else	// HIGH SPEED
 828:../Generated_Code/usb_dci_kinetis.c ****     uint_32 reg;
 829:../Generated_Code/usb_dci_kinetis.c **** 
 830:../Generated_Code/usb_dci_kinetis.c ****     if(ep_num<1)
 831:../Generated_Code/usb_dci_kinetis.c ****     	return USB_INVALID;
 832:../Generated_Code/usb_dci_kinetis.c **** 
 833:../Generated_Code/usb_dci_kinetis.c ****     // clear qhd
 834:../Generated_Code/usb_dci_kinetis.c ****     dqh_setup_t *dqh_word = (dqh_setup_t*)usbd_get_dqh(controller_ID, ep_num, direction);
 835:../Generated_Code/usb_dci_kinetis.c ****     memset((void *)dqh_word, 0, SIZE_OF_QHD);
 836:../Generated_Code/usb_dci_kinetis.c **** 
 837:../Generated_Code/usb_dci_kinetis.c ****     // clear endpoint register
 838:../Generated_Code/usb_dci_kinetis.c ****     reg = USBHS_EPCR(ep_num-1);
 839:../Generated_Code/usb_dci_kinetis.c ****     USBHS_EPCR(ep_num-1) &= ~reg;
 840:../Generated_Code/usb_dci_kinetis.c **** 
 841:../Generated_Code/usb_dci_kinetis.c ****     // flush endpoint Tx(IN) buffer
 842:../Generated_Code/usb_dci_kinetis.c ****     if(direction)
 843:../Generated_Code/usb_dci_kinetis.c ****     	USBHS_EPFLUSH |= USBHS_EPFLUSH_FETB(ep_num-1);
 844:../Generated_Code/usb_dci_kinetis.c ****     // flush endpoint Rx(OUT) buffer
 845:../Generated_Code/usb_dci_kinetis.c ****     else
 846:../Generated_Code/usb_dci_kinetis.c ****     	USBHS_EPFLUSH |= USBHS_EPFLUSH_FERB(ep_num-1);
 847:../Generated_Code/usb_dci_kinetis.c **** #endif
 848:../Generated_Code/usb_dci_kinetis.c ****     return USB_OK;
 1157              		.loc 1 848 0
 1158 009a 0023     		movs	r3, #0
 1159              	.L45:
 849:../Generated_Code/usb_dci_kinetis.c **** }
 1160              		.loc 1 849 0
 1161 009c 1846     		mov	r0, r3
 1162 009e 1037     		adds	r7, r7, #16
 1163 00a0 BD46     		mov	sp, r7
 1164              		@ sp needed
 1165 00a2 80BD     		pop	{r7, pc}
 1166              	.L47:
 1167              		.align	2
 1168              	.L46:
 1169 00a4 00000000 		.word	g_bdt_address
 1170 00a8 00000000 		.word	g_bdt_elem
 1171 00ac C0200740 		.word	1074208960
 1172              		.cfi_endproc
 1173              	.LFE8:
 1175              		.section	.text._usb_device_stall_endpoint,"ax",%progbits
 1176              		.align	2
 1177              		.global	_usb_device_stall_endpoint
 1178              		.thumb
 1179              		.thumb_func
 1181              	_usb_device_stall_endpoint:
 1182              	.LFB9:
 850:../Generated_Code/usb_dci_kinetis.c **** 
 851:../Generated_Code/usb_dci_kinetis.c **** /**************************************************************************//*!
 852:../Generated_Code/usb_dci_kinetis.c ****  *
 853:../Generated_Code/usb_dci_kinetis.c ****  * @name  USB_DCI_Stall_EndPoint
 854:../Generated_Code/usb_dci_kinetis.c ****  *
 855:../Generated_Code/usb_dci_kinetis.c ****  * @brief The function stalls an endpoint
 856:../Generated_Code/usb_dci_kinetis.c ****  *
 857:../Generated_Code/usb_dci_kinetis.c ****  * @param handle          : USB Device handle
 858:../Generated_Code/usb_dci_kinetis.c ****  * @param endpoint_number : Endpoint number
 859:../Generated_Code/usb_dci_kinetis.c ****  * @param direction       : Endpoint direction
 860:../Generated_Code/usb_dci_kinetis.c ****  *
 861:../Generated_Code/usb_dci_kinetis.c ****  * @return None
 862:../Generated_Code/usb_dci_kinetis.c ****  *
 863:../Generated_Code/usb_dci_kinetis.c ****  ******************************************************************************
 864:../Generated_Code/usb_dci_kinetis.c ****  * This function stalls the endpoint by setting Endpoint BDT
 865:../Generated_Code/usb_dci_kinetis.c ****  *****************************************************************************/
 866:../Generated_Code/usb_dci_kinetis.c **** void USB_DCI_Stall_EndPoint (
 867:../Generated_Code/usb_dci_kinetis.c ****     _usb_device_handle    handle,             /* [IN] USB Device handle */
 868:../Generated_Code/usb_dci_kinetis.c ****     uint_8                endpoint_number,    /* [IN] Endpoint number to stall */
 869:../Generated_Code/usb_dci_kinetis.c ****     uint_8                direction           /* [IN] Direction to stall */
 870:../Generated_Code/usb_dci_kinetis.c **** )
 871:../Generated_Code/usb_dci_kinetis.c **** {
 1183              		.loc 1 871 0
 1184              		.cfi_startproc
 1185              		@ args = 0, pretend = 0, frame = 16
 1186              		@ frame_needed = 1, uses_anonymous_args = 0
 1187 0000 80B5     		push	{r7, lr}
 1188              		.cfi_def_cfa_offset 8
 1189              		.cfi_offset 7, -8
 1190              		.cfi_offset 14, -4
 1191 0002 84B0     		sub	sp, sp, #16
 1192              		.cfi_def_cfa_offset 24
 1193 0004 00AF     		add	r7, sp, #0
 1194              		.cfi_def_cfa_register 7
 1195 0006 7860     		str	r0, [r7, #4]
 1196 0008 1346     		mov	r3, r2
 1197 000a 0A46     		mov	r2, r1
 1198 000c FA70     		strb	r2, [r7, #3]
 1199 000e BB70     		strb	r3, [r7, #2]
 872:../Generated_Code/usb_dci_kinetis.c **** #if !HIGH_SPEED_DEVICE
 873:../Generated_Code/usb_dci_kinetis.c ****     /* validate params and get the bdt index */
 874:../Generated_Code/usb_dci_kinetis.c ****     uint_8 bdt_index = USB_DCI_Validate_Param (endpoint_number, direction,
 1200              		.loc 1 874 0
 1201 0010 FA78     		ldrb	r2, [r7, #3]	@ zero_extendqisi2
 1202 0012 BB78     		ldrb	r3, [r7, #2]	@ zero_extendqisi2
 1203 0014 1046     		mov	r0, r2
 1204 0016 1946     		mov	r1, r3
 1205 0018 0022     		movs	r2, #0
 1206 001a FFF7FEFF 		bl	USB_DCI_Validate_Param
 1207 001e 0346     		mov	r3, r0
 1208 0020 FB73     		strb	r3, [r7, #15]
 875:../Generated_Code/usb_dci_kinetis.c ****         USB_RAM_EVEN_BUFFER);
 876:../Generated_Code/usb_dci_kinetis.c **** 
 877:../Generated_Code/usb_dci_kinetis.c ****     P_BDT_ELEM bdt_elem = &g_bdt_elem[TRANSFER_INDEX(bdt_index)];
 1209              		.loc 1 877 0
 1210 0022 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 1211 0024 5B08     		lsrs	r3, r3, #1
 1212 0026 DBB2     		uxtb	r3, r3
 1213 0028 1A46     		mov	r2, r3
 1214 002a 1346     		mov	r3, r2
 1215 002c DB00     		lsls	r3, r3, #3
 1216 002e 1344     		add	r3, r3, r2
 1217 0030 5B00     		lsls	r3, r3, #1
 1218 0032 104A     		ldr	r2, .L51
 1219 0034 1344     		add	r3, r3, r2
 1220 0036 BB60     		str	r3, [r7, #8]
 878:../Generated_Code/usb_dci_kinetis.c ****     bdt_index = bdt_elem->bdtmap_index;
 1221              		.loc 1 878 0
 1222 0038 BB68     		ldr	r3, [r7, #8]
 1223 003a DB7B     		ldrb	r3, [r3, #15]
 1224 003c FB73     		strb	r3, [r7, #15]
 879:../Generated_Code/usb_dci_kinetis.c **** 
 880:../Generated_Code/usb_dci_kinetis.c ****     /* Check for valid bdt index */
 881:../Generated_Code/usb_dci_kinetis.c **** 	if(bdt_index != INVALID_BDT_INDEX)
 1225              		.loc 1 881 0
 1226 003e FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 1227 0040 FF2B     		cmp	r3, #255
 1228 0042 13D0     		beq	.L49
 882:../Generated_Code/usb_dci_kinetis.c ****     {
 883:../Generated_Code/usb_dci_kinetis.c ****         (void)USB_DCI_Cancel_Transfer(handle, endpoint_number, direction);
 1229              		.loc 1 883 0
 1230 0044 FA78     		ldrb	r2, [r7, #3]	@ zero_extendqisi2
 1231 0046 BB78     		ldrb	r3, [r7, #2]	@ zero_extendqisi2
 1232 0048 7868     		ldr	r0, [r7, #4]
 1233 004a 1146     		mov	r1, r2
 1234 004c 1A46     		mov	r2, r3
 1235 004e FFF7FEFF 		bl	_usb_device_cancel_transfer
 884:../Generated_Code/usb_dci_kinetis.c **** 
 885:../Generated_Code/usb_dci_kinetis.c ****         /* Stall endpoint */
 886:../Generated_Code/usb_dci_kinetis.c ****         g_bdtmap->ep_dsc[bdt_index].Stat._byte |= (_SIE | _BDTSTALL);
 1236              		.loc 1 886 0
 1237 0052 094B     		ldr	r3, .L51+4
 1238 0054 1B68     		ldr	r3, [r3]
 1239 0056 FA7B     		ldrb	r2, [r7, #15]	@ zero_extendqisi2
 1240 0058 0749     		ldr	r1, .L51+4
 1241 005a 0968     		ldr	r1, [r1]
 1242 005c F87B     		ldrb	r0, [r7, #15]	@ zero_extendqisi2
 1243 005e 11F83010 		ldrb	r1, [r1, r0, lsl #3]	@ zero_extendqisi2
 1244 0062 61F07B01 		orn	r1, r1, #123
 1245 0066 C9B2     		uxtb	r1, r1
 1246 0068 03F83210 		strb	r1, [r3, r2, lsl #3]
 1247              	.L49:
 887:../Generated_Code/usb_dci_kinetis.c ****     }
 888:../Generated_Code/usb_dci_kinetis.c **** #else	// HIGH SPEED
 889:../Generated_Code/usb_dci_kinetis.c **** 	// check if it is control endpoint
 890:../Generated_Code/usb_dci_kinetis.c **** 	if(endpoint_number == 0){
 891:../Generated_Code/usb_dci_kinetis.c **** 		// stall both directions
 892:../Generated_Code/usb_dci_kinetis.c **** 		USBHS_EPCR0 |= USBHS_EPCR0_TXS_MASK|USBHS_EPCR0_RXS_MASK;
 893:../Generated_Code/usb_dci_kinetis.c **** 	}else{
 894:../Generated_Code/usb_dci_kinetis.c **** 
 895:../Generated_Code/usb_dci_kinetis.c **** 		USBHS_EPCR(endpoint_number-1) |= direction?USBHS_EPCR0_TXS_MASK:USBHS_EPCR0_RXS_MASK;
 896:../Generated_Code/usb_dci_kinetis.c **** 	}
 897:../Generated_Code/usb_dci_kinetis.c **** #endif
 898:../Generated_Code/usb_dci_kinetis.c ****     return;
 1248              		.loc 1 898 0
 1249 006c 00BF     		nop
 899:../Generated_Code/usb_dci_kinetis.c **** }
 1250              		.loc 1 899 0
 1251 006e 1037     		adds	r7, r7, #16
 1252 0070 BD46     		mov	sp, r7
 1253              		@ sp needed
 1254 0072 80BD     		pop	{r7, pc}
 1255              	.L52:
 1256              		.align	2
 1257              	.L51:
 1258 0074 00000000 		.word	g_bdt_elem
 1259 0078 00000000 		.word	g_bdtmap
 1260              		.cfi_endproc
 1261              	.LFE9:
 1263              		.section	.text._usb_device_unstall_endpoint,"ax",%progbits
 1264              		.align	2
 1265              		.global	_usb_device_unstall_endpoint
 1266              		.thumb
 1267              		.thumb_func
 1269              	_usb_device_unstall_endpoint:
 1270              	.LFB10:
 900:../Generated_Code/usb_dci_kinetis.c **** 
 901:../Generated_Code/usb_dci_kinetis.c **** /**************************************************************************//*!
 902:../Generated_Code/usb_dci_kinetis.c ****  *
 903:../Generated_Code/usb_dci_kinetis.c ****  * @name  USB_DCI_Unstall_EndPoint
 904:../Generated_Code/usb_dci_kinetis.c ****  *
 905:../Generated_Code/usb_dci_kinetis.c ****  * @brief The function unstalls an endpoint
 906:../Generated_Code/usb_dci_kinetis.c ****  *
 907:../Generated_Code/usb_dci_kinetis.c ****  * @param handle          : USB Device handle
 908:../Generated_Code/usb_dci_kinetis.c ****  * @param endpoint_number : Endpoint number
 909:../Generated_Code/usb_dci_kinetis.c ****  * @param direction       : Endpoint direction
 910:../Generated_Code/usb_dci_kinetis.c ****  *
 911:../Generated_Code/usb_dci_kinetis.c ****  * @return None
 912:../Generated_Code/usb_dci_kinetis.c ****  *
 913:../Generated_Code/usb_dci_kinetis.c ****  ******************************************************************************
 914:../Generated_Code/usb_dci_kinetis.c ****  * This function unstalls the endpoint by clearing Endpoint Control Register
 915:../Generated_Code/usb_dci_kinetis.c ****  * and BDT
 916:../Generated_Code/usb_dci_kinetis.c ****  *****************************************************************************/
 917:../Generated_Code/usb_dci_kinetis.c **** void USB_DCI_Unstall_EndPoint (
 918:../Generated_Code/usb_dci_kinetis.c ****     _usb_device_handle     handle,             /* [IN] USB Device handle */
 919:../Generated_Code/usb_dci_kinetis.c ****     uint_8                 endpoint_number,    /* [IN] Endpoint number to unstall */
 920:../Generated_Code/usb_dci_kinetis.c ****     uint_8                 direction           /* [IN] Direction to unstall */
 921:../Generated_Code/usb_dci_kinetis.c **** )
 922:../Generated_Code/usb_dci_kinetis.c **** {
 1271              		.loc 1 922 0
 1272              		.cfi_startproc
 1273              		@ args = 0, pretend = 0, frame = 24
 1274              		@ frame_needed = 1, uses_anonymous_args = 0
 1275 0000 80B5     		push	{r7, lr}
 1276              		.cfi_def_cfa_offset 8
 1277              		.cfi_offset 7, -8
 1278              		.cfi_offset 14, -4
 1279 0002 86B0     		sub	sp, sp, #24
 1280              		.cfi_def_cfa_offset 32
 1281 0004 00AF     		add	r7, sp, #0
 1282              		.cfi_def_cfa_register 7
 1283 0006 7860     		str	r0, [r7, #4]
 1284 0008 1346     		mov	r3, r2
 1285 000a 0A46     		mov	r2, r1
 1286 000c FA70     		strb	r2, [r7, #3]
 1287 000e BB70     		strb	r3, [r7, #2]
 923:../Generated_Code/usb_dci_kinetis.c **** #if !HIGH_SPEED_DEVICE
 924:../Generated_Code/usb_dci_kinetis.c ****     /* validate params and get the bdt index */
 925:../Generated_Code/usb_dci_kinetis.c ****     uint_8 bdt_index = USB_DCI_Validate_Param (endpoint_number, direction,
 1288              		.loc 1 925 0
 1289 0010 FA78     		ldrb	r2, [r7, #3]	@ zero_extendqisi2
 1290 0012 BB78     		ldrb	r3, [r7, #2]	@ zero_extendqisi2
 1291 0014 1046     		mov	r0, r2
 1292 0016 1946     		mov	r1, r3
 1293 0018 0022     		movs	r2, #0
 1294 001a FFF7FEFF 		bl	USB_DCI_Validate_Param
 1295 001e 0346     		mov	r3, r0
 1296 0020 FB75     		strb	r3, [r7, #23]
 926:../Generated_Code/usb_dci_kinetis.c ****         USB_RAM_EVEN_BUFFER);
 927:../Generated_Code/usb_dci_kinetis.c **** 
 928:../Generated_Code/usb_dci_kinetis.c ****     P_BDT_ELEM bdt_elem = &g_bdt_elem[TRANSFER_INDEX(bdt_index)];
 1297              		.loc 1 928 0
 1298 0022 FB7D     		ldrb	r3, [r7, #23]	@ zero_extendqisi2
 1299 0024 5B08     		lsrs	r3, r3, #1
 1300 0026 DBB2     		uxtb	r3, r3
 1301 0028 1A46     		mov	r2, r3
 1302 002a 1346     		mov	r3, r2
 1303 002c DB00     		lsls	r3, r3, #3
 1304 002e 1344     		add	r3, r3, r2
 1305 0030 5B00     		lsls	r3, r3, #1
 1306 0032 294A     		ldr	r2, .L61
 1307 0034 1344     		add	r3, r3, r2
 1308 0036 3B61     		str	r3, [r7, #16]
 929:../Generated_Code/usb_dci_kinetis.c **** 
 930:../Generated_Code/usb_dci_kinetis.c ****     bdt_index = bdt_elem->bdtmap_index;
 1309              		.loc 1 930 0
 1310 0038 3B69     		ldr	r3, [r7, #16]
 1311 003a DB7B     		ldrb	r3, [r3, #15]
 1312 003c FB75     		strb	r3, [r7, #23]
 931:../Generated_Code/usb_dci_kinetis.c **** 
 932:../Generated_Code/usb_dci_kinetis.c ****     /* Check for valid bdt index */
 933:../Generated_Code/usb_dci_kinetis.c **** 	if(bdt_index != INVALID_BDT_INDEX)
 1313              		.loc 1 933 0
 1314 003e FB7D     		ldrb	r3, [r7, #23]	@ zero_extendqisi2
 1315 0040 FF2B     		cmp	r3, #255
 1316 0042 45D0     		beq	.L54
 1317              	.LBB3:
 934:../Generated_Code/usb_dci_kinetis.c **** 	{
 935:../Generated_Code/usb_dci_kinetis.c ****         ENDPT0STR *endpoint = (ENDPT0STR*)(&USB0_ENDPT0 + (4 * endpoint_number));
 1318              		.loc 1 935 0
 1319 0044 FB78     		ldrb	r3, [r7, #3]	@ zero_extendqisi2
 1320 0046 9B00     		lsls	r3, r3, #2
 1321 0048 1A46     		mov	r2, r3
 1322 004a 244B     		ldr	r3, .L61+4
 1323 004c 1344     		add	r3, r3, r2
 1324 004e FB60     		str	r3, [r7, #12]
 936:../Generated_Code/usb_dci_kinetis.c **** 
 937:../Generated_Code/usb_dci_kinetis.c **** 	    /* Enable ENDPTx for non control endpoints */
 938:../Generated_Code/usb_dci_kinetis.c **** 	    /* For Control Endpoint the default Value 0x0D */
 939:../Generated_Code/usb_dci_kinetis.c ****         if(endpoint_number != CONTROL_ENDPOINT)
 1325              		.loc 1 939 0
 1326 0050 FB78     		ldrb	r3, [r7, #3]	@ zero_extendqisi2
 1327 0052 002B     		cmp	r3, #0
 1328 0054 1AD0     		beq	.L55
 1329              	.LBB4:
 940:../Generated_Code/usb_dci_kinetis.c ****         {
 941:../Generated_Code/usb_dci_kinetis.c ****             uint_8 endpt;
 942:../Generated_Code/usb_dci_kinetis.c ****             /* Enable handshaking for non isochronous endpoint */
 943:../Generated_Code/usb_dci_kinetis.c ****             endpt = (uint_8)((bdt_elem->type != USB_ISOCHRONOUS_PIPE) ?
 1330              		.loc 1 943 0
 1331 0056 3B69     		ldr	r3, [r7, #16]
 1332 0058 5B7C     		ldrb	r3, [r3, #17]	@ zero_extendqisi2
 1333 005a 012B     		cmp	r3, #1
 1334 005c 01D0     		beq	.L56
 1335              		.loc 1 943 0 is_stmt 0 discriminator 1
 1336 005e 0123     		movs	r3, #1
 1337 0060 00E0     		b	.L57
 1338              	.L56:
 1339              		.loc 1 943 0 discriminator 2
 1340 0062 0023     		movs	r3, #0
 1341              	.L57:
 1342              		.loc 1 943 0 discriminator 3
 1343 0064 FB72     		strb	r3, [r7, #11]
 944:../Generated_Code/usb_dci_kinetis.c ****                 HSHK_EN:0);
 945:../Generated_Code/usb_dci_kinetis.c ****             /*
 946:../Generated_Code/usb_dci_kinetis.c ****                Enable the endpoint in the specified direction and disable
 947:../Generated_Code/usb_dci_kinetis.c ****                control tranfers (valid only in case the endpoint is
 948:../Generated_Code/usb_dci_kinetis.c ****                bidirectional)
 949:../Generated_Code/usb_dci_kinetis.c ****             */
 950:../Generated_Code/usb_dci_kinetis.c ****     	    endpt |= (uint_8)(EP_CTL_DIS |
 1344              		.loc 1 950 0 is_stmt 1 discriminator 3
 1345 0066 BB78     		ldrb	r3, [r7, #2]	@ zero_extendqisi2
 1346 0068 012B     		cmp	r3, #1
 1347 006a 01D1     		bne	.L58
 1348              		.loc 1 950 0 is_stmt 0 discriminator 1
 1349 006c 1423     		movs	r3, #20
 1350 006e 00E0     		b	.L59
 1351              	.L58:
 1352              		.loc 1 950 0 discriminator 2
 1353 0070 1823     		movs	r3, #24
 1354              	.L59:
 1355              		.loc 1 950 0 discriminator 3
 1356 0072 F97A     		ldrb	r1, [r7, #11]	@ zero_extendqisi2
 1357 0074 1A46     		mov	r2, r3
 1358 0076 0B46     		mov	r3, r1
 1359 0078 1343     		orrs	r3, r3, r2
 1360 007a DBB2     		uxtb	r3, r3
 1361 007c FB72     		strb	r3, [r7, #11]
 951:../Generated_Code/usb_dci_kinetis.c ****                 ((direction == USB_SEND)?EP_IN:EP_OUT));
 952:../Generated_Code/usb_dci_kinetis.c ****             endpoint->Byte |= endpt;
 1362              		.loc 1 952 0 is_stmt 1 discriminator 3
 1363 007e FB68     		ldr	r3, [r7, #12]
 1364 0080 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 1365 0082 FB7A     		ldrb	r3, [r7, #11]
 1366 0084 1343     		orrs	r3, r3, r2
 1367 0086 DAB2     		uxtb	r2, r3
 1368 0088 FB68     		ldr	r3, [r7, #12]
 1369 008a 1A70     		strb	r2, [r3]
 1370              	.L55:
 1371              	.LBE4:
 953:../Generated_Code/usb_dci_kinetis.c ****         }
 954:../Generated_Code/usb_dci_kinetis.c ****         /* Clear Endpoint Stall bit is endpoint control register */
 955:../Generated_Code/usb_dci_kinetis.c ****         endpoint->Bits.EP_STALL = 0;
 1372              		.loc 1 955 0
 1373 008c FA68     		ldr	r2, [r7, #12]
 1374 008e 1378     		ldrb	r3, [r2]
 1375 0090 6FF34103 		bfc	r3, #1, #1
 1376 0094 1370     		strb	r3, [r2]
 956:../Generated_Code/usb_dci_kinetis.c **** 
 957:../Generated_Code/usb_dci_kinetis.c **** 	    /* Unstall endpoint by clearing stall bit in BDT  */
 958:../Generated_Code/usb_dci_kinetis.c **** 	    g_bdtmap->ep_dsc[bdt_index].Stat._byte &= ~(_SIE | _BDTSTALL);
 1377              		.loc 1 958 0
 1378 0096 124B     		ldr	r3, .L61+8
 1379 0098 1B68     		ldr	r3, [r3]
 1380 009a FA7D     		ldrb	r2, [r7, #23]	@ zero_extendqisi2
 1381 009c 1049     		ldr	r1, .L61+8
 1382 009e 0968     		ldr	r1, [r1]
 1383 00a0 F87D     		ldrb	r0, [r7, #23]	@ zero_extendqisi2
 1384 00a2 11F83010 		ldrb	r1, [r1, r0, lsl #3]	@ zero_extendqisi2
 1385 00a6 01F07B01 		and	r1, r1, #123
 1386 00aa C9B2     		uxtb	r1, r1
 1387 00ac 03F83210 		strb	r1, [r3, r2, lsl #3]
 959:../Generated_Code/usb_dci_kinetis.c ****         /* We Require DATA0 PID to be zero on unstall */
 960:../Generated_Code/usb_dci_kinetis.c ****         g_bdtmap->ep_dsc[bdt_index].Stat._byte = _DATA0;
 1388              		.loc 1 960 0
 1389 00b0 0B4B     		ldr	r3, .L61+8
 1390 00b2 1B68     		ldr	r3, [r3]
 1391 00b4 FA7D     		ldrb	r2, [r7, #23]	@ zero_extendqisi2
 1392 00b6 0021     		movs	r1, #0
 1393 00b8 03F83210 		strb	r1, [r3, r2, lsl #3]
 961:../Generated_Code/usb_dci_kinetis.c **** 	    if(direction == USB_RECV)
 1394              		.loc 1 961 0
 1395 00bc BB78     		ldrb	r3, [r7, #2]	@ zero_extendqisi2
 1396 00be 002B     		cmp	r3, #0
 1397 00c0 06D1     		bne	.L54
 962:../Generated_Code/usb_dci_kinetis.c **** 	    {
 963:../Generated_Code/usb_dci_kinetis.c **** 	        /* Initiate Next receive Transfer */
 964:../Generated_Code/usb_dci_kinetis.c **** 	        USB_DCI_Recv_Data(handle, endpoint_number, NULL, 0);
 1398              		.loc 1 964 0
 1399 00c2 FB78     		ldrb	r3, [r7, #3]	@ zero_extendqisi2
 1400 00c4 7868     		ldr	r0, [r7, #4]
 1401 00c6 1946     		mov	r1, r3
 1402 00c8 0022     		movs	r2, #0
 1403 00ca 0023     		movs	r3, #0
 1404 00cc FFF7FEFF 		bl	_usb_device_recv_data
 1405              	.L54:
 1406              	.LBE3:
 965:../Generated_Code/usb_dci_kinetis.c **** 	    }
 966:../Generated_Code/usb_dci_kinetis.c ****     }
 967:../Generated_Code/usb_dci_kinetis.c **** #else
 968:../Generated_Code/usb_dci_kinetis.c **** 	// todo:
 969:../Generated_Code/usb_dci_kinetis.c **** 	// This function unstalls the endpoint by clearing Endpoint Control Register
 970:../Generated_Code/usb_dci_kinetis.c **** 	// and QH
 971:../Generated_Code/usb_dci_kinetis.c **** 	if(endpoint_number == 0){
 972:../Generated_Code/usb_dci_kinetis.c **** 			// unstall both directions
 973:../Generated_Code/usb_dci_kinetis.c **** 			USBHS_EPCR0 &= ~(direction ? USBHS_EPCR0_TXS_MASK:USBHS_EPCR0_RXS_MASK);
 974:../Generated_Code/usb_dci_kinetis.c **** 		}else{
 975:../Generated_Code/usb_dci_kinetis.c **** 			USBHS_EPCR(endpoint_number-1) &= ~(direction?USBHS_EPCR_TXS_MASK:USBHS_EPCR_RXS_MASK);
 976:../Generated_Code/usb_dci_kinetis.c **** 		}
 977:../Generated_Code/usb_dci_kinetis.c **** #ifdef USART_DEBUG
 978:../Generated_Code/usb_dci_kinetis.c **** 	printf("%s\n", __func__);
 979:../Generated_Code/usb_dci_kinetis.c **** #endif
 980:../Generated_Code/usb_dci_kinetis.c **** #endif
 981:../Generated_Code/usb_dci_kinetis.c ****     return;
 1407              		.loc 1 981 0
 1408 00d0 00BF     		nop
 982:../Generated_Code/usb_dci_kinetis.c **** }
 1409              		.loc 1 982 0
 1410 00d2 1837     		adds	r7, r7, #24
 1411 00d4 BD46     		mov	sp, r7
 1412              		@ sp needed
 1413 00d6 80BD     		pop	{r7, pc}
 1414              	.L62:
 1415              		.align	2
 1416              	.L61:
 1417 00d8 00000000 		.word	g_bdt_elem
 1418 00dc C0200740 		.word	1074208960
 1419 00e0 00000000 		.word	g_bdtmap
 1420              		.cfi_endproc
 1421              	.LFE10:
 1423              		.section	.text._usb_device_read_setup_data,"ax",%progbits
 1424              		.align	2
 1425              		.global	_usb_device_read_setup_data
 1426              		.thumb
 1427              		.thumb_func
 1429              	_usb_device_read_setup_data:
 1430              	.LFB11:
 983:../Generated_Code/usb_dci_kinetis.c **** 
 984:../Generated_Code/usb_dci_kinetis.c **** /**************************************************************************//*!
 985:../Generated_Code/usb_dci_kinetis.c ****  *
 986:../Generated_Code/usb_dci_kinetis.c ****  * @name  USB_DCI_Get_Setup_Data
 987:../Generated_Code/usb_dci_kinetis.c ****  *
 988:../Generated_Code/usb_dci_kinetis.c ****  * @brief The function copies Setup Packet from USB RAM to application buffer
 989:../Generated_Code/usb_dci_kinetis.c ****  *
 990:../Generated_Code/usb_dci_kinetis.c ****  * @param handle          : USB Device handle
 991:../Generated_Code/usb_dci_kinetis.c ****  * @param endpoint_number : Endpoint number
 992:../Generated_Code/usb_dci_kinetis.c ****  * @param buffer_ptr      : Application buffer pointer
 993:../Generated_Code/usb_dci_kinetis.c ****  *
 994:../Generated_Code/usb_dci_kinetis.c ****  * @return None
 995:../Generated_Code/usb_dci_kinetis.c ****  *
 996:../Generated_Code/usb_dci_kinetis.c ****  ******************************************************************************
 997:../Generated_Code/usb_dci_kinetis.c ****  * Copies setup packet from USB RAM to Application Buffer
 998:../Generated_Code/usb_dci_kinetis.c ****  *****************************************************************************/
 999:../Generated_Code/usb_dci_kinetis.c **** void USB_DCI_Get_Setup_Data (
1000:../Generated_Code/usb_dci_kinetis.c ****     _usb_device_handle    handle,             /* [IN] USB Device handle */
1001:../Generated_Code/usb_dci_kinetis.c ****     uint_8                endpoint_number,    /* [IN] Endpoint number for the transaction */
1002:../Generated_Code/usb_dci_kinetis.c ****     uint_8_ptr            buffer_ptr          /* [IN] Pointer to the buffer into which to read data
1003:../Generated_Code/usb_dci_kinetis.c **** )
1004:../Generated_Code/usb_dci_kinetis.c **** {
 1431              		.loc 1 1004 0
 1432              		.cfi_startproc
 1433              		@ args = 0, pretend = 0, frame = 32
 1434              		@ frame_needed = 1, uses_anonymous_args = 0
 1435 0000 80B5     		push	{r7, lr}
 1436              		.cfi_def_cfa_offset 8
 1437              		.cfi_offset 7, -8
 1438              		.cfi_offset 14, -4
 1439 0002 88B0     		sub	sp, sp, #32
 1440              		.cfi_def_cfa_offset 40
 1441 0004 00AF     		add	r7, sp, #0
 1442              		.cfi_def_cfa_register 7
 1443 0006 F860     		str	r0, [r7, #12]
 1444 0008 0B46     		mov	r3, r1
 1445 000a 7A60     		str	r2, [r7, #4]
 1446 000c FB72     		strb	r3, [r7, #11]
1005:../Generated_Code/usb_dci_kinetis.c **** 
1006:../Generated_Code/usb_dci_kinetis.c **** #if !HIGH_SPEED_DEVICE
1007:../Generated_Code/usb_dci_kinetis.c **** 	uint_8_ptr addr;
1008:../Generated_Code/usb_dci_kinetis.c ****     /* validate params and get the bdt index */
1009:../Generated_Code/usb_dci_kinetis.c ****     uint_8 bdt_index = USB_DCI_Validate_Param (endpoint_number, USB_RECV,
 1447              		.loc 1 1009 0
 1448 000e FB7A     		ldrb	r3, [r7, #11]	@ zero_extendqisi2
 1449 0010 1846     		mov	r0, r3
 1450 0012 0021     		movs	r1, #0
 1451 0014 0022     		movs	r2, #0
 1452 0016 FFF7FEFF 		bl	USB_DCI_Validate_Param
 1453 001a 0346     		mov	r3, r0
 1454 001c FB77     		strb	r3, [r7, #31]
1010:../Generated_Code/usb_dci_kinetis.c ****         USB_RAM_EVEN_BUFFER);
1011:../Generated_Code/usb_dci_kinetis.c **** 
1012:../Generated_Code/usb_dci_kinetis.c ****     P_BDT_ELEM bdt_elem = &g_bdt_elem[TRANSFER_INDEX(bdt_index)];
 1455              		.loc 1 1012 0
 1456 001e FB7F     		ldrb	r3, [r7, #31]	@ zero_extendqisi2
 1457 0020 5B08     		lsrs	r3, r3, #1
 1458 0022 DBB2     		uxtb	r3, r3
 1459 0024 1A46     		mov	r2, r3
 1460 0026 1346     		mov	r3, r2
 1461 0028 DB00     		lsls	r3, r3, #3
 1462 002a 1344     		add	r3, r3, r2
 1463 002c 5B00     		lsls	r3, r3, #1
 1464 002e 0B4A     		ldr	r2, .L65
 1465 0030 1344     		add	r3, r3, r2
 1466 0032 BB61     		str	r3, [r7, #24]
1013:../Generated_Code/usb_dci_kinetis.c ****     UNUSED(handle);
1014:../Generated_Code/usb_dci_kinetis.c ****     bdt_index = bdt_elem->bdtmap_index;
 1467              		.loc 1 1014 0
 1468 0034 BB69     		ldr	r3, [r7, #24]
 1469 0036 DB7B     		ldrb	r3, [r3, #15]
 1470 0038 FB77     		strb	r3, [r7, #31]
1015:../Generated_Code/usb_dci_kinetis.c **** 
1016:../Generated_Code/usb_dci_kinetis.c ****     /* address correponding to the endpoint */
1017:../Generated_Code/usb_dci_kinetis.c ****     addr = (uint_8_ptr)SWAP32(g_bdtmap->ep_dsc[bdt_index].addr);
 1471              		.loc 1 1017 0
 1472 003a 094B     		ldr	r3, .L65+4
 1473 003c 1A68     		ldr	r2, [r3]
 1474 003e FB7F     		ldrb	r3, [r7, #31]	@ zero_extendqisi2
 1475 0040 DB00     		lsls	r3, r3, #3
 1476 0042 1344     		add	r3, r3, r2
 1477 0044 5B68     		ldr	r3, [r3, #4]	@ unaligned
 1478 0046 7B61     		str	r3, [r7, #20]
1018:../Generated_Code/usb_dci_kinetis.c **** 
1019:../Generated_Code/usb_dci_kinetis.c ****     /* copy bdt buffer to application buffer */
1020:../Generated_Code/usb_dci_kinetis.c ****     (void)memcpy(buffer_ptr, addr, USB_SETUP_PKT_SIZE);
 1479              		.loc 1 1020 0
 1480 0048 7868     		ldr	r0, [r7, #4]
 1481 004a 7969     		ldr	r1, [r7, #20]
 1482 004c 0822     		movs	r2, #8
 1483 004e FFF7FEFF 		bl	memcpy
1021:../Generated_Code/usb_dci_kinetis.c ****     return;
 1484              		.loc 1 1021 0
 1485 0052 00BF     		nop
1022:../Generated_Code/usb_dci_kinetis.c **** #else	// HIGH SPEED
1023:../Generated_Code/usb_dci_kinetis.c **** #if USART_DEBUG
1024:../Generated_Code/usb_dci_kinetis.c ****     printf("%s\n", __func__);
1025:../Generated_Code/usb_dci_kinetis.c **** #endif /* USART_DEBUG */
1026:../Generated_Code/usb_dci_kinetis.c **** #endif
1027:../Generated_Code/usb_dci_kinetis.c **** }
 1486              		.loc 1 1027 0
 1487 0054 2037     		adds	r7, r7, #32
 1488 0056 BD46     		mov	sp, r7
 1489              		@ sp needed
 1490 0058 80BD     		pop	{r7, pc}
 1491              	.L66:
 1492 005a 00BF     		.align	2
 1493              	.L65:
 1494 005c 00000000 		.word	g_bdt_elem
 1495 0060 00000000 		.word	g_bdtmap
 1496              		.cfi_endproc
 1497              	.LFE11:
 1499              		.section	.text._usb_device_get_transfer_status,"ax",%progbits
 1500              		.align	2
 1501              		.global	_usb_device_get_transfer_status
 1502              		.thumb
 1503              		.thumb_func
 1505              	_usb_device_get_transfer_status:
 1506              	.LFB12:
1028:../Generated_Code/usb_dci_kinetis.c **** 
1029:../Generated_Code/usb_dci_kinetis.c **** /**************************************************************************//*!
1030:../Generated_Code/usb_dci_kinetis.c ****  *
1031:../Generated_Code/usb_dci_kinetis.c ****  * @name  USB_DCI_Get_Transfer_Status
1032:../Generated_Code/usb_dci_kinetis.c ****  *
1033:../Generated_Code/usb_dci_kinetis.c ****  * @brief The function retrieves the Transfer status of an endpoint
1034:../Generated_Code/usb_dci_kinetis.c ****  *
1035:../Generated_Code/usb_dci_kinetis.c ****  * @param handle          : USB Device handle
1036:../Generated_Code/usb_dci_kinetis.c ****  * @param endpoint_number : Endpoint number
1037:../Generated_Code/usb_dci_kinetis.c ****  * @param direction       : Endpoint direction
1038:../Generated_Code/usb_dci_kinetis.c ****  *
1039:../Generated_Code/usb_dci_kinetis.c ****  * @return status
1040:../Generated_Code/usb_dci_kinetis.c ****  *         USBERR_TR_FAILED                : When unsuccessful
1041:../Generated_Code/usb_dci_kinetis.c ****  *         USB_STATUS_IDLE                 : No transfer on endpoint
1042:../Generated_Code/usb_dci_kinetis.c ****  *         USB_STATUS_DISABLED             : endpoint is disabled
1043:../Generated_Code/usb_dci_kinetis.c ****  *         USB_STATUS_STALLED              : endpoint is stalled
1044:../Generated_Code/usb_dci_kinetis.c ****  *         USB_STATUS_TRANSFER_IN_PROGRESS : When SIE has control of BDT
1045:../Generated_Code/usb_dci_kinetis.c ****  ******************************************************************************
1046:../Generated_Code/usb_dci_kinetis.c ****  *
1047:../Generated_Code/usb_dci_kinetis.c ****  * This function retrieves the transfer status of the endpoint by checking the
1048:../Generated_Code/usb_dci_kinetis.c ****  * BDT as well as the endpoint control register
1049:../Generated_Code/usb_dci_kinetis.c ****  *
1050:../Generated_Code/usb_dci_kinetis.c ****  *****************************************************************************/
1051:../Generated_Code/usb_dci_kinetis.c **** uint_8 USB_DCI_Get_Transfer_Status (
1052:../Generated_Code/usb_dci_kinetis.c ****     _usb_device_handle    handle,             /* [IN] USB Device handle */
1053:../Generated_Code/usb_dci_kinetis.c ****     uint_8                endpoint_number,    /* [IN] Endpoint number */
1054:../Generated_Code/usb_dci_kinetis.c ****     uint_8                direction           /* [IN] Endpoint direction */
1055:../Generated_Code/usb_dci_kinetis.c **** )
1056:../Generated_Code/usb_dci_kinetis.c **** {
 1507              		.loc 1 1056 0
 1508              		.cfi_startproc
 1509              		@ args = 0, pretend = 0, frame = 16
 1510              		@ frame_needed = 1, uses_anonymous_args = 0
 1511 0000 80B5     		push	{r7, lr}
 1512              		.cfi_def_cfa_offset 8
 1513              		.cfi_offset 7, -8
 1514              		.cfi_offset 14, -4
 1515 0002 84B0     		sub	sp, sp, #16
 1516              		.cfi_def_cfa_offset 24
 1517 0004 00AF     		add	r7, sp, #0
 1518              		.cfi_def_cfa_register 7
 1519 0006 7860     		str	r0, [r7, #4]
 1520 0008 1346     		mov	r3, r2
 1521 000a 0A46     		mov	r2, r1
 1522 000c FA70     		strb	r2, [r7, #3]
 1523 000e BB70     		strb	r3, [r7, #2]
1057:../Generated_Code/usb_dci_kinetis.c ****     uint_8 status = USB_STATUS_DISABLED;
 1524              		.loc 1 1057 0
 1525 0010 0523     		movs	r3, #5
 1526 0012 FB73     		strb	r3, [r7, #15]
1058:../Generated_Code/usb_dci_kinetis.c **** 
1059:../Generated_Code/usb_dci_kinetis.c **** #if !HIGH_SPEED_DEVICE
1060:../Generated_Code/usb_dci_kinetis.c ****     /* validate params and get the bdt index */
1061:../Generated_Code/usb_dci_kinetis.c ****     uint_8 bdt_index = USB_DCI_Validate_Param (endpoint_number, direction,
 1527              		.loc 1 1061 0
 1528 0014 FA78     		ldrb	r2, [r7, #3]	@ zero_extendqisi2
 1529 0016 BB78     		ldrb	r3, [r7, #2]	@ zero_extendqisi2
 1530 0018 1046     		mov	r0, r2
 1531 001a 1946     		mov	r1, r3
 1532 001c 0022     		movs	r2, #0
 1533 001e FFF7FEFF 		bl	USB_DCI_Validate_Param
 1534 0022 0346     		mov	r3, r0
 1535 0024 BB73     		strb	r3, [r7, #14]
1062:../Generated_Code/usb_dci_kinetis.c ****         USB_RAM_EVEN_BUFFER);
1063:../Generated_Code/usb_dci_kinetis.c ****     UNUSED(handle);
1064:../Generated_Code/usb_dci_kinetis.c **** 
1065:../Generated_Code/usb_dci_kinetis.c ****     /* Check for valid bdt index */
1066:../Generated_Code/usb_dci_kinetis.c **** 	if(bdt_index != INVALID_BDT_INDEX)
 1536              		.loc 1 1066 0
 1537 0026 BB7B     		ldrb	r3, [r7, #14]	@ zero_extendqisi2
 1538 0028 FF2B     		cmp	r3, #255
 1539 002a 31D0     		beq	.L68
 1540              	.LBB5:
1067:../Generated_Code/usb_dci_kinetis.c ****     {
1068:../Generated_Code/usb_dci_kinetis.c ****         uint_8 ep_control = (uint_8)(*((&USB0_ENDPT0)+4*endpoint_number));
 1541              		.loc 1 1068 0
 1542 002c FB78     		ldrb	r3, [r7, #3]	@ zero_extendqisi2
 1543 002e 9B00     		lsls	r3, r3, #2
 1544 0030 1A46     		mov	r2, r3
 1545 0032 1A4B     		ldr	r3, .L73
 1546 0034 1344     		add	r3, r3, r2
 1547 0036 1B78     		ldrb	r3, [r3]
 1548 0038 7B73     		strb	r3, [r7, #13]
1069:../Generated_Code/usb_dci_kinetis.c **** 
1070:../Generated_Code/usb_dci_kinetis.c ****         status = USB_STATUS_IDLE;
 1549              		.loc 1 1070 0
 1550 003a 0023     		movs	r3, #0
 1551 003c FB73     		strb	r3, [r7, #15]
1071:../Generated_Code/usb_dci_kinetis.c **** 
1072:../Generated_Code/usb_dci_kinetis.c ****         /* Check for direction in endpoint control register */
1073:../Generated_Code/usb_dci_kinetis.c ****         if((ep_control & (EP_IN|EP_OUT)) == EP_DISABLE)
 1552              		.loc 1 1073 0
 1553 003e 7B7B     		ldrb	r3, [r7, #13]	@ zero_extendqisi2
 1554 0040 03F00C03 		and	r3, r3, #12
 1555 0044 002B     		cmp	r3, #0
 1556 0046 02D1     		bne	.L69
1074:../Generated_Code/usb_dci_kinetis.c ****         {
1075:../Generated_Code/usb_dci_kinetis.c ****             status = USB_STATUS_DISABLED;
 1557              		.loc 1 1075 0
 1558 0048 0523     		movs	r3, #5
 1559 004a FB73     		strb	r3, [r7, #15]
 1560 004c 20E0     		b	.L68
 1561              	.L69:
1076:../Generated_Code/usb_dci_kinetis.c ****         }
1077:../Generated_Code/usb_dci_kinetis.c ****         /* Check for stall bit in endpoint control register */
1078:../Generated_Code/usb_dci_kinetis.c ****         else if ((ep_control &  EPCTL_STALL) == EPCTL_STALL)
 1562              		.loc 1 1078 0
 1563 004e 7B7B     		ldrb	r3, [r7, #13]	@ zero_extendqisi2
 1564 0050 03F00203 		and	r3, r3, #2
 1565 0054 002B     		cmp	r3, #0
 1566 0056 02D0     		beq	.L70
1079:../Generated_Code/usb_dci_kinetis.c ****         {
1080:../Generated_Code/usb_dci_kinetis.c ****             status = USB_STATUS_STALLED ;
 1567              		.loc 1 1080 0
 1568 0058 0123     		movs	r3, #1
 1569 005a FB73     		strb	r3, [r7, #15]
 1570 005c 18E0     		b	.L68
 1571              	.L70:
1081:../Generated_Code/usb_dci_kinetis.c ****         }
1082:../Generated_Code/usb_dci_kinetis.c ****         /* Check whether SIE has control of BDT */
1083:../Generated_Code/usb_dci_kinetis.c ****         else if ((g_bdtmap->ep_dsc[bdt_index].Stat.SieCtlBit.own == 1)
 1572              		.loc 1 1083 0
 1573 005e 104B     		ldr	r3, .L73+4
 1574 0060 1B68     		ldr	r3, [r3]
 1575 0062 BA7B     		ldrb	r2, [r7, #14]	@ zero_extendqisi2
 1576 0064 13F83230 		ldrb	r3, [r3, r2, lsl #3]
 1577 0068 C3F3C013 		ubfx	r3, r3, #7, #1
 1578 006c DBB2     		uxtb	r3, r3
 1579 006e 012B     		cmp	r3, #1
 1580 0070 0CD0     		beq	.L71
1084:../Generated_Code/usb_dci_kinetis.c ****             || (g_bdtmap->ep_dsc[bdt_index ^ 1].Stat.SieCtlBit.own == 1))
 1581              		.loc 1 1084 0
 1582 0072 0B4B     		ldr	r3, .L73+4
 1583 0074 1B68     		ldr	r3, [r3]
 1584 0076 BA7B     		ldrb	r2, [r7, #14]
 1585 0078 82F00102 		eor	r2, r2, #1
 1586 007c D2B2     		uxtb	r2, r2
 1587 007e 13F83230 		ldrb	r3, [r3, r2, lsl #3]
 1588 0082 C3F3C013 		ubfx	r3, r3, #7, #1
 1589 0086 DBB2     		uxtb	r3, r3
 1590 0088 012B     		cmp	r3, #1
 1591 008a 01D1     		bne	.L68
 1592              	.L71:
1085:../Generated_Code/usb_dci_kinetis.c ****         {
1086:../Generated_Code/usb_dci_kinetis.c ****             status = USB_STATUS_TRANSFER_IN_PROGRESS;
 1593              		.loc 1 1086 0
 1594 008c 0323     		movs	r3, #3
 1595 008e FB73     		strb	r3, [r7, #15]
 1596              	.L68:
 1597              	.LBE5:
1087:../Generated_Code/usb_dci_kinetis.c ****         }
1088:../Generated_Code/usb_dci_kinetis.c ****     }
1089:../Generated_Code/usb_dci_kinetis.c **** #else
1090:../Generated_Code/usb_dci_kinetis.c **** #if USART_DEBUG
1091:../Generated_Code/usb_dci_kinetis.c ****     printf("%s, ep_num is %d\n", __func__, endpoint_number);
1092:../Generated_Code/usb_dci_kinetis.c **** #endif /* USART_DEBUG */
1093:../Generated_Code/usb_dci_kinetis.c ****     status = USB_OK;
1094:../Generated_Code/usb_dci_kinetis.c **** #endif /* HIGH_SPEED_DEVICE */
1095:../Generated_Code/usb_dci_kinetis.c ****     return status;
 1598              		.loc 1 1095 0
 1599 0090 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
1096:../Generated_Code/usb_dci_kinetis.c **** }
 1600              		.loc 1 1096 0
 1601 0092 1846     		mov	r0, r3
 1602 0094 1037     		adds	r7, r7, #16
 1603 0096 BD46     		mov	sp, r7
 1604              		@ sp needed
 1605 0098 80BD     		pop	{r7, pc}
 1606              	.L74:
 1607 009a 00BF     		.align	2
 1608              	.L73:
 1609 009c C0200740 		.word	1074208960
 1610 00a0 00000000 		.word	g_bdtmap
 1611              		.cfi_endproc
 1612              	.LFE12:
 1614              		.section	.text._usb_device_clear_data0_endpoint,"ax",%progbits
 1615              		.align	2
 1616              		.global	_usb_device_clear_data0_endpoint
 1617              		.thumb
 1618              		.thumb_func
 1620              	_usb_device_clear_data0_endpoint:
 1621              	.LFB13:
1097:../Generated_Code/usb_dci_kinetis.c **** 
1098:../Generated_Code/usb_dci_kinetis.c **** /**************************************************************************//*!
1099:../Generated_Code/usb_dci_kinetis.c ****  *
1100:../Generated_Code/usb_dci_kinetis.c ****  * @name  USB_DCI_Clear_DATA0_Endpoint
1101:../Generated_Code/usb_dci_kinetis.c ****  *
1102:../Generated_Code/usb_dci_kinetis.c ****  * @brief The function clear the DATA0/1 bit 
1103:../Generated_Code/usb_dci_kinetis.c ****  *
1104:../Generated_Code/usb_dci_kinetis.c ****  * @param handle          : USB Device handle
1105:../Generated_Code/usb_dci_kinetis.c ****  * @param endpoint_number : Endpoint number
1106:../Generated_Code/usb_dci_kinetis.c ****  * @param direction       : Endpoint direction
1107:../Generated_Code/usb_dci_kinetis.c ****  *
1108:../Generated_Code/usb_dci_kinetis.c ****  * @return None
1109:../Generated_Code/usb_dci_kinetis.c ****  *
1110:../Generated_Code/usb_dci_kinetis.c ****  ******************************************************************************
1111:../Generated_Code/usb_dci_kinetis.c ****  * This function clear the DATA0/1 bit 
1112:../Generated_Code/usb_dci_kinetis.c ****  *****************************************************************************/
1113:../Generated_Code/usb_dci_kinetis.c **** void  USB_DCI_Clear_DATA0_Endpoint (
1114:../Generated_Code/usb_dci_kinetis.c ****     uint_8                endpoint_number,    /* [IN] Endpoint number */
1115:../Generated_Code/usb_dci_kinetis.c ****     uint_8                direction           /* [IN] Endpoint direction */
1116:../Generated_Code/usb_dci_kinetis.c **** )
1117:../Generated_Code/usb_dci_kinetis.c **** {
 1622              		.loc 1 1117 0
 1623              		.cfi_startproc
 1624              		@ args = 0, pretend = 0, frame = 16
 1625              		@ frame_needed = 1, uses_anonymous_args = 0
 1626 0000 80B5     		push	{r7, lr}
 1627              		.cfi_def_cfa_offset 8
 1628              		.cfi_offset 7, -8
 1629              		.cfi_offset 14, -4
 1630 0002 84B0     		sub	sp, sp, #16
 1631              		.cfi_def_cfa_offset 24
 1632 0004 00AF     		add	r7, sp, #0
 1633              		.cfi_def_cfa_register 7
 1634 0006 0246     		mov	r2, r0
 1635 0008 0B46     		mov	r3, r1
 1636 000a FA71     		strb	r2, [r7, #7]
 1637 000c BB71     		strb	r3, [r7, #6]
1118:../Generated_Code/usb_dci_kinetis.c **** 	
1119:../Generated_Code/usb_dci_kinetis.c **** #if !HIGH_SPEED_DEVICE
1120:../Generated_Code/usb_dci_kinetis.c **** 	
1121:../Generated_Code/usb_dci_kinetis.c **** 	uint_8 bdt_index = USB_DCI_Validate_Param(endpoint_number, direction, USB_RAM_EVEN_BUFFER);	
 1638              		.loc 1 1121 0
 1639 000e FA79     		ldrb	r2, [r7, #7]	@ zero_extendqisi2
 1640 0010 BB79     		ldrb	r3, [r7, #6]	@ zero_extendqisi2
 1641 0012 1046     		mov	r0, r2
 1642 0014 1946     		mov	r1, r3
 1643 0016 0022     		movs	r2, #0
 1644 0018 FFF7FEFF 		bl	USB_DCI_Validate_Param
 1645 001c 0346     		mov	r3, r0
 1646 001e FB73     		strb	r3, [r7, #15]
1122:../Generated_Code/usb_dci_kinetis.c **** 	P_BDT_ELEM bdt_elem = &g_bdt_elem[TRANSFER_INDEX(bdt_index)];
 1647              		.loc 1 1122 0
 1648 0020 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 1649 0022 5B08     		lsrs	r3, r3, #1
 1650 0024 DBB2     		uxtb	r3, r3
 1651 0026 1A46     		mov	r2, r3
 1652 0028 1346     		mov	r3, r2
 1653 002a DB00     		lsls	r3, r3, #3
 1654 002c 1344     		add	r3, r3, r2
 1655 002e 5B00     		lsls	r3, r3, #1
 1656 0030 094A     		ldr	r2, .L78
 1657 0032 1344     		add	r3, r3, r2
 1658 0034 BB60     		str	r3, [r7, #8]
1123:../Generated_Code/usb_dci_kinetis.c **** 		
1124:../Generated_Code/usb_dci_kinetis.c **** 	bdt_index = bdt_elem->bdtmap_index;
 1659              		.loc 1 1124 0
 1660 0036 BB68     		ldr	r3, [r7, #8]
 1661 0038 DB7B     		ldrb	r3, [r3, #15]
 1662 003a FB73     		strb	r3, [r7, #15]
1125:../Generated_Code/usb_dci_kinetis.c **** 	
1126:../Generated_Code/usb_dci_kinetis.c **** 	/*Check for a valid bdt index */
1127:../Generated_Code/usb_dci_kinetis.c **** 	if (bdt_index != INVALID_BDT_INDEX)
 1663              		.loc 1 1127 0
 1664 003c FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 1665 003e FF2B     		cmp	r3, #255
 1666 0040 05D0     		beq	.L76
1128:../Generated_Code/usb_dci_kinetis.c **** 	{
1129:../Generated_Code/usb_dci_kinetis.c **** 		//ENDPT0STR *endpoint = (ENDPT0STR*)(&USB0_ENDPT0 + (4 * endpoint_number)); /* << EST not used */
1130:../Generated_Code/usb_dci_kinetis.c **** 		g_bdtmap->ep_dsc[bdt_index].Stat._byte = _DATA0;
 1667              		.loc 1 1130 0
 1668 0042 064B     		ldr	r3, .L78+4
 1669 0044 1B68     		ldr	r3, [r3]
 1670 0046 FA7B     		ldrb	r2, [r7, #15]	@ zero_extendqisi2
 1671 0048 0021     		movs	r1, #0
 1672 004a 03F83210 		strb	r1, [r3, r2, lsl #3]
 1673              	.L76:
1131:../Generated_Code/usb_dci_kinetis.c **** 	}
1132:../Generated_Code/usb_dci_kinetis.c ****     return;
 1674              		.loc 1 1132 0
 1675 004e 00BF     		nop
1133:../Generated_Code/usb_dci_kinetis.c **** #else	// HIGH SPEED
1134:../Generated_Code/usb_dci_kinetis.c **** #ifdef USART_DEBUG
1135:../Generated_Code/usb_dci_kinetis.c ****     printf("%s\n", __func__);
1136:../Generated_Code/usb_dci_kinetis.c **** #endif
1137:../Generated_Code/usb_dci_kinetis.c **** #endif
1138:../Generated_Code/usb_dci_kinetis.c **** }
 1676              		.loc 1 1138 0
 1677 0050 1037     		adds	r7, r7, #16
 1678 0052 BD46     		mov	sp, r7
 1679              		@ sp needed
 1680 0054 80BD     		pop	{r7, pc}
 1681              	.L79:
 1682 0056 00BF     		.align	2
 1683              	.L78:
 1684 0058 00000000 		.word	g_bdt_elem
 1685 005c 00000000 		.word	g_bdtmap
 1686              		.cfi_endproc
 1687              	.LFE13:
 1689              		.section	.text._usb_device_recv_data,"ax",%progbits
 1690              		.align	2
 1691              		.global	_usb_device_recv_data
 1692              		.thumb
 1693              		.thumb_func
 1695              	_usb_device_recv_data:
 1696              	.LFB14:
1139:../Generated_Code/usb_dci_kinetis.c **** 
1140:../Generated_Code/usb_dci_kinetis.c **** /**************************************************************************//*!
1141:../Generated_Code/usb_dci_kinetis.c ****  *
1142:../Generated_Code/usb_dci_kinetis.c ****  * @name  USB_DCI_Recv_Data
1143:../Generated_Code/usb_dci_kinetis.c ****  *
1144:../Generated_Code/usb_dci_kinetis.c ****  * @brief The function retrieves data received on an RECV endpoint
1145:../Generated_Code/usb_dci_kinetis.c ****  *
1146:../Generated_Code/usb_dci_kinetis.c ****  * @param handle          : USB Device handle
1147:../Generated_Code/usb_dci_kinetis.c ****  * @param endpoint_number : Endpoint number
1148:../Generated_Code/usb_dci_kinetis.c ****  * @param buffer_ptr      : Application buffer pointer
1149:../Generated_Code/usb_dci_kinetis.c ****  * @param size            : Size of the buffer
1150:../Generated_Code/usb_dci_kinetis.c ****  *
1151:../Generated_Code/usb_dci_kinetis.c ****  * @return status
1152:../Generated_Code/usb_dci_kinetis.c ****  *         USB_OK                          : When successful
1153:../Generated_Code/usb_dci_kinetis.c ****  *         USBERR_RX_FAILED                : When unsuccessful
1154:../Generated_Code/usb_dci_kinetis.c ****  ******************************************************************************
1155:../Generated_Code/usb_dci_kinetis.c ****  * This function retrieves data received data on a RECV endpoint by copying it
1156:../Generated_Code/usb_dci_kinetis.c ****  * from USB RAM to application buffer
1157:../Generated_Code/usb_dci_kinetis.c ****  *****************************************************************************/
1158:../Generated_Code/usb_dci_kinetis.c **** uint_8 USB_DCI_Recv_Data (
1159:../Generated_Code/usb_dci_kinetis.c ****     _usb_device_handle    handle,             /* [IN] USB Device handle */
1160:../Generated_Code/usb_dci_kinetis.c ****     uint_8                endpoint_number,    /* [IN] Endpoint number for the transaction */
1161:../Generated_Code/usb_dci_kinetis.c ****     uchar_ptr             buffer_ptr,         /* [OUT] Pointer to the buffer into which to receive 
1162:../Generated_Code/usb_dci_kinetis.c ****     uint_32               size                /* [IN] Number of bytes to receive */
1163:../Generated_Code/usb_dci_kinetis.c **** )
1164:../Generated_Code/usb_dci_kinetis.c **** {
 1697              		.loc 1 1164 0
 1698              		.cfi_startproc
 1699              		@ args = 0, pretend = 0, frame = 32
 1700              		@ frame_needed = 1, uses_anonymous_args = 0
 1701 0000 80B5     		push	{r7, lr}
 1702              		.cfi_def_cfa_offset 8
 1703              		.cfi_offset 7, -8
 1704              		.cfi_offset 14, -4
 1705 0002 88B0     		sub	sp, sp, #32
 1706              		.cfi_def_cfa_offset 40
 1707 0004 00AF     		add	r7, sp, #0
 1708              		.cfi_def_cfa_register 7
 1709 0006 F860     		str	r0, [r7, #12]
 1710 0008 7A60     		str	r2, [r7, #4]
 1711 000a 3B60     		str	r3, [r7]
 1712 000c 0B46     		mov	r3, r1
 1713 000e FB72     		strb	r3, [r7, #11]
1165:../Generated_Code/usb_dci_kinetis.c ****     uint_8 status = USBERR_RX_FAILED;
 1714              		.loc 1 1165 0
 1715 0010 9423     		movs	r3, #148
 1716 0012 FB77     		strb	r3, [r7, #31]
1166:../Generated_Code/usb_dci_kinetis.c **** #if !HIGH_SPEED_DEVICE
1167:../Generated_Code/usb_dci_kinetis.c **** 
1168:../Generated_Code/usb_dci_kinetis.c ****     /* validate params and get the bdt index */
1169:../Generated_Code/usb_dci_kinetis.c ****     uint_8 bdt_index = USB_DCI_Validate_Param (endpoint_number, USB_RECV, USB_RAM_EVEN_BUFFER);
 1717              		.loc 1 1169 0
 1718 0014 FB7A     		ldrb	r3, [r7, #11]	@ zero_extendqisi2
 1719 0016 1846     		mov	r0, r3
 1720 0018 0021     		movs	r1, #0
 1721 001a 0022     		movs	r2, #0
 1722 001c FFF7FEFF 		bl	USB_DCI_Validate_Param
 1723 0020 0346     		mov	r3, r0
 1724 0022 BB77     		strb	r3, [r7, #30]
1170:../Generated_Code/usb_dci_kinetis.c ****     P_BDT_ELEM bdt_elem = &g_bdt_elem[TRANSFER_INDEX(bdt_index)];
 1725              		.loc 1 1170 0
 1726 0024 BB7F     		ldrb	r3, [r7, #30]	@ zero_extendqisi2
 1727 0026 5B08     		lsrs	r3, r3, #1
 1728 0028 DBB2     		uxtb	r3, r3
 1729 002a 1A46     		mov	r2, r3
 1730 002c 1346     		mov	r3, r2
 1731 002e DB00     		lsls	r3, r3, #3
 1732 0030 1344     		add	r3, r3, r2
 1733 0032 5B00     		lsls	r3, r3, #1
 1734 0034 3E4A     		ldr	r2, .L85
 1735 0036 1344     		add	r3, r3, r2
 1736 0038 BB61     		str	r3, [r7, #24]
1171:../Generated_Code/usb_dci_kinetis.c **** 
1172:../Generated_Code/usb_dci_kinetis.c **** 	UNUSED(handle);
1173:../Generated_Code/usb_dci_kinetis.c **** 
1174:../Generated_Code/usb_dci_kinetis.c **** 	/* For selecting even/odd buffer */
1175:../Generated_Code/usb_dci_kinetis.c ****     bdt_index = bdt_elem->bdtmap_index;
 1737              		.loc 1 1175 0
 1738 003a BB69     		ldr	r3, [r7, #24]
 1739 003c DB7B     		ldrb	r3, [r3, #15]
 1740 003e BB77     		strb	r3, [r7, #30]
1176:../Generated_Code/usb_dci_kinetis.c **** 
1177:../Generated_Code/usb_dci_kinetis.c ****     if(bdt_index != INVALID_BDT_INDEX)
 1741              		.loc 1 1177 0
 1742 0040 BB7F     		ldrb	r3, [r7, #30]	@ zero_extendqisi2
 1743 0042 FF2B     		cmp	r3, #255
 1744 0044 6ED0     		beq	.L81
 1745              	.LBB6:
1178:../Generated_Code/usb_dci_kinetis.c ****     {
1179:../Generated_Code/usb_dci_kinetis.c ****         P_BUFF_DSC buffer_dsc = &g_bdtmap->ep_dsc[bdt_index ^ 1];
 1746              		.loc 1 1179 0
 1747 0046 3B4B     		ldr	r3, .L85+4
 1748 0048 1A68     		ldr	r2, [r3]
 1749 004a BB7F     		ldrb	r3, [r7, #30]
 1750 004c 83F00103 		eor	r3, r3, #1
 1751 0050 DBB2     		uxtb	r3, r3
 1752 0052 DB00     		lsls	r3, r3, #3
 1753 0054 1344     		add	r3, r3, r2
 1754 0056 7B61     		str	r3, [r7, #20]
1180:../Generated_Code/usb_dci_kinetis.c ****         P_BUFF_DSC buffer_dsc_alt = NULL;
 1755              		.loc 1 1180 0
 1756 0058 0023     		movs	r3, #0
 1757 005a 3B61     		str	r3, [r7, #16]
1181:../Generated_Code/usb_dci_kinetis.c **** 
1182:../Generated_Code/usb_dci_kinetis.c ****         /* Check for valid bdt index */
1183:../Generated_Code/usb_dci_kinetis.c ****         if(bdt_elem->len != (uint_16)UNINITIALISED_VAL)
 1758              		.loc 1 1183 0
 1759 005c BB69     		ldr	r3, [r7, #24]
 1760 005e 1B88     		ldrh	r3, [r3]	@ unaligned
 1761 0060 9AB2     		uxth	r2, r3
 1762 0062 4FF6FF73 		movw	r3, #65535
 1763 0066 9A42     		cmp	r2, r3
 1764 0068 5CD0     		beq	.L81
1184:../Generated_Code/usb_dci_kinetis.c ****         {
1185:../Generated_Code/usb_dci_kinetis.c ****             /* Does MCU owns it */
1186:../Generated_Code/usb_dci_kinetis.c ****             if(buffer_dsc->Stat.SieCtlBit.own == FALSE)
 1765              		.loc 1 1186 0
 1766 006a 7B69     		ldr	r3, [r7, #20]
 1767 006c 1B78     		ldrb	r3, [r3]
 1768 006e C3F3C013 		ubfx	r3, r3, #7, #1
 1769 0072 DBB2     		uxtb	r3, r3
 1770 0074 002B     		cmp	r3, #0
 1771 0076 55D1     		bne	.L81
1187:../Generated_Code/usb_dci_kinetis.c ****             {
1188:../Generated_Code/usb_dci_kinetis.c ****                 if(size == 0)
 1772              		.loc 1 1188 0
 1773 0078 3B68     		ldr	r3, [r7]
 1774 007a 002B     		cmp	r3, #0
 1775 007c 1ED1     		bne	.L82
1189:../Generated_Code/usb_dci_kinetis.c ****                 {
1190:../Generated_Code/usb_dci_kinetis.c ****                     /*
1191:../Generated_Code/usb_dci_kinetis.c ****                        Give control to the other buffer to recv the next
1192:../Generated_Code/usb_dci_kinetis.c ****                        packet
1193:../Generated_Code/usb_dci_kinetis.c ****                     */
1194:../Generated_Code/usb_dci_kinetis.c ****                     buffer_dsc_alt = &g_bdtmap->ep_dsc[bdt_index];
 1776              		.loc 1 1194 0
 1777 007e 2D4B     		ldr	r3, .L85+4
 1778 0080 1A68     		ldr	r2, [r3]
 1779 0082 BB7F     		ldrb	r3, [r7, #30]	@ zero_extendqisi2
 1780 0084 DB00     		lsls	r3, r3, #3
 1781 0086 1344     		add	r3, r3, r2
 1782 0088 3B61     		str	r3, [r7, #16]
1195:../Generated_Code/usb_dci_kinetis.c ****                     buffer_dsc_alt->cnt = SWAP16(bdt_elem->len);
 1783              		.loc 1 1195 0
 1784 008a BB69     		ldr	r3, [r7, #24]
 1785 008c 1B88     		ldrh	r3, [r3]	@ unaligned
 1786 008e 9AB2     		uxth	r2, r3
 1787 0090 3B69     		ldr	r3, [r7, #16]
 1788 0092 5A80     		strh	r2, [r3, #2]	@ unaligned
1196:../Generated_Code/usb_dci_kinetis.c ****                     buffer_dsc_alt->addr = SWAP32(bdt_elem->addr);
 1789              		.loc 1 1196 0
 1790 0094 BB69     		ldr	r3, [r7, #24]
 1791 0096 D3F80220 		ldr	r2, [r3, #2]	@ unaligned
 1792 009a 3B69     		ldr	r3, [r7, #16]
 1793 009c 5A60     		str	r2, [r3, #4]	@ unaligned
1197:../Generated_Code/usb_dci_kinetis.c **** 
1198:../Generated_Code/usb_dci_kinetis.c ****                     /* Give the ownership to SIE and TOGGLE DATA BIT */
1199:../Generated_Code/usb_dci_kinetis.c ****                     buffer_dsc_alt->Stat._byte = (uint_8)(
1200:../Generated_Code/usb_dci_kinetis.c ****                         (buffer_dsc_alt->Stat.McuCtlBit.data << 6) |
 1794              		.loc 1 1200 0
 1795 009e 3B69     		ldr	r3, [r7, #16]
 1796 00a0 1B78     		ldrb	r3, [r3]
 1797 00a2 C3F38013 		ubfx	r3, r3, #6, #1
 1798 00a6 DBB2     		uxtb	r3, r3
 1799 00a8 9B01     		lsls	r3, r3, #6
1199:../Generated_Code/usb_dci_kinetis.c ****                     buffer_dsc_alt->Stat._byte = (uint_8)(
 1800              		.loc 1 1199 0
 1801 00aa DBB2     		uxtb	r3, r3
 1802 00ac 63F07703 		orn	r3, r3, #119
 1803 00b0 DBB2     		uxtb	r3, r3
 1804 00b2 DAB2     		uxtb	r2, r3
 1805 00b4 3B69     		ldr	r3, [r7, #16]
 1806 00b6 1A70     		strb	r2, [r3]
1201:../Generated_Code/usb_dci_kinetis.c ****                         _SIE | _DTS);
1202:../Generated_Code/usb_dci_kinetis.c ****                     return USB_OK;
 1807              		.loc 1 1202 0
 1808 00b8 0023     		movs	r3, #0
 1809 00ba 34E0     		b	.L83
 1810              	.L82:
1203:../Generated_Code/usb_dci_kinetis.c ****                 }
1204:../Generated_Code/usb_dci_kinetis.c ****                 /* adjust size based on the input at the init endpoint */
1205:../Generated_Code/usb_dci_kinetis.c **** #ifdef LONG_RECEIVE_TRANSACTION
1206:../Generated_Code/usb_dci_kinetis.c ****                 /* Initialise transfer */
1207:../Generated_Code/usb_dci_kinetis.c ****                 bdt_elem->app_len = size;
 1811              		.loc 1 1207 0
 1812 00bc 3B68     		ldr	r3, [r7]
 1813 00be 9AB2     		uxth	r2, r3
 1814 00c0 BB69     		ldr	r3, [r7, #24]
 1815 00c2 5A81     		strh	r2, [r3, #10]	@ unaligned
1208:../Generated_Code/usb_dci_kinetis.c ****                 bdt_elem->app_buffer = buffer_ptr;
 1816              		.loc 1 1208 0
 1817 00c4 BB69     		ldr	r3, [r7, #24]
 1818 00c6 7A68     		ldr	r2, [r7, #4]
 1819 00c8 C3F80620 		str	r2, [r3, #6]	@ unaligned
1209:../Generated_Code/usb_dci_kinetis.c **** #endif
1210:../Generated_Code/usb_dci_kinetis.c ****                 if(size > bdt_elem->len)
 1820              		.loc 1 1210 0
 1821 00cc BB69     		ldr	r3, [r7, #24]
 1822 00ce 1B88     		ldrh	r3, [r3]	@ unaligned
 1823 00d0 9BB2     		uxth	r3, r3
 1824 00d2 1A46     		mov	r2, r3
 1825 00d4 3B68     		ldr	r3, [r7]
 1826 00d6 9A42     		cmp	r2, r3
 1827 00d8 03D2     		bcs	.L84
1211:../Generated_Code/usb_dci_kinetis.c ****                 {
1212:../Generated_Code/usb_dci_kinetis.c ****                     size = bdt_elem->len;
 1828              		.loc 1 1212 0
 1829 00da BB69     		ldr	r3, [r7, #24]
 1830 00dc 1B88     		ldrh	r3, [r3]	@ unaligned
 1831 00de 9BB2     		uxth	r3, r3
 1832 00e0 3B60     		str	r3, [r7]
 1833              	.L84:
1213:../Generated_Code/usb_dci_kinetis.c ****                 }
1214:../Generated_Code/usb_dci_kinetis.c **** 
1215:../Generated_Code/usb_dci_kinetis.c **** #ifdef LONG_RECEIVE_TRANSACTION
1216:../Generated_Code/usb_dci_kinetis.c ****                 bdt_elem->curr_offset = 0;
 1834              		.loc 1 1216 0
 1835 00e2 BB69     		ldr	r3, [r7, #24]
 1836 00e4 0022     		movs	r2, #0
 1837 00e6 1A73     		strb	r2, [r3, #12]
 1838 00e8 0022     		movs	r2, #0
 1839 00ea 5A73     		strb	r2, [r3, #13]
1217:../Generated_Code/usb_dci_kinetis.c **** #endif
1218:../Generated_Code/usb_dci_kinetis.c ****                 buffer_dsc_alt = &g_bdtmap->ep_dsc[bdt_index];
 1840              		.loc 1 1218 0
 1841 00ec 114B     		ldr	r3, .L85+4
 1842 00ee 1A68     		ldr	r2, [r3]
 1843 00f0 BB7F     		ldrb	r3, [r7, #30]	@ zero_extendqisi2
 1844 00f2 DB00     		lsls	r3, r3, #3
 1845 00f4 1344     		add	r3, r3, r2
 1846 00f6 3B61     		str	r3, [r7, #16]
1219:../Generated_Code/usb_dci_kinetis.c ****                 buffer_dsc_alt->cnt = SWAP16(size);
 1847              		.loc 1 1219 0
 1848 00f8 3B68     		ldr	r3, [r7]
 1849 00fa 9AB2     		uxth	r2, r3
 1850 00fc 3B69     		ldr	r3, [r7, #16]
 1851 00fe 5A80     		strh	r2, [r3, #2]	@ unaligned
1220:../Generated_Code/usb_dci_kinetis.c ****                 buffer_dsc_alt->addr = SWAP32((uint_32)buffer_ptr);
 1852              		.loc 1 1220 0
 1853 0100 7A68     		ldr	r2, [r7, #4]
 1854 0102 3B69     		ldr	r3, [r7, #16]
 1855 0104 5A60     		str	r2, [r3, #4]	@ unaligned
1221:../Generated_Code/usb_dci_kinetis.c ****                 buffer_dsc_alt->Stat._byte = (uint_8)(
1222:../Generated_Code/usb_dci_kinetis.c ****                     (buffer_dsc_alt->Stat.McuCtlBit.data << 6) |
 1856              		.loc 1 1222 0
 1857 0106 3B69     		ldr	r3, [r7, #16]
 1858 0108 1B78     		ldrb	r3, [r3]
 1859 010a C3F38013 		ubfx	r3, r3, #6, #1
 1860 010e DBB2     		uxtb	r3, r3
 1861 0110 9B01     		lsls	r3, r3, #6
1221:../Generated_Code/usb_dci_kinetis.c ****                 buffer_dsc_alt->Stat._byte = (uint_8)(
 1862              		.loc 1 1221 0
 1863 0112 DBB2     		uxtb	r3, r3
 1864 0114 63F07703 		orn	r3, r3, #119
 1865 0118 DBB2     		uxtb	r3, r3
 1866 011a DAB2     		uxtb	r2, r3
 1867 011c 3B69     		ldr	r3, [r7, #16]
 1868 011e 1A70     		strb	r2, [r3]
1223:../Generated_Code/usb_dci_kinetis.c ****                     _SIE | _DTS);
1224:../Generated_Code/usb_dci_kinetis.c ****                 status = USB_OK;
 1869              		.loc 1 1224 0
 1870 0120 0023     		movs	r3, #0
 1871 0122 FB77     		strb	r3, [r7, #31]
 1872              	.L81:
 1873              	.LBE6:
1225:../Generated_Code/usb_dci_kinetis.c ****             }
1226:../Generated_Code/usb_dci_kinetis.c ****         }
1227:../Generated_Code/usb_dci_kinetis.c ****     }
1228:../Generated_Code/usb_dci_kinetis.c ****     return status;
 1874              		.loc 1 1228 0
 1875 0124 FB7F     		ldrb	r3, [r7, #31]	@ zero_extendqisi2
 1876              	.L83:
1229:../Generated_Code/usb_dci_kinetis.c **** #else
1230:../Generated_Code/usb_dci_kinetis.c ****     if (endpoint_number != 0)
1231:../Generated_Code/usb_dci_kinetis.c ****     {
1232:../Generated_Code/usb_dci_kinetis.c ****     	status = usbd_receive_data_epxout(0, (unsigned int)buffer_ptr, endpoint_number, size);
1233:../Generated_Code/usb_dci_kinetis.c ****     }
1234:../Generated_Code/usb_dci_kinetis.c ****     else
1235:../Generated_Code/usb_dci_kinetis.c ****     	status = usbd_receive_data_ep0out(0, (unsigned int)buffer_ptr, size);
1236:../Generated_Code/usb_dci_kinetis.c **** 
1237:../Generated_Code/usb_dci_kinetis.c ****     if (status != USB_SUCCESS)
1238:../Generated_Code/usb_dci_kinetis.c ****     {
1239:../Generated_Code/usb_dci_kinetis.c ****     	return USBERR_RX_FAILED;
1240:../Generated_Code/usb_dci_kinetis.c ****     }
1241:../Generated_Code/usb_dci_kinetis.c ****     else
1242:../Generated_Code/usb_dci_kinetis.c ****     {
1243:../Generated_Code/usb_dci_kinetis.c ****     	return USB_OK;
1244:../Generated_Code/usb_dci_kinetis.c ****     }
1245:../Generated_Code/usb_dci_kinetis.c **** #endif
1246:../Generated_Code/usb_dci_kinetis.c **** }
 1877              		.loc 1 1246 0
 1878 0126 1846     		mov	r0, r3
 1879 0128 2037     		adds	r7, r7, #32
 1880 012a BD46     		mov	sp, r7
 1881              		@ sp needed
 1882 012c 80BD     		pop	{r7, pc}
 1883              	.L86:
 1884 012e 00BF     		.align	2
 1885              	.L85:
 1886 0130 00000000 		.word	g_bdt_elem
 1887 0134 00000000 		.word	g_bdtmap
 1888              		.cfi_endproc
 1889              	.LFE14:
 1891              		.section	.text._usb_device_send_data,"ax",%progbits
 1892              		.align	2
 1893              		.global	_usb_device_send_data
 1894              		.thumb
 1895              		.thumb_func
 1897              	_usb_device_send_data:
 1898              	.LFB15:
1247:../Generated_Code/usb_dci_kinetis.c **** 
1248:../Generated_Code/usb_dci_kinetis.c **** /**************************************************************************//*!
1249:../Generated_Code/usb_dci_kinetis.c ****  *
1250:../Generated_Code/usb_dci_kinetis.c ****  * @name  USB_DCI_Send_Data
1251:../Generated_Code/usb_dci_kinetis.c ****  *
1252:../Generated_Code/usb_dci_kinetis.c ****  * @brief The function configures Controller to send data on an SEND endpoint
1253:../Generated_Code/usb_dci_kinetis.c ****  *
1254:../Generated_Code/usb_dci_kinetis.c ****  * @param handle          : USB Device handle
1255:../Generated_Code/usb_dci_kinetis.c ****  * @param endpoint_number : Endpoint number
1256:../Generated_Code/usb_dci_kinetis.c ****  * @param buffer_ptr      : Application buffer pointer
1257:../Generated_Code/usb_dci_kinetis.c ****  * @param size            : Size of the buffer
1258:../Generated_Code/usb_dci_kinetis.c ****  *
1259:../Generated_Code/usb_dci_kinetis.c ****  * @return status
1260:../Generated_Code/usb_dci_kinetis.c ****  *         USB_OK           : When successfull
1261:../Generated_Code/usb_dci_kinetis.c ****  *         USBERR_TX_FAILED : When unsuccessfull
1262:../Generated_Code/usb_dci_kinetis.c ****  ******************************************************************************
1263:../Generated_Code/usb_dci_kinetis.c ****  * This function configures Controller to send data on a SEND endpoint by
1264:../Generated_Code/usb_dci_kinetis.c ****  * setting the BDT to send data.
1265:../Generated_Code/usb_dci_kinetis.c ****  *****************************************************************************/
1266:../Generated_Code/usb_dci_kinetis.c **** uint_8 USB_DCI_Send_Data (
1267:../Generated_Code/usb_dci_kinetis.c ****     _usb_device_handle    handle,             /* [IN] USB Device handle */
1268:../Generated_Code/usb_dci_kinetis.c ****     uint_8                endpoint_number,    /* [IN] Endpoint number */
1269:../Generated_Code/usb_dci_kinetis.c ****     uchar_ptr             buffer_ptr,         /* [IN] Application buffer pointer */
1270:../Generated_Code/usb_dci_kinetis.c ****     uint_32               size                /* [IN] Size of the buffer */
1271:../Generated_Code/usb_dci_kinetis.c **** )
1272:../Generated_Code/usb_dci_kinetis.c **** {
 1899              		.loc 1 1272 0
 1900              		.cfi_startproc
 1901              		@ args = 0, pretend = 0, frame = 32
 1902              		@ frame_needed = 1, uses_anonymous_args = 0
 1903 0000 80B5     		push	{r7, lr}
 1904              		.cfi_def_cfa_offset 8
 1905              		.cfi_offset 7, -8
 1906              		.cfi_offset 14, -4
 1907 0002 88B0     		sub	sp, sp, #32
 1908              		.cfi_def_cfa_offset 40
 1909 0004 00AF     		add	r7, sp, #0
 1910              		.cfi_def_cfa_register 7
 1911 0006 F860     		str	r0, [r7, #12]
 1912 0008 7A60     		str	r2, [r7, #4]
 1913 000a 3B60     		str	r3, [r7]
 1914 000c 0B46     		mov	r3, r1
 1915 000e FB72     		strb	r3, [r7, #11]
1273:../Generated_Code/usb_dci_kinetis.c **** #if !HIGH_SPEED_DEVICE
1274:../Generated_Code/usb_dci_kinetis.c ****     uint_8 status = USBERR_TX_FAILED;
 1916              		.loc 1 1274 0
 1917 0010 9323     		movs	r3, #147
 1918 0012 FB77     		strb	r3, [r7, #31]
1275:../Generated_Code/usb_dci_kinetis.c ****     P_BUFF_DSC buffer_dsc;
1276:../Generated_Code/usb_dci_kinetis.c **** 
1277:../Generated_Code/usb_dci_kinetis.c ****     /* validate params and get the bdt index */
1278:../Generated_Code/usb_dci_kinetis.c ****     uint_8 bdt_index = USB_DCI_Validate_Param (endpoint_number, USB_SEND, USB_RAM_EVEN_BUFFER);
 1919              		.loc 1 1278 0
 1920 0014 FB7A     		ldrb	r3, [r7, #11]	@ zero_extendqisi2
 1921 0016 1846     		mov	r0, r3
 1922 0018 0121     		movs	r1, #1
 1923 001a 0022     		movs	r2, #0
 1924 001c FFF7FEFF 		bl	USB_DCI_Validate_Param
 1925 0020 0346     		mov	r3, r0
 1926 0022 BB77     		strb	r3, [r7, #30]
1279:../Generated_Code/usb_dci_kinetis.c ****     P_BDT_ELEM bdt_elem = &g_bdt_elem[TRANSFER_INDEX(bdt_index)];
 1927              		.loc 1 1279 0
 1928 0024 BB7F     		ldrb	r3, [r7, #30]	@ zero_extendqisi2
 1929 0026 5B08     		lsrs	r3, r3, #1
 1930 0028 DBB2     		uxtb	r3, r3
 1931 002a 1A46     		mov	r2, r3
 1932 002c 1346     		mov	r3, r2
 1933 002e DB00     		lsls	r3, r3, #3
 1934 0030 1344     		add	r3, r3, r2
 1935 0032 5B00     		lsls	r3, r3, #1
 1936 0034 274A     		ldr	r2, .L93
 1937 0036 1344     		add	r3, r3, r2
 1938 0038 BB61     		str	r3, [r7, #24]
1280:../Generated_Code/usb_dci_kinetis.c **** 
1281:../Generated_Code/usb_dci_kinetis.c **** 	UNUSED(handle);
1282:../Generated_Code/usb_dci_kinetis.c **** 
1283:../Generated_Code/usb_dci_kinetis.c ****     if(bdt_index == INVALID_BDT_INDEX)
 1939              		.loc 1 1283 0
 1940 003a BB7F     		ldrb	r3, [r7, #30]	@ zero_extendqisi2
 1941 003c FF2B     		cmp	r3, #255
 1942 003e 01D1     		bne	.L88
1284:../Generated_Code/usb_dci_kinetis.c ****         return USBERR_TX_FAILED;
 1943              		.loc 1 1284 0
 1944 0040 9323     		movs	r3, #147
 1945 0042 42E0     		b	.L89
 1946              	.L88:
1285:../Generated_Code/usb_dci_kinetis.c **** 
1286:../Generated_Code/usb_dci_kinetis.c ****     /* Send Data After Toggling Buffer */
1287:../Generated_Code/usb_dci_kinetis.c ****     bdt_index = (uint_8)bdt_elem->bdtmap_index;
 1947              		.loc 1 1287 0
 1948 0044 BB69     		ldr	r3, [r7, #24]
 1949 0046 DB7B     		ldrb	r3, [r3, #15]
 1950 0048 BB77     		strb	r3, [r7, #30]
1288:../Generated_Code/usb_dci_kinetis.c **** 
1289:../Generated_Code/usb_dci_kinetis.c ****     buffer_dsc = &g_bdtmap->ep_dsc[bdt_index];
 1951              		.loc 1 1289 0
 1952 004a 234B     		ldr	r3, .L93+4
 1953 004c 1A68     		ldr	r2, [r3]
 1954 004e BB7F     		ldrb	r3, [r7, #30]	@ zero_extendqisi2
 1955 0050 DB00     		lsls	r3, r3, #3
 1956 0052 1344     		add	r3, r3, r2
 1957 0054 7B61     		str	r3, [r7, #20]
1290:../Generated_Code/usb_dci_kinetis.c **** 
1291:../Generated_Code/usb_dci_kinetis.c ****     /* Does MCU owns it and it is not stalled */
1292:../Generated_Code/usb_dci_kinetis.c ****     if(!((buffer_dsc->Stat.SieCtlBit.own) ||/* For MCU: own is 0 */
 1958              		.loc 1 1292 0
 1959 0056 7B69     		ldr	r3, [r7, #20]
 1960 0058 1B78     		ldrb	r3, [r3]
 1961 005a C3F3C013 		ubfx	r3, r3, #7, #1
 1962 005e DBB2     		uxtb	r3, r3
 1963 0060 002B     		cmp	r3, #0
 1964 0062 31D1     		bne	.L90
1293:../Generated_Code/usb_dci_kinetis.c ****        (*(&USB0_ENDPT0 + (endpoint_number * 4)) & ENDPT_EP_STALL_MASK)))
 1965              		.loc 1 1293 0 discriminator 1
 1966 0064 FB7A     		ldrb	r3, [r7, #11]	@ zero_extendqisi2
 1967 0066 9B00     		lsls	r3, r3, #2
 1968 0068 1A46     		mov	r2, r3
 1969 006a 1C4B     		ldr	r3, .L93+8
 1970 006c 1344     		add	r3, r3, r2
 1971 006e 1B78     		ldrb	r3, [r3]
 1972 0070 DBB2     		uxtb	r3, r3
 1973 0072 03F00203 		and	r3, r3, #2
1292:../Generated_Code/usb_dci_kinetis.c ****     if(!((buffer_dsc->Stat.SieCtlBit.own) ||/* For MCU: own is 0 */
 1974              		.loc 1 1292 0 discriminator 1
 1975 0076 002B     		cmp	r3, #0
 1976 0078 26D1     		bne	.L90
1294:../Generated_Code/usb_dci_kinetis.c ****     {
1295:../Generated_Code/usb_dci_kinetis.c ****         /* Now configure buffer_dsc->addr and buffer_dsc->cnt */
1296:../Generated_Code/usb_dci_kinetis.c **** #ifdef LONG_SEND_TRANSACTION
1297:../Generated_Code/usb_dci_kinetis.c ****         /* Initialize transfer */
1298:../Generated_Code/usb_dci_kinetis.c ****         bdt_elem->app_len = size;
 1977              		.loc 1 1298 0
 1978 007a 3B68     		ldr	r3, [r7]
 1979 007c 9AB2     		uxth	r2, r3
 1980 007e BB69     		ldr	r3, [r7, #24]
 1981 0080 5A81     		strh	r2, [r3, #10]	@ unaligned
1299:../Generated_Code/usb_dci_kinetis.c ****         bdt_elem->app_buffer = buffer_ptr;
 1982              		.loc 1 1299 0
 1983 0082 BB69     		ldr	r3, [r7, #24]
 1984 0084 7A68     		ldr	r2, [r7, #4]
 1985 0086 C3F80620 		str	r2, [r3, #6]	@ unaligned
1300:../Generated_Code/usb_dci_kinetis.c ****         bdt_elem->curr_offset = 0;
 1986              		.loc 1 1300 0
 1987 008a BB69     		ldr	r3, [r7, #24]
 1988 008c 0022     		movs	r2, #0
 1989 008e 1A73     		strb	r2, [r3, #12]
 1990 0090 0022     		movs	r2, #0
 1991 0092 5A73     		strb	r2, [r3, #13]
1301:../Generated_Code/usb_dci_kinetis.c **** 
1302:../Generated_Code/usb_dci_kinetis.c ****         /* Prepare for send */
1303:../Generated_Code/usb_dci_kinetis.c ****         USB_DCI_Prepare_Send_Data(buffer_dsc, bdt_elem);
 1992              		.loc 1 1303 0
 1993 0094 7869     		ldr	r0, [r7, #20]
 1994 0096 B969     		ldr	r1, [r7, #24]
 1995 0098 FFF7FEFF 		bl	USB_DCI_Prepare_Send_Data
1304:../Generated_Code/usb_dci_kinetis.c **** #else
1305:../Generated_Code/usb_dci_kinetis.c ****         buffer_dsc->addr = SWAP32(buffer_ptr);
1306:../Generated_Code/usb_dci_kinetis.c **** 
1307:../Generated_Code/usb_dci_kinetis.c ****         /* Adjust size based on the input at the init endpoint */
1308:../Generated_Code/usb_dci_kinetis.c ****         if((uint_16)size > bdt_elem->len)
1309:../Generated_Code/usb_dci_kinetis.c ****         {
1310:../Generated_Code/usb_dci_kinetis.c ****             buffer_dsc->cnt = SWAP16(bdt_elem->len);
1311:../Generated_Code/usb_dci_kinetis.c ****         }
1312:../Generated_Code/usb_dci_kinetis.c ****         else
1313:../Generated_Code/usb_dci_kinetis.c ****         {
1314:../Generated_Code/usb_dci_kinetis.c ****             buffer_dsc->cnt = SWAP16((uint_16)size);
1315:../Generated_Code/usb_dci_kinetis.c ****         }
1316:../Generated_Code/usb_dci_kinetis.c **** #endif
1317:../Generated_Code/usb_dci_kinetis.c ****         if(endpoint_number == CONTROL_ENDPOINT)
 1996              		.loc 1 1317 0
 1997 009c FB7A     		ldrb	r3, [r7, #11]	@ zero_extendqisi2
 1998 009e 002B     		cmp	r3, #0
 1999 00a0 03D1     		bne	.L91
1318:../Generated_Code/usb_dci_kinetis.c ****         {
1319:../Generated_Code/usb_dci_kinetis.c ****             /* Set up the control endpoint bdt for next packet */
1320:../Generated_Code/usb_dci_kinetis.c ****             buffer_dsc->Stat._byte = (_SIE | _DATA1 | _DTS);
 2000              		.loc 1 1320 0
 2001 00a2 7B69     		ldr	r3, [r7, #20]
 2002 00a4 C822     		movs	r2, #200
 2003 00a6 1A70     		strb	r2, [r3]
 2004 00a8 0CE0     		b	.L92
 2005              	.L91:
1321:../Generated_Code/usb_dci_kinetis.c ****         }
1322:../Generated_Code/usb_dci_kinetis.c ****         else
1323:../Generated_Code/usb_dci_kinetis.c ****         {
1324:../Generated_Code/usb_dci_kinetis.c ****             buffer_dsc->Stat._byte = (uint_8)(
1325:../Generated_Code/usb_dci_kinetis.c ****                 (buffer_dsc->Stat.McuCtlBit.data << 6) |
 2006              		.loc 1 1325 0
 2007 00aa 7B69     		ldr	r3, [r7, #20]
 2008 00ac 1B78     		ldrb	r3, [r3]
 2009 00ae C3F38013 		ubfx	r3, r3, #6, #1
 2010 00b2 DBB2     		uxtb	r3, r3
 2011 00b4 9B01     		lsls	r3, r3, #6
1324:../Generated_Code/usb_dci_kinetis.c ****             buffer_dsc->Stat._byte = (uint_8)(
 2012              		.loc 1 1324 0
 2013 00b6 DBB2     		uxtb	r3, r3
 2014 00b8 63F07703 		orn	r3, r3, #119
 2015 00bc DBB2     		uxtb	r3, r3
 2016 00be DAB2     		uxtb	r2, r3
 2017 00c0 7B69     		ldr	r3, [r7, #20]
 2018 00c2 1A70     		strb	r2, [r3]
 2019              	.L92:
1326:../Generated_Code/usb_dci_kinetis.c ****                 _SIE | _DTS);
1327:../Generated_Code/usb_dci_kinetis.c ****         }
1328:../Generated_Code/usb_dci_kinetis.c **** 
1329:../Generated_Code/usb_dci_kinetis.c ****         status = USB_OK;
 2020              		.loc 1 1329 0
 2021 00c4 0023     		movs	r3, #0
 2022 00c6 FB77     		strb	r3, [r7, #31]
 2023              	.L90:
1330:../Generated_Code/usb_dci_kinetis.c ****     } /* Does MCU own IN BDT */
1331:../Generated_Code/usb_dci_kinetis.c ****     return status;
 2024              		.loc 1 1331 0
 2025 00c8 FB7F     		ldrb	r3, [r7, #31]	@ zero_extendqisi2
 2026              	.L89:
1332:../Generated_Code/usb_dci_kinetis.c **** #else	// HIGH SPEED
1333:../Generated_Code/usb_dci_kinetis.c ****     usb_status_t status;
1334:../Generated_Code/usb_dci_kinetis.c **** 
1335:../Generated_Code/usb_dci_kinetis.c ****     if (endpoint_number != 0) {
1336:../Generated_Code/usb_dci_kinetis.c ****     	status = usbd_send_data_epxin(0, (unsigned int)buffer_ptr, endpoint_number, size);
1337:../Generated_Code/usb_dci_kinetis.c ****     }
1338:../Generated_Code/usb_dci_kinetis.c **** 
1339:../Generated_Code/usb_dci_kinetis.c ****     /* Send descriptor - Data Phase */
1340:../Generated_Code/usb_dci_kinetis.c ****     //zlt is false=>not zero length packet, send dev descriptor to host.
1341:../Generated_Code/usb_dci_kinetis.c ****     else
1342:../Generated_Code/usb_dci_kinetis.c ****     	status = usbd_send_data_ep0in(0, (unsigned int)buffer_ptr, size, 0);
1343:../Generated_Code/usb_dci_kinetis.c **** 
1344:../Generated_Code/usb_dci_kinetis.c ****     if (status != USB_SUCCESS)
1345:../Generated_Code/usb_dci_kinetis.c ****     	return USBERR_TX_FAILED;
1346:../Generated_Code/usb_dci_kinetis.c **** 
1347:../Generated_Code/usb_dci_kinetis.c ****     return USB_OK;
1348:../Generated_Code/usb_dci_kinetis.c **** #endif
1349:../Generated_Code/usb_dci_kinetis.c **** }
 2027              		.loc 1 1349 0
 2028 00ca 1846     		mov	r0, r3
 2029 00cc 2037     		adds	r7, r7, #32
 2030 00ce BD46     		mov	sp, r7
 2031              		@ sp needed
 2032 00d0 80BD     		pop	{r7, pc}
 2033              	.L94:
 2034 00d2 00BF     		.align	2
 2035              	.L93:
 2036 00d4 00000000 		.word	g_bdt_elem
 2037 00d8 00000000 		.word	g_bdtmap
 2038 00dc C0200740 		.word	1074208960
 2039              		.cfi_endproc
 2040              	.LFE15:
 2042              		.section	.text._usb_device_set_address,"ax",%progbits
 2043              		.align	2
 2044              		.global	_usb_device_set_address
 2045              		.thumb
 2046              		.thumb_func
 2048              	_usb_device_set_address:
 2049              	.LFB16:
1350:../Generated_Code/usb_dci_kinetis.c **** 
1351:../Generated_Code/usb_dci_kinetis.c **** /**************************************************************************//*!
1352:../Generated_Code/usb_dci_kinetis.c ****  *
1353:../Generated_Code/usb_dci_kinetis.c ****  * @name  USB_DCI_Set_Address
1354:../Generated_Code/usb_dci_kinetis.c ****  *
1355:../Generated_Code/usb_dci_kinetis.c ****  * @brief The function configures Controller to send data on an SEND endpoint
1356:../Generated_Code/usb_dci_kinetis.c ****  *
1357:../Generated_Code/usb_dci_kinetis.c ****  * @param handle  : USB Device handle
1358:../Generated_Code/usb_dci_kinetis.c ****  * @param address : Controller Address
1359:../Generated_Code/usb_dci_kinetis.c ****  *
1360:../Generated_Code/usb_dci_kinetis.c ****  * @return None
1361:../Generated_Code/usb_dci_kinetis.c ****  *
1362:../Generated_Code/usb_dci_kinetis.c ****  ******************************************************************************
1363:../Generated_Code/usb_dci_kinetis.c ****  * Assigns the Address to the Controller
1364:../Generated_Code/usb_dci_kinetis.c ****  *****************************************************************************/
1365:../Generated_Code/usb_dci_kinetis.c **** void  USB_DCI_Set_Address (
1366:../Generated_Code/usb_dci_kinetis.c ****     _usb_device_handle    handle,    /* [IN] USB Device handle */
1367:../Generated_Code/usb_dci_kinetis.c ****     uint_8                address    /* [IN] Address of the USB device */
1368:../Generated_Code/usb_dci_kinetis.c **** )
1369:../Generated_Code/usb_dci_kinetis.c **** {
 2050              		.loc 1 1369 0
 2051              		.cfi_startproc
 2052              		@ args = 0, pretend = 0, frame = 8
 2053              		@ frame_needed = 1, uses_anonymous_args = 0
 2054 0000 80B5     		push	{r7, lr}
 2055              		.cfi_def_cfa_offset 8
 2056              		.cfi_offset 7, -8
 2057              		.cfi_offset 14, -4
 2058 0002 82B0     		sub	sp, sp, #8
 2059              		.cfi_def_cfa_offset 16
 2060 0004 00AF     		add	r7, sp, #0
 2061              		.cfi_def_cfa_register 7
 2062 0006 7860     		str	r0, [r7, #4]
 2063 0008 0B46     		mov	r3, r1
 2064 000a FB70     		strb	r3, [r7, #3]
1370:../Generated_Code/usb_dci_kinetis.c **** 
1371:../Generated_Code/usb_dci_kinetis.c **** 	UNUSED(handle);
1372:../Generated_Code/usb_dci_kinetis.c **** 
1373:../Generated_Code/usb_dci_kinetis.c **** 	/* set the address */
1374:../Generated_Code/usb_dci_kinetis.c **** #if !HIGH_SPEED_DEVICE
1375:../Generated_Code/usb_dci_kinetis.c ****     USB0_ADDR = address;
 2065              		.loc 1 1375 0
 2066 000c 064B     		ldr	r3, .L97
 2067 000e FA78     		ldrb	r2, [r7, #3]
 2068 0010 83F89820 		strb	r2, [r3, #152]
1376:../Generated_Code/usb_dci_kinetis.c **** #else
1377:../Generated_Code/usb_dci_kinetis.c ****     USBHS_DEVICEADDR = USBHS_DEVICEADDR_USBADR(address);
1378:../Generated_Code/usb_dci_kinetis.c **** #endif
1379:../Generated_Code/usb_dci_kinetis.c **** 
1380:../Generated_Code/usb_dci_kinetis.c ****     _usb_device_set_status(&g_dci_controller_Id, USB_STATUS_DEVICE_STATE,
 2069              		.loc 1 1380 0
 2070 0014 0548     		ldr	r0, .L97+4
 2071 0016 0121     		movs	r1, #1
 2072 0018 0122     		movs	r2, #1
 2073 001a FFF7FEFF 		bl	_usb_device_set_status
1381:../Generated_Code/usb_dci_kinetis.c ****         USB_STATE_ADDRESS);
1382:../Generated_Code/usb_dci_kinetis.c ****     return;
 2074              		.loc 1 1382 0
 2075 001e 00BF     		nop
1383:../Generated_Code/usb_dci_kinetis.c **** }
 2076              		.loc 1 1383 0
 2077 0020 0837     		adds	r7, r7, #8
 2078 0022 BD46     		mov	sp, r7
 2079              		@ sp needed
 2080 0024 80BD     		pop	{r7, pc}
 2081              	.L98:
 2082 0026 00BF     		.align	2
 2083              	.L97:
 2084 0028 00200740 		.word	1074208768
 2085 002c 00000000 		.word	g_dci_controller_Id
 2086              		.cfi_endproc
 2087              	.LFE16:
 2089              		.section	.text._usb_device_shutdown,"ax",%progbits
 2090              		.align	2
 2091              		.global	_usb_device_shutdown
 2092              		.thumb
 2093              		.thumb_func
 2095              	_usb_device_shutdown:
 2096              	.LFB17:
1384:../Generated_Code/usb_dci_kinetis.c **** 
1385:../Generated_Code/usb_dci_kinetis.c **** /**************************************************************************//*!
1386:../Generated_Code/usb_dci_kinetis.c ****  *
1387:../Generated_Code/usb_dci_kinetis.c ****  * @name  USB_DCI_Shutdown
1388:../Generated_Code/usb_dci_kinetis.c ****  *
1389:../Generated_Code/usb_dci_kinetis.c ****  * @brief The function shuts down the controller
1390:../Generated_Code/usb_dci_kinetis.c ****  *
1391:../Generated_Code/usb_dci_kinetis.c ****  * @param handle : USB Device handle
1392:../Generated_Code/usb_dci_kinetis.c ****  *
1393:../Generated_Code/usb_dci_kinetis.c ****  * @return None
1394:../Generated_Code/usb_dci_kinetis.c ****  *
1395:../Generated_Code/usb_dci_kinetis.c ****  ******************************************************************************
1396:../Generated_Code/usb_dci_kinetis.c ****  * Resets USB Device Controller
1397:../Generated_Code/usb_dci_kinetis.c ****  *****************************************************************************/
1398:../Generated_Code/usb_dci_kinetis.c **** void USB_DCI_Shutdown (
1399:../Generated_Code/usb_dci_kinetis.c ****     _usb_device_handle    handle    /* [IN] USB Device handle */
1400:../Generated_Code/usb_dci_kinetis.c **** )
1401:../Generated_Code/usb_dci_kinetis.c **** {
 2097              		.loc 1 1401 0
 2098              		.cfi_startproc
 2099              		@ args = 0, pretend = 0, frame = 8
 2100              		@ frame_needed = 1, uses_anonymous_args = 0
 2101 0000 80B5     		push	{r7, lr}
 2102              		.cfi_def_cfa_offset 8
 2103              		.cfi_offset 7, -8
 2104              		.cfi_offset 14, -4
 2105 0002 82B0     		sub	sp, sp, #8
 2106              		.cfi_def_cfa_offset 16
 2107 0004 00AF     		add	r7, sp, #0
 2108              		.cfi_def_cfa_register 7
 2109 0006 7860     		str	r0, [r7, #4]
1402:../Generated_Code/usb_dci_kinetis.c **** 	UNUSED(handle);
1403:../Generated_Code/usb_dci_kinetis.c **** #if !HIGH_SPEED_DEVICE
1404:../Generated_Code/usb_dci_kinetis.c ****     /* Reset the Control Register */
1405:../Generated_Code/usb_dci_kinetis.c **** 	USB0_CTL = 0;
 2110              		.loc 1 1405 0
 2111 0008 084B     		ldr	r3, .L101
 2112 000a 0022     		movs	r2, #0
 2113 000c 83F89420 		strb	r2, [r3, #148]
1406:../Generated_Code/usb_dci_kinetis.c ****     /* Initiate Reset in the USB Control0 Register */
1407:../Generated_Code/usb_dci_kinetis.c ****   #ifndef OTG_BUILD
1408:../Generated_Code/usb_dci_kinetis.c **** 
1409:../Generated_Code/usb_dci_kinetis.c **** 	USB0_USBTRC0 = _USBRESET;
 2114              		.loc 1 1409 0
 2115 0010 064B     		ldr	r3, .L101
 2116 0012 8022     		movs	r2, #128
 2117 0014 83F80C21 		strb	r2, [r3, #268]
1410:../Generated_Code/usb_dci_kinetis.c ****   #endif
1411:../Generated_Code/usb_dci_kinetis.c **** 
1412:../Generated_Code/usb_dci_kinetis.c **** 	_usb_device_set_status(&g_dci_controller_Id, USB_STATUS_DEVICE_STATE,
 2118              		.loc 1 1412 0
 2119 0018 0548     		ldr	r0, .L101+4
 2120 001a 0121     		movs	r1, #1
 2121 001c FF22     		movs	r2, #255
 2122 001e FFF7FEFF 		bl	_usb_device_set_status
1413:../Generated_Code/usb_dci_kinetis.c ****         USB_STATE_UNKNOWN);
1414:../Generated_Code/usb_dci_kinetis.c ****     return;
 2123              		.loc 1 1414 0
 2124 0022 00BF     		nop
1415:../Generated_Code/usb_dci_kinetis.c **** #else
1416:../Generated_Code/usb_dci_kinetis.c **** #if USART_DEBUG
1417:../Generated_Code/usb_dci_kinetis.c ****     printf("%s\n", __func__);
1418:../Generated_Code/usb_dci_kinetis.c **** #endif /* USART_DEBUG */
1419:../Generated_Code/usb_dci_kinetis.c **** #endif
1420:../Generated_Code/usb_dci_kinetis.c **** }
 2125              		.loc 1 1420 0
 2126 0024 0837     		adds	r7, r7, #8
 2127 0026 BD46     		mov	sp, r7
 2128              		@ sp needed
 2129 0028 80BD     		pop	{r7, pc}
 2130              	.L102:
 2131 002a 00BF     		.align	2
 2132              	.L101:
 2133 002c 00200740 		.word	1074208768
 2134 0030 00000000 		.word	g_dci_controller_Id
 2135              		.cfi_endproc
 2136              	.LFE17:
 2138              		.section	.text._usb_device_assert_resume,"ax",%progbits
 2139              		.align	2
 2140              		.global	_usb_device_assert_resume
 2141              		.thumb
 2142              		.thumb_func
 2144              	_usb_device_assert_resume:
 2145              	.LFB18:
1421:../Generated_Code/usb_dci_kinetis.c **** 
1422:../Generated_Code/usb_dci_kinetis.c **** /**************************************************************************//*!
1423:../Generated_Code/usb_dci_kinetis.c ****  *
1424:../Generated_Code/usb_dci_kinetis.c ****  * @name  USB_DCI_Assert_Resume
1425:../Generated_Code/usb_dci_kinetis.c ****  *
1426:../Generated_Code/usb_dci_kinetis.c ****  * @brief The function makes the Controller start USB RESUME signaling
1427:../Generated_Code/usb_dci_kinetis.c ****  *
1428:../Generated_Code/usb_dci_kinetis.c ****  * @param handle : USB Device handle
1429:../Generated_Code/usb_dci_kinetis.c ****  *
1430:../Generated_Code/usb_dci_kinetis.c ****  * @return None
1431:../Generated_Code/usb_dci_kinetis.c ****  *
1432:../Generated_Code/usb_dci_kinetis.c ****  ******************************************************************************
1433:../Generated_Code/usb_dci_kinetis.c ****  *
1434:../Generated_Code/usb_dci_kinetis.c ****  * This function starts RESUME signalling and then stops it after some delay.
1435:../Generated_Code/usb_dci_kinetis.c ****  * In this delay make sure that COP is reset.
1436:../Generated_Code/usb_dci_kinetis.c ****  *
1437:../Generated_Code/usb_dci_kinetis.c ****  *****************************************************************************/
1438:../Generated_Code/usb_dci_kinetis.c **** void USB_DCI_Assert_Resume (
1439:../Generated_Code/usb_dci_kinetis.c ****     _usb_device_handle    handle    /* [IN] USB Device handle */
1440:../Generated_Code/usb_dci_kinetis.c **** )
1441:../Generated_Code/usb_dci_kinetis.c **** {
 2146              		.loc 1 1441 0
 2147              		.cfi_startproc
 2148              		@ args = 0, pretend = 0, frame = 16
 2149              		@ frame_needed = 1, uses_anonymous_args = 0
 2150 0000 80B5     		push	{r7, lr}
 2151              		.cfi_def_cfa_offset 8
 2152              		.cfi_offset 7, -8
 2153              		.cfi_offset 14, -4
 2154 0002 84B0     		sub	sp, sp, #16
 2155              		.cfi_def_cfa_offset 24
 2156 0004 00AF     		add	r7, sp, #0
 2157              		.cfi_def_cfa_register 7
 2158 0006 7860     		str	r0, [r7, #4]
1442:../Generated_Code/usb_dci_kinetis.c **** #if !HIGH_SPEED_DEVICE
1443:../Generated_Code/usb_dci_kinetis.c ****     uint_16 delay_count;
1444:../Generated_Code/usb_dci_kinetis.c **** 
1445:../Generated_Code/usb_dci_kinetis.c ****     /* Clear SUSP Bit from USB_CTRL */
1446:../Generated_Code/usb_dci_kinetis.c ****     USB0_USBCTRL &= ~USB_USBCTRL_SUSP_MASK;
 2159              		.loc 1 1446 0
 2160 0008 2A4B     		ldr	r3, .L106
 2161 000a 2A4A     		ldr	r2, .L106
 2162 000c 92F80021 		ldrb	r2, [r2, #256]
 2163 0010 D2B2     		uxtb	r2, r2
 2164 0012 02F07F02 		and	r2, r2, #127
 2165 0016 D2B2     		uxtb	r2, r2
 2166 0018 83F80021 		strb	r2, [r3, #256]
1447:../Generated_Code/usb_dci_kinetis.c **** 
1448:../Generated_Code/usb_dci_kinetis.c ****     (void)handle;
1449:../Generated_Code/usb_dci_kinetis.c **** 
1450:../Generated_Code/usb_dci_kinetis.c ****     /* Reset Low Power RESUME enable */
1451:../Generated_Code/usb_dci_kinetis.c ****     USB0_USBTRC0 &= ~USB_USBTRC0_USBRESMEN_MASK;
 2167              		.loc 1 1451 0
 2168 001c 254B     		ldr	r3, .L106
 2169 001e 254A     		ldr	r2, .L106
 2170 0020 92F80C21 		ldrb	r2, [r2, #268]
 2171 0024 D2B2     		uxtb	r2, r2
 2172 0026 22F02002 		bic	r2, r2, #32
 2173 002a D2B2     		uxtb	r2, r2
 2174 002c 83F80C21 		strb	r2, [r3, #268]
1452:../Generated_Code/usb_dci_kinetis.c **** 
1453:../Generated_Code/usb_dci_kinetis.c ****     USB_DCI_WAKEUP
 2175              		.loc 1 1453 0
 2176 0030 204B     		ldr	r3, .L106
 2177 0032 204A     		ldr	r2, .L106
 2178 0034 92F88020 		ldrb	r2, [r2, #128]
 2179 0038 D2B2     		uxtb	r2, r2
 2180 003a 42F02002 		orr	r2, r2, #32
 2181 003e D2B2     		uxtb	r2, r2
 2182 0040 83F88020 		strb	r2, [r3, #128]
 2183 0044 1B4B     		ldr	r3, .L106
 2184 0046 1B4A     		ldr	r2, .L106
 2185 0048 92F88420 		ldrb	r2, [r2, #132]
 2186 004c D2B2     		uxtb	r2, r2
 2187 004e 22F02002 		bic	r2, r2, #32
 2188 0052 D2B2     		uxtb	r2, r2
 2189 0054 83F88420 		strb	r2, [r3, #132]
 2190 0058 164B     		ldr	r3, .L106
 2191 005a 164A     		ldr	r2, .L106
 2192 005c 92F89420 		ldrb	r2, [r2, #148]
 2193 0060 D2B2     		uxtb	r2, r2
 2194 0062 22F02002 		bic	r2, r2, #32
 2195 0066 D2B2     		uxtb	r2, r2
 2196 0068 83F89420 		strb	r2, [r3, #148]
1454:../Generated_Code/usb_dci_kinetis.c **** 
1455:../Generated_Code/usb_dci_kinetis.c ****     USB0_CTL |= USB_CTL_RESUME_MASK;   /* Start RESUME signaling and make SUSPEND bit 0*/
 2197              		.loc 1 1455 0
 2198 006c 114B     		ldr	r3, .L106
 2199 006e 114A     		ldr	r2, .L106
 2200 0070 92F89420 		ldrb	r2, [r2, #148]
 2201 0074 D2B2     		uxtb	r2, r2
 2202 0076 42F00402 		orr	r2, r2, #4
 2203 007a D2B2     		uxtb	r2, r2
 2204 007c 83F89420 		strb	r2, [r3, #148]
1456:../Generated_Code/usb_dci_kinetis.c **** 
1457:../Generated_Code/usb_dci_kinetis.c ****     delay_count = ASSERT_RESUME_DELAY_COUNT; /* Set RESUME line for 1-15 ms*/
 2205              		.loc 1 1457 0
 2206 0080 44F62063 		movw	r3, #20000
 2207 0084 FB81     		strh	r3, [r7, #14]	@ movhi
 2208              	.L104:
1458:../Generated_Code/usb_dci_kinetis.c **** 
1459:../Generated_Code/usb_dci_kinetis.c ****     do
1460:../Generated_Code/usb_dci_kinetis.c ****     {
1461:../Generated_Code/usb_dci_kinetis.c ****        delay_count--;
 2209              		.loc 1 1461 0 discriminator 1
 2210 0086 FB89     		ldrh	r3, [r7, #14]
 2211 0088 013B     		subs	r3, r3, #1
 2212 008a FB81     		strh	r3, [r7, #14]	@ movhi
1462:../Generated_Code/usb_dci_kinetis.c ****        Watchdog_Reset();    /* Reset the COP */
 2213              		.loc 1 1462 0 discriminator 1
 2214 008c FFF7FEFF 		bl	Watchdog_Reset
1463:../Generated_Code/usb_dci_kinetis.c ****     }while(delay_count);
 2215              		.loc 1 1463 0 discriminator 1
 2216 0090 FB89     		ldrh	r3, [r7, #14]
 2217 0092 002B     		cmp	r3, #0
 2218 0094 F7D1     		bne	.L104
1464:../Generated_Code/usb_dci_kinetis.c **** 
1465:../Generated_Code/usb_dci_kinetis.c ****     USB0_CTL &= ~USB_CTL_RESUME_MASK;          /* Stop RESUME signalling */
 2219              		.loc 1 1465 0
 2220 0096 074B     		ldr	r3, .L106
 2221 0098 064A     		ldr	r2, .L106
 2222 009a 92F89420 		ldrb	r2, [r2, #148]
 2223 009e D2B2     		uxtb	r2, r2
 2224 00a0 22F00402 		bic	r2, r2, #4
 2225 00a4 D2B2     		uxtb	r2, r2
 2226 00a6 83F89420 		strb	r2, [r3, #148]
1466:../Generated_Code/usb_dci_kinetis.c **** 
1467:../Generated_Code/usb_dci_kinetis.c ****     return;
 2227              		.loc 1 1467 0
 2228 00aa 00BF     		nop
1468:../Generated_Code/usb_dci_kinetis.c **** #else
1469:../Generated_Code/usb_dci_kinetis.c **** #ifdef USART_DEBUG
1470:../Generated_Code/usb_dci_kinetis.c ****     printf("%s\n", __func__);
1471:../Generated_Code/usb_dci_kinetis.c **** #endif /* USART_DEBUG */
1472:../Generated_Code/usb_dci_kinetis.c **** #endif
1473:../Generated_Code/usb_dci_kinetis.c **** }
 2229              		.loc 1 1473 0
 2230 00ac 1037     		adds	r7, r7, #16
 2231 00ae BD46     		mov	sp, r7
 2232              		@ sp needed
 2233 00b0 80BD     		pop	{r7, pc}
 2234              	.L107:
 2235 00b2 00BF     		.align	2
 2236              	.L106:
 2237 00b4 00200740 		.word	1074208768
 2238              		.cfi_endproc
 2239              	.LFE18:
 2241              		.section	.text.USB_Bus_Token_Cpl_Handler,"ax",%progbits
 2242              		.align	2
 2243              		.thumb
 2244              		.thumb_func
 2246              	USB_Bus_Token_Cpl_Handler:
 2247              	.LFB19:
1474:../Generated_Code/usb_dci_kinetis.c **** 
1475:../Generated_Code/usb_dci_kinetis.c **** /**************************************************************************//*!
1476:../Generated_Code/usb_dci_kinetis.c ****  *
1477:../Generated_Code/usb_dci_kinetis.c ****  * @name  USB_Bus_Token_Cpl_Handler
1478:../Generated_Code/usb_dci_kinetis.c ****  *
1479:../Generated_Code/usb_dci_kinetis.c ****  * @brief The function handles Token Complete USB interrupts on the bus.
1480:../Generated_Code/usb_dci_kinetis.c ****  *
1481:../Generated_Code/usb_dci_kinetis.c ****  * @param stat  : BDT stat byte
1482:../Generated_Code/usb_dci_kinetis.c ****  * @param event : Pointer to USB EVENT Structure
1483:../Generated_Code/usb_dci_kinetis.c ****  *
1484:../Generated_Code/usb_dci_kinetis.c ****  * @return None
1485:../Generated_Code/usb_dci_kinetis.c ****  ******************************************************************************
1486:../Generated_Code/usb_dci_kinetis.c ****  * This function handles Token Complete USB interrupts on the bus.
1487:../Generated_Code/usb_dci_kinetis.c ****  *****************************************************************************/
1488:../Generated_Code/usb_dci_kinetis.c **** #if !HIGH_SPEED_DEVICE
1489:../Generated_Code/usb_dci_kinetis.c **** void USB_Bus_Token_Cpl_Handler (
1490:../Generated_Code/usb_dci_kinetis.c ****     uint_8 stat,            /* [IN] Value of STAT register */
1491:../Generated_Code/usb_dci_kinetis.c ****     USB_DEV_EVENT_STRUCT* event /* [IN] Pointer to USB EVENT Structure */
1492:../Generated_Code/usb_dci_kinetis.c **** )
1493:../Generated_Code/usb_dci_kinetis.c **** {
 2248              		.loc 1 1493 0
 2249              		.cfi_startproc
 2250              		@ args = 0, pretend = 0, frame = 32
 2251              		@ frame_needed = 1, uses_anonymous_args = 0
 2252 0000 80B5     		push	{r7, lr}
 2253              		.cfi_def_cfa_offset 8
 2254              		.cfi_offset 7, -8
 2255              		.cfi_offset 14, -4
 2256 0002 88B0     		sub	sp, sp, #32
 2257              		.cfi_def_cfa_offset 40
 2258 0004 00AF     		add	r7, sp, #0
 2259              		.cfi_def_cfa_register 7
 2260 0006 0346     		mov	r3, r0
 2261 0008 3960     		str	r1, [r7]
 2262 000a FB71     		strb	r3, [r7, #7]
1494:../Generated_Code/usb_dci_kinetis.c ****     uint_8 bdt_index = 0 ;
 2263              		.loc 1 1494 0
 2264 000c 0023     		movs	r3, #0
 2265 000e FB77     		strb	r3, [r7, #31]
1495:../Generated_Code/usb_dci_kinetis.c ****     P_BUFF_DSC buffer_dsc = NULL;
 2266              		.loc 1 1495 0
 2267 0010 0023     		movs	r3, #0
 2268 0012 BB61     		str	r3, [r7, #24]
1496:../Generated_Code/usb_dci_kinetis.c ****     P_BUFF_DSC buffer_dsc_alt = NULL;/* stores data of alternate buffer */
 2269              		.loc 1 1496 0
 2270 0014 0023     		movs	r3, #0
 2271 0016 7B61     		str	r3, [r7, #20]
1497:../Generated_Code/usb_dci_kinetis.c ****     P_BDT_ELEM bdt_elem = NULL;
 2272              		.loc 1 1497 0
 2273 0018 0023     		movs	r3, #0
 2274 001a 3B61     		str	r3, [r7, #16]
1498:../Generated_Code/usb_dci_kinetis.c ****     boolean odd = (boolean)((stat & 0x04) >> 2);
 2275              		.loc 1 1498 0
 2276 001c FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 2277 001e 03F00403 		and	r3, r3, #4
 2278 0022 9B10     		asrs	r3, r3, #2
 2279 0024 FB73     		strb	r3, [r7, #15]
1499:../Generated_Code/usb_dci_kinetis.c **** 
1500:../Generated_Code/usb_dci_kinetis.c ****     /* Get the direction from STAT register */
1501:../Generated_Code/usb_dci_kinetis.c ****     event->direction = (uint_8)((stat & ENDPOINT_DIRECTION_MASK) >>
 2280              		.loc 1 1501 0
 2281 0026 FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 2282 0028 03F00803 		and	r3, r3, #8
 2283 002c DB10     		asrs	r3, r3, #3
 2284 002e DAB2     		uxtb	r2, r3
 2285 0030 3B68     		ldr	r3, [r7]
 2286 0032 DA70     		strb	r2, [r3, #3]
1502:../Generated_Code/usb_dci_kinetis.c ****         ENDPOINT_DIRECTION_SHIFT);
1503:../Generated_Code/usb_dci_kinetis.c **** 
1504:../Generated_Code/usb_dci_kinetis.c **** 
1505:../Generated_Code/usb_dci_kinetis.c ****     /* Get bdt index corresponding to endpoint number and direction */
1506:../Generated_Code/usb_dci_kinetis.c ****     bdt_index = USB_DCI_Get_BDT_Index(event->ep_num,event->direction, odd);
 2287              		.loc 1 1506 0
 2288 0034 3B68     		ldr	r3, [r7]
 2289 0036 5978     		ldrb	r1, [r3, #1]	@ zero_extendqisi2
 2290 0038 3B68     		ldr	r3, [r7]
 2291 003a DA78     		ldrb	r2, [r3, #3]	@ zero_extendqisi2
 2292 003c FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 2293 003e 0846     		mov	r0, r1
 2294 0040 1146     		mov	r1, r2
 2295 0042 1A46     		mov	r2, r3
 2296 0044 FFF7FEFF 		bl	USB_DCI_Get_BDT_Index
 2297 0048 0346     		mov	r3, r0
 2298 004a FB77     		strb	r3, [r7, #31]
1507:../Generated_Code/usb_dci_kinetis.c **** 
1508:../Generated_Code/usb_dci_kinetis.c ****     buffer_dsc = &g_bdtmap->ep_dsc[bdt_index];
 2299              		.loc 1 1508 0
 2300 004c A54B     		ldr	r3, .L126
 2301 004e 1A68     		ldr	r2, [r3]
 2302 0050 FB7F     		ldrb	r3, [r7, #31]	@ zero_extendqisi2
 2303 0052 DB00     		lsls	r3, r3, #3
 2304 0054 1344     		add	r3, r3, r2
 2305 0056 BB61     		str	r3, [r7, #24]
1509:../Generated_Code/usb_dci_kinetis.c ****     buffer_dsc_alt = &g_bdtmap->ep_dsc[bdt_index ^ 1];
 2306              		.loc 1 1509 0
 2307 0058 A24B     		ldr	r3, .L126
 2308 005a 1A68     		ldr	r2, [r3]
 2309 005c FB7F     		ldrb	r3, [r7, #31]
 2310 005e 83F00103 		eor	r3, r3, #1
 2311 0062 DBB2     		uxtb	r3, r3
 2312 0064 DB00     		lsls	r3, r3, #3
 2313 0066 1344     		add	r3, r3, r2
 2314 0068 7B61     		str	r3, [r7, #20]
1510:../Generated_Code/usb_dci_kinetis.c **** 
1511:../Generated_Code/usb_dci_kinetis.c ****     bdt_elem = &g_bdt_elem[TRANSFER_INDEX(bdt_index)];
 2315              		.loc 1 1511 0
 2316 006a FB7F     		ldrb	r3, [r7, #31]	@ zero_extendqisi2
 2317 006c 5B08     		lsrs	r3, r3, #1
 2318 006e DBB2     		uxtb	r3, r3
 2319 0070 1A46     		mov	r2, r3
 2320 0072 1346     		mov	r3, r2
 2321 0074 DB00     		lsls	r3, r3, #3
 2322 0076 1344     		add	r3, r3, r2
 2323 0078 5B00     		lsls	r3, r3, #1
 2324 007a 9B4A     		ldr	r2, .L126+4
 2325 007c 1344     		add	r3, r3, r2
 2326 007e 3B61     		str	r3, [r7, #16]
1512:../Generated_Code/usb_dci_kinetis.c **** 
1513:../Generated_Code/usb_dci_kinetis.c ****     /* Get address from BDT */
1514:../Generated_Code/usb_dci_kinetis.c ****     event->buffer_ptr = (uint_8_ptr)SWAP32(buffer_dsc->addr);
 2327              		.loc 1 1514 0
 2328 0080 BB69     		ldr	r3, [r7, #24]
 2329 0082 5B68     		ldr	r3, [r3, #4]	@ unaligned
 2330 0084 1A46     		mov	r2, r3
 2331 0086 3B68     		ldr	r3, [r7]
 2332 0088 5A60     		str	r2, [r3, #4]	@ unaligned
1515:../Generated_Code/usb_dci_kinetis.c **** 
1516:../Generated_Code/usb_dci_kinetis.c ****     /* Get len from BDT */
1517:../Generated_Code/usb_dci_kinetis.c ****     event->len = SWAP16(buffer_dsc->cnt);
 2333              		.loc 1 1517 0
 2334 008a BB69     		ldr	r3, [r7, #24]
 2335 008c 5B88     		ldrh	r3, [r3, #2]	@ unaligned
 2336 008e 9AB2     		uxth	r2, r3
 2337 0090 3B68     		ldr	r3, [r7]
 2338 0092 A3F80920 		strh	r2, [r3, #9]	@ unaligned
1518:../Generated_Code/usb_dci_kinetis.c **** 
1519:../Generated_Code/usb_dci_kinetis.c ****     /* Prepare for Next USB Transaction */
1520:../Generated_Code/usb_dci_kinetis.c ****     bdt_index = (uint_8)(bdt_elem->bdtmap_index ^ 1);
 2339              		.loc 1 1520 0
 2340 0096 3B69     		ldr	r3, [r7, #16]
 2341 0098 DB7B     		ldrb	r3, [r3, #15]	@ zero_extendqisi2
 2342 009a 83F00103 		eor	r3, r3, #1
 2343 009e FB77     		strb	r3, [r7, #31]
1521:../Generated_Code/usb_dci_kinetis.c ****     bdt_elem->bdtmap_index = bdt_index;
 2344              		.loc 1 1521 0
 2345 00a0 3B69     		ldr	r3, [r7, #16]
 2346 00a2 FA7F     		ldrb	r2, [r7, #31]
 2347 00a4 DA73     		strb	r2, [r3, #15]
1522:../Generated_Code/usb_dci_kinetis.c **** 
1523:../Generated_Code/usb_dci_kinetis.c ****     /* Toggle Data PID*/
1524:../Generated_Code/usb_dci_kinetis.c ****     buffer_dsc_alt->Stat._byte = (uint_8)((buffer_dsc->Stat.McuCtlBit.data ^ 1) << 6);
 2348              		.loc 1 1524 0
 2349 00a6 BB69     		ldr	r3, [r7, #24]
 2350 00a8 1B78     		ldrb	r3, [r3]
 2351 00aa C3F38013 		ubfx	r3, r3, #6, #1
 2352 00ae DBB2     		uxtb	r3, r3
 2353 00b0 83F00103 		eor	r3, r3, #1
 2354 00b4 DBB2     		uxtb	r3, r3
 2355 00b6 9B01     		lsls	r3, r3, #6
 2356 00b8 DAB2     		uxtb	r2, r3
 2357 00ba 7B69     		ldr	r3, [r7, #20]
 2358 00bc 1A70     		strb	r2, [r3]
1525:../Generated_Code/usb_dci_kinetis.c **** 
1526:../Generated_Code/usb_dci_kinetis.c ****     if(event->direction == USB_SEND)
 2359              		.loc 1 1526 0
 2360 00be 3B68     		ldr	r3, [r7]
 2361 00c0 DB78     		ldrb	r3, [r3, #3]	@ zero_extendqisi2
 2362 00c2 012B     		cmp	r3, #1
 2363 00c4 63D1     		bne	.L109
1527:../Generated_Code/usb_dci_kinetis.c ****     {
1528:../Generated_Code/usb_dci_kinetis.c ****         if(event->ep_num == CONTROL_ENDPOINT)
 2364              		.loc 1 1528 0
 2365 00c6 3B68     		ldr	r3, [r7]
 2366 00c8 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 2367 00ca 002B     		cmp	r3, #0
 2368 00cc 16D1     		bne	.L110
1529:../Generated_Code/usb_dci_kinetis.c ****         {
1530:../Generated_Code/usb_dci_kinetis.c ****             /* for Control Endpoint */
1531:../Generated_Code/usb_dci_kinetis.c ****             /* For Transfer Direction Host to Device */
1532:../Generated_Code/usb_dci_kinetis.c ****             if(g_trf_direction == USB_RECV)
 2369              		.loc 1 1532 0
 2370 00ce 874B     		ldr	r3, .L126+8
 2371 00d0 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2372 00d2 002B     		cmp	r3, #0
 2373 00d4 12D1     		bne	.L110
1533:../Generated_Code/usb_dci_kinetis.c ****             {
1534:../Generated_Code/usb_dci_kinetis.c ****                 /*
1535:../Generated_Code/usb_dci_kinetis.c ****                    Enters here for first time after Set_Address TRANSFER
1536:../Generated_Code/usb_dci_kinetis.c ****                    Completed
1537:../Generated_Code/usb_dci_kinetis.c ****                 */
1538:../Generated_Code/usb_dci_kinetis.c ****                 /* make Transfer Direction UNKNOWN */
1539:../Generated_Code/usb_dci_kinetis.c ****                 g_trf_direction = USB_TRF_UNKNOWN;
 2374              		.loc 1 1539 0
 2375 00d6 854B     		ldr	r3, .L126+8
 2376 00d8 FF22     		movs	r2, #255
 2377 00da 1A70     		strb	r2, [r3]
1540:../Generated_Code/usb_dci_kinetis.c ****                 /* Cancel any pending Transfers on RECV Control Endpoint*/
1541:../Generated_Code/usb_dci_kinetis.c ****                 USB_DCI_Cancel_Transfer(&(event->controller_ID), (uint_8)CONTROL_ENDPOINT,
 2378              		.loc 1 1541 0
 2379 00dc 3B68     		ldr	r3, [r7]
 2380 00de 1846     		mov	r0, r3
 2381 00e0 0021     		movs	r1, #0
 2382 00e2 0022     		movs	r2, #0
 2383 00e4 FFF7FEFF 		bl	_usb_device_cancel_transfer
1542:../Generated_Code/usb_dci_kinetis.c ****                   (uint_8)USB_RECV);
1543:../Generated_Code/usb_dci_kinetis.c ****                 /* We Require DATA0 PID for Setup Token */
1544:../Generated_Code/usb_dci_kinetis.c ****                 buffer_dsc_alt->Stat._byte = _DATA0;
 2384              		.loc 1 1544 0
 2385 00e8 7B69     		ldr	r3, [r7, #20]
 2386 00ea 0022     		movs	r2, #0
 2387 00ec 1A70     		strb	r2, [r3]
1545:../Generated_Code/usb_dci_kinetis.c ****                 /* Prepare for Next SETUP PACKET Receive */
1546:../Generated_Code/usb_dci_kinetis.c ****                 USB_DCI_Recv_Data(&(event->controller_ID),
 2388              		.loc 1 1546 0
 2389 00ee 3B68     		ldr	r3, [r7]
 2390 00f0 1846     		mov	r0, r3
 2391 00f2 0021     		movs	r1, #0
 2392 00f4 0022     		movs	r2, #0
 2393 00f6 0023     		movs	r3, #0
 2394 00f8 FFF7FEFF 		bl	_usb_device_recv_data
 2395              	.L110:
1547:../Generated_Code/usb_dci_kinetis.c ****                     CONTROL_ENDPOINT,
1548:../Generated_Code/usb_dci_kinetis.c ****                     NULL,0);
1549:../Generated_Code/usb_dci_kinetis.c **** 
1550:../Generated_Code/usb_dci_kinetis.c ****             }
1551:../Generated_Code/usb_dci_kinetis.c ****         }/* ep_num is CONTROL ENDPOINT */
1552:../Generated_Code/usb_dci_kinetis.c **** 
1553:../Generated_Code/usb_dci_kinetis.c **** #ifdef LONG_SEND_TRANSACTION
1554:../Generated_Code/usb_dci_kinetis.c ****         if( (g_trf_direction == USB_SEND) ||
 2396              		.loc 1 1554 0
 2397 00fc 7B4B     		ldr	r3, .L126+8
 2398 00fe 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2399 0100 012B     		cmp	r3, #1
 2400 0102 04D0     		beq	.L111
1555:../Generated_Code/usb_dci_kinetis.c ****             (event->ep_num != CONTROL_ENDPOINT) )
 2401              		.loc 1 1555 0 discriminator 1
 2402 0104 3B68     		ldr	r3, [r7]
 2403 0106 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
1554:../Generated_Code/usb_dci_kinetis.c ****         if( (g_trf_direction == USB_SEND) ||
 2404              		.loc 1 1554 0 discriminator 1
 2405 0108 002B     		cmp	r3, #0
 2406 010a 00F00381 		beq	.L116
 2407              	.L111:
1556:../Generated_Code/usb_dci_kinetis.c ****         {
1557:../Generated_Code/usb_dci_kinetis.c ****             /* update the request */
1558:../Generated_Code/usb_dci_kinetis.c ****             bdt_elem->curr_offset += event->len;
 2408              		.loc 1 1558 0
 2409 010e 3B69     		ldr	r3, [r7, #16]
 2410 0110 9B89     		ldrh	r3, [r3, #12]	@ unaligned
 2411 0112 9AB2     		uxth	r2, r3
 2412 0114 3B68     		ldr	r3, [r7]
 2413 0116 B3F80930 		ldrh	r3, [r3, #9]	@ unaligned
 2414 011a 9BB2     		uxth	r3, r3
 2415 011c 1344     		add	r3, r3, r2
 2416 011e 9AB2     		uxth	r2, r3
 2417 0120 3B69     		ldr	r3, [r7, #16]
 2418 0122 9A81     		strh	r2, [r3, #12]	@ unaligned
1559:../Generated_Code/usb_dci_kinetis.c ****             /*
1560:../Generated_Code/usb_dci_kinetis.c ****                Initiate next USB SEND if:
1561:../Generated_Code/usb_dci_kinetis.c ****                1. More Data is still pending OR
1562:../Generated_Code/usb_dci_kinetis.c ****                2. Send Data == Endpoint Size AND
1563:../Generated_Code/usb_dci_kinetis.c ****                3. Zero Termination Flag is TRUE
1564:../Generated_Code/usb_dci_kinetis.c ****             */
1565:../Generated_Code/usb_dci_kinetis.c ****             if((bdt_elem->app_len > bdt_elem->curr_offset) ||
 2419              		.loc 1 1565 0
 2420 0124 3B69     		ldr	r3, [r7, #16]
 2421 0126 5B89     		ldrh	r3, [r3, #10]	@ unaligned
 2422 0128 9AB2     		uxth	r2, r3
 2423 012a 3B69     		ldr	r3, [r7, #16]
 2424 012c 9B89     		ldrh	r3, [r3, #12]	@ unaligned
 2425 012e 9BB2     		uxth	r3, r3
 2426 0130 9A42     		cmp	r2, r3
 2427 0132 0ED8     		bhi	.L113
1566:../Generated_Code/usb_dci_kinetis.c ****                  (((uint_8)event->len == bdt_elem->len) && (bdt_elem->flag == TRUE))
 2428              		.loc 1 1566 0 discriminator 1
 2429 0134 3B68     		ldr	r3, [r7]
 2430 0136 B3F80930 		ldrh	r3, [r3, #9]	@ unaligned
 2431 013a 9BB2     		uxth	r3, r3
 2432 013c DBB2     		uxtb	r3, r3
 2433 013e 1A46     		mov	r2, r3
 2434 0140 3B69     		ldr	r3, [r7, #16]
 2435 0142 1B88     		ldrh	r3, [r3]	@ unaligned
 2436 0144 9BB2     		uxth	r3, r3
1565:../Generated_Code/usb_dci_kinetis.c ****             if((bdt_elem->app_len > bdt_elem->curr_offset) ||
 2437              		.loc 1 1565 0 discriminator 1
 2438 0146 9A42     		cmp	r2, r3
 2439 0148 15D1     		bne	.L114
 2440              		.loc 1 1566 0
 2441 014a 3B69     		ldr	r3, [r7, #16]
 2442 014c 9B7B     		ldrb	r3, [r3, #14]	@ zero_extendqisi2
 2443 014e 012B     		cmp	r3, #1
 2444 0150 11D1     		bne	.L114
 2445              	.L113:
1567:../Generated_Code/usb_dci_kinetis.c ****                )
1568:../Generated_Code/usb_dci_kinetis.c ****             {
1569:../Generated_Code/usb_dci_kinetis.c ****                 /* send next Req */
1570:../Generated_Code/usb_dci_kinetis.c ****                 USB_DCI_Prepare_Send_Data(buffer_dsc_alt, bdt_elem);
 2446              		.loc 1 1570 0
 2447 0152 7869     		ldr	r0, [r7, #20]
 2448 0154 3969     		ldr	r1, [r7, #16]
 2449 0156 FFF7FEFF 		bl	USB_DCI_Prepare_Send_Data
1571:../Generated_Code/usb_dci_kinetis.c **** 
1572:../Generated_Code/usb_dci_kinetis.c ****                 /* give the ownership to SIE and TOGGLE DATA BIT */
1573:../Generated_Code/usb_dci_kinetis.c ****                 buffer_dsc_alt->Stat._byte = (uint_8)(
1574:../Generated_Code/usb_dci_kinetis.c ****                     ((buffer_dsc_alt->Stat.McuCtlBit.data) << 6) |
 2450              		.loc 1 1574 0
 2451 015a 7B69     		ldr	r3, [r7, #20]
 2452 015c 1B78     		ldrb	r3, [r3]
 2453 015e C3F38013 		ubfx	r3, r3, #6, #1
 2454 0162 DBB2     		uxtb	r3, r3
 2455 0164 9B01     		lsls	r3, r3, #6
1573:../Generated_Code/usb_dci_kinetis.c ****                 buffer_dsc_alt->Stat._byte = (uint_8)(
 2456              		.loc 1 1573 0
 2457 0166 DBB2     		uxtb	r3, r3
 2458 0168 63F07703 		orn	r3, r3, #119
 2459 016c DBB2     		uxtb	r3, r3
 2460 016e DAB2     		uxtb	r2, r3
 2461 0170 7B69     		ldr	r3, [r7, #20]
 2462 0172 1A70     		strb	r2, [r3]
1575:../Generated_Code/usb_dci_kinetis.c ****                     _SIE | _DTS);;
1576:../Generated_Code/usb_dci_kinetis.c ****                 return;
 2463              		.loc 1 1576 0
 2464 0174 D5E0     		b	.L108
 2465              	.L114:
1577:../Generated_Code/usb_dci_kinetis.c ****             }
1578:../Generated_Code/usb_dci_kinetis.c ****             else
1579:../Generated_Code/usb_dci_kinetis.c ****             {
1580:../Generated_Code/usb_dci_kinetis.c ****                 event->buffer_ptr = bdt_elem->app_buffer;
 2466              		.loc 1 1580 0
 2467 0176 3B69     		ldr	r3, [r7, #16]
 2468 0178 D3F80620 		ldr	r2, [r3, #6]	@ unaligned
 2469 017c 3B68     		ldr	r3, [r7]
 2470 017e 5A60     		str	r2, [r3, #4]	@ unaligned
1581:../Generated_Code/usb_dci_kinetis.c ****                 event->len = bdt_elem->curr_offset;
 2471              		.loc 1 1581 0
 2472 0180 3B69     		ldr	r3, [r7, #16]
 2473 0182 9B89     		ldrh	r3, [r3, #12]	@ unaligned
 2474 0184 9AB2     		uxth	r2, r3
 2475 0186 3B68     		ldr	r3, [r7]
 2476 0188 A3F80920 		strh	r2, [r3, #9]	@ unaligned
 2477 018c C2E0     		b	.L116
 2478              	.L109:
1582:../Generated_Code/usb_dci_kinetis.c ****             }
1583:../Generated_Code/usb_dci_kinetis.c ****         }
1584:../Generated_Code/usb_dci_kinetis.c **** #endif
1585:../Generated_Code/usb_dci_kinetis.c ****     }/* End of SEND loop */
1586:../Generated_Code/usb_dci_kinetis.c ****     else /* direction IS USB_RECV */
1587:../Generated_Code/usb_dci_kinetis.c ****     {
1588:../Generated_Code/usb_dci_kinetis.c ****         if(event->ep_num == CONTROL_ENDPOINT)
 2479              		.loc 1 1588 0
 2480 018e 3B68     		ldr	r3, [r7]
 2481 0190 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 2482 0192 002B     		cmp	r3, #0
 2483 0194 28D1     		bne	.L117
1589:../Generated_Code/usb_dci_kinetis.c ****         {
1590:../Generated_Code/usb_dci_kinetis.c ****             /* for Control Endpoint */
1591:../Generated_Code/usb_dci_kinetis.c ****             if(buffer_dsc->Stat.RecPid.pid == USB_SETUP_TOKEN)
 2484              		.loc 1 1591 0
 2485 0196 BB69     		ldr	r3, [r7, #24]
 2486 0198 1B78     		ldrb	r3, [r3]
 2487 019a C3F38303 		ubfx	r3, r3, #2, #4
 2488 019e DBB2     		uxtb	r3, r3
 2489 01a0 0D2B     		cmp	r3, #13
 2490 01a2 0AD1     		bne	.L118
1592:../Generated_Code/usb_dci_kinetis.c ****             {
1593:../Generated_Code/usb_dci_kinetis.c ****                 /* set setup phase */
1594:../Generated_Code/usb_dci_kinetis.c ****                 event->setup = TRUE;
 2491              		.loc 1 1594 0
 2492 01a4 3B68     		ldr	r3, [r7]
 2493 01a6 0122     		movs	r2, #1
 2494 01a8 9A70     		strb	r2, [r3, #2]
1595:../Generated_Code/usb_dci_kinetis.c ****                 /* Transfer direction of next packet */
1596:../Generated_Code/usb_dci_kinetis.c ****                 g_trf_direction = (uint_8)((uint_8)
1597:../Generated_Code/usb_dci_kinetis.c ****                     (event->buffer_ptr[0]) >> 7);
 2495              		.loc 1 1597 0
 2496 01aa 3B68     		ldr	r3, [r7]
 2497 01ac 5B68     		ldr	r3, [r3, #4]	@ unaligned
 2498 01ae 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
1596:../Generated_Code/usb_dci_kinetis.c ****                 g_trf_direction = (uint_8)((uint_8)
 2499              		.loc 1 1596 0
 2500 01b0 DB09     		lsrs	r3, r3, #7
 2501 01b2 DAB2     		uxtb	r2, r3
 2502 01b4 4D4B     		ldr	r3, .L126+8
 2503 01b6 1A70     		strb	r2, [r3]
 2504 01b8 16E0     		b	.L117
 2505              	.L118:
1598:../Generated_Code/usb_dci_kinetis.c ****             }
1599:../Generated_Code/usb_dci_kinetis.c ****             else if(g_trf_direction == USB_SEND)
 2506              		.loc 1 1599 0
 2507 01ba 4C4B     		ldr	r3, .L126+8
 2508 01bc 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2509 01be 012B     		cmp	r3, #1
 2510 01c0 12D1     		bne	.L117
1600:../Generated_Code/usb_dci_kinetis.c ****             {
1601:../Generated_Code/usb_dci_kinetis.c ****                 /* make Transfer Direction UNKNOWN */
1602:../Generated_Code/usb_dci_kinetis.c ****                 g_trf_direction = USB_TRF_UNKNOWN;
 2511              		.loc 1 1602 0
 2512 01c2 4A4B     		ldr	r3, .L126+8
 2513 01c4 FF22     		movs	r2, #255
 2514 01c6 1A70     		strb	r2, [r3]
1603:../Generated_Code/usb_dci_kinetis.c ****                 /* Cancel any pending Transfers on SEND Control Endpoint*/
1604:../Generated_Code/usb_dci_kinetis.c ****                 USB_DCI_Cancel_Transfer(&(event->controller_ID), (uint_8)CONTROL_ENDPOINT,
 2515              		.loc 1 1604 0
 2516 01c8 3B68     		ldr	r3, [r7]
 2517 01ca 1846     		mov	r0, r3
 2518 01cc 0021     		movs	r1, #0
 2519 01ce 0122     		movs	r2, #1
 2520 01d0 FFF7FEFF 		bl	_usb_device_cancel_transfer
1605:../Generated_Code/usb_dci_kinetis.c ****                 (uint_8)USB_SEND);
1606:../Generated_Code/usb_dci_kinetis.c ****                 /* We Require DATA0 PID for Setup Token */
1607:../Generated_Code/usb_dci_kinetis.c ****                 buffer_dsc_alt->Stat._byte = _DATA0;
 2521              		.loc 1 1607 0
 2522 01d4 7B69     		ldr	r3, [r7, #20]
 2523 01d6 0022     		movs	r2, #0
 2524 01d8 1A70     		strb	r2, [r3]
1608:../Generated_Code/usb_dci_kinetis.c ****                 /* Prepare for Next SETUP PACKET Receive */
1609:../Generated_Code/usb_dci_kinetis.c ****                 USB_DCI_Recv_Data(&(event->controller_ID),
 2525              		.loc 1 1609 0
 2526 01da 3B68     		ldr	r3, [r7]
 2527 01dc 1846     		mov	r0, r3
 2528 01de 0021     		movs	r1, #0
 2529 01e0 0022     		movs	r2, #0
 2530 01e2 0023     		movs	r3, #0
 2531 01e4 FFF7FEFF 		bl	_usb_device_recv_data
 2532              	.L117:
1610:../Generated_Code/usb_dci_kinetis.c ****                     CONTROL_ENDPOINT,
1611:../Generated_Code/usb_dci_kinetis.c ****                     NULL,0);
1612:../Generated_Code/usb_dci_kinetis.c ****             }
1613:../Generated_Code/usb_dci_kinetis.c ****         }   /* ep_num is CONTROL ENDPOINT */
1614:../Generated_Code/usb_dci_kinetis.c **** 
1615:../Generated_Code/usb_dci_kinetis.c **** #ifdef LONG_RECEIVE_TRANSACTION
1616:../Generated_Code/usb_dci_kinetis.c ****         /* For NON CONTROL ENDPOINT only */
1617:../Generated_Code/usb_dci_kinetis.c ****         if(bdt_elem->app_len != (USB_PACKET_SIZE)UNINITIALISED_VAL)
 2533              		.loc 1 1617 0
 2534 01e8 3B69     		ldr	r3, [r7, #16]
 2535 01ea 5B89     		ldrh	r3, [r3, #10]	@ unaligned
 2536 01ec 9AB2     		uxth	r2, r3
 2537 01ee 4FF6FF73 		movw	r3, #65535
 2538 01f2 9A42     		cmp	r2, r3
 2539 01f4 00F08E80 		beq	.L116
 2540              	.LBB7:
1618:../Generated_Code/usb_dci_kinetis.c ****         {
1619:../Generated_Code/usb_dci_kinetis.c ****             /* on control endpoint the data is only 8 bytes */
1620:../Generated_Code/usb_dci_kinetis.c ****             USB_PACKET_SIZE size = event->len;
 2541              		.loc 1 1620 0
 2542 01f8 3B68     		ldr	r3, [r7]
 2543 01fa 5A7A     		ldrb	r2, [r3, #9]	@ zero_extendqisi2
 2544 01fc 9B7A     		ldrb	r3, [r3, #10]	@ zero_extendqisi2
 2545 01fe 1B02     		lsls	r3, r3, #8
 2546 0200 1343     		orrs	r3, r3, r2
 2547 0202 BB81     		strh	r3, [r7, #12]	@ movhi
1621:../Generated_Code/usb_dci_kinetis.c ****             bdt_elem->curr_offset += size;
 2548              		.loc 1 1621 0
 2549 0204 3B69     		ldr	r3, [r7, #16]
 2550 0206 9B89     		ldrh	r3, [r3, #12]	@ unaligned
 2551 0208 9AB2     		uxth	r2, r3
 2552 020a BB89     		ldrh	r3, [r7, #12]	@ movhi
 2553 020c 1344     		add	r3, r3, r2
 2554 020e 9AB2     		uxth	r2, r3
 2555 0210 3B69     		ldr	r3, [r7, #16]
 2556 0212 9A81     		strh	r2, [r3, #12]	@ unaligned
1622:../Generated_Code/usb_dci_kinetis.c **** 
1623:../Generated_Code/usb_dci_kinetis.c ****             /*
1624:../Generated_Code/usb_dci_kinetis.c ****                Initiate next USB RECV if:
1625:../Generated_Code/usb_dci_kinetis.c ****                1. More Data is still pending OR
1626:../Generated_Code/usb_dci_kinetis.c ****                2. Received Data == Endpoint Size AND
1627:../Generated_Code/usb_dci_kinetis.c ****                3. Zero Termination Flag is TRUE
1628:../Generated_Code/usb_dci_kinetis.c ****             */
1629:../Generated_Code/usb_dci_kinetis.c ****             if(
1630:../Generated_Code/usb_dci_kinetis.c ****                ( (size == bdt_elem->len) &&
 2557              		.loc 1 1630 0
 2558 0214 3B69     		ldr	r3, [r7, #16]
 2559 0216 1B88     		ldrh	r3, [r3]	@ unaligned
 2560 0218 9BB2     		uxth	r3, r3
1629:../Generated_Code/usb_dci_kinetis.c ****             if(
 2561              		.loc 1 1629 0
 2562 021a BA89     		ldrh	r2, [r7, #12]
 2563 021c 9A42     		cmp	r2, r3
 2564 021e 07D1     		bne	.L119
1631:../Generated_Code/usb_dci_kinetis.c ****                  (bdt_elem->app_len > bdt_elem->curr_offset)
 2565              		.loc 1 1631 0
 2566 0220 3B69     		ldr	r3, [r7, #16]
 2567 0222 5B89     		ldrh	r3, [r3, #10]	@ unaligned
 2568 0224 9AB2     		uxth	r2, r3
 2569 0226 3B69     		ldr	r3, [r7, #16]
 2570 0228 9B89     		ldrh	r3, [r3, #12]	@ unaligned
 2571 022a 9BB2     		uxth	r3, r3
1630:../Generated_Code/usb_dci_kinetis.c ****                ( (size == bdt_elem->len) &&
 2572              		.loc 1 1630 0
 2573 022c 9A42     		cmp	r2, r3
 2574 022e 16D8     		bhi	.L120
 2575              	.L119:
1632:../Generated_Code/usb_dci_kinetis.c ****                ) ||
1633:../Generated_Code/usb_dci_kinetis.c ****                ( (bdt_elem->app_len)&&
 2576              		.loc 1 1633 0
 2577 0230 3B69     		ldr	r3, [r7, #16]
 2578 0232 5B89     		ldrh	r3, [r3, #10]	@ unaligned
 2579 0234 9BB2     		uxth	r3, r3
1632:../Generated_Code/usb_dci_kinetis.c ****                ) ||
 2580              		.loc 1 1632 0
 2581 0236 002B     		cmp	r3, #0
 2582 0238 5AD0     		beq	.L121
1634:../Generated_Code/usb_dci_kinetis.c ****                  (!(bdt_elem->app_len % bdt_elem->len)) &&
 2583              		.loc 1 1634 0
 2584 023a 3B69     		ldr	r3, [r7, #16]
 2585 023c 5B89     		ldrh	r3, [r3, #10]	@ unaligned
 2586 023e 9BB2     		uxth	r3, r3
 2587 0240 3A69     		ldr	r2, [r7, #16]
 2588 0242 1288     		ldrh	r2, [r2]	@ unaligned
 2589 0244 92B2     		uxth	r2, r2
 2590 0246 B3FBF2F1 		udiv	r1, r3, r2
 2591 024a 02FB01F2 		mul	r2, r2, r1
 2592 024e 9B1A     		subs	r3, r3, r2
 2593 0250 9BB2     		uxth	r3, r3
1633:../Generated_Code/usb_dci_kinetis.c ****                ( (bdt_elem->app_len)&&
 2594              		.loc 1 1633 0
 2595 0252 002B     		cmp	r3, #0
 2596 0254 4CD1     		bne	.L121
1635:../Generated_Code/usb_dci_kinetis.c ****                  (bdt_elem->flag == TRUE)
 2597              		.loc 1 1635 0
 2598 0256 3B69     		ldr	r3, [r7, #16]
 2599 0258 9B7B     		ldrb	r3, [r3, #14]	@ zero_extendqisi2
1634:../Generated_Code/usb_dci_kinetis.c ****                  (!(bdt_elem->app_len % bdt_elem->len)) &&
 2600              		.loc 1 1634 0
 2601 025a 012B     		cmp	r3, #1
 2602 025c 48D1     		bne	.L121
 2603              	.L120:
 2604              	.LBB8:
1636:../Generated_Code/usb_dci_kinetis.c ****                )
1637:../Generated_Code/usb_dci_kinetis.c ****               )
1638:../Generated_Code/usb_dci_kinetis.c ****             {
1639:../Generated_Code/usb_dci_kinetis.c ****                 /* send next IO */
1640:../Generated_Code/usb_dci_kinetis.c ****                 uint_16 count;
1641:../Generated_Code/usb_dci_kinetis.c ****                 count = (uint_16)(((bdt_elem->app_len - bdt_elem->curr_offset)
 2605              		.loc 1 1641 0
 2606 025e 3B69     		ldr	r3, [r7, #16]
 2607 0260 5B89     		ldrh	r3, [r3, #10]	@ unaligned
 2608 0262 9BB2     		uxth	r3, r3
 2609 0264 1A46     		mov	r2, r3
 2610 0266 3B69     		ldr	r3, [r7, #16]
 2611 0268 9B89     		ldrh	r3, [r3, #12]	@ unaligned
 2612 026a 9BB2     		uxth	r3, r3
 2613 026c D21A     		subs	r2, r2, r3
1642:../Generated_Code/usb_dci_kinetis.c ****                     > bdt_elem->len) ? bdt_elem->len :
 2614              		.loc 1 1642 0
 2615 026e 3B69     		ldr	r3, [r7, #16]
 2616 0270 1B88     		ldrh	r3, [r3]	@ unaligned
 2617 0272 9BB2     		uxth	r3, r3
1641:../Generated_Code/usb_dci_kinetis.c ****                 count = (uint_16)(((bdt_elem->app_len - bdt_elem->curr_offset)
 2618              		.loc 1 1641 0
 2619 0274 9A42     		cmp	r2, r3
 2620 0276 03DD     		ble	.L122
1641:../Generated_Code/usb_dci_kinetis.c ****                 count = (uint_16)(((bdt_elem->app_len - bdt_elem->curr_offset)
 2621              		.loc 1 1641 0 is_stmt 0 discriminator 1
 2622 0278 3B69     		ldr	r3, [r7, #16]
 2623 027a 1B88     		ldrh	r3, [r3]	@ unaligned
 2624 027c 9BB2     		uxth	r3, r3
 2625 027e 07E0     		b	.L123
 2626              	.L122:
1643:../Generated_Code/usb_dci_kinetis.c ****                     (bdt_elem->app_len - bdt_elem->curr_offset));
 2627              		.loc 1 1643 0 is_stmt 1 discriminator 2
 2628 0280 3B69     		ldr	r3, [r7, #16]
 2629 0282 5B89     		ldrh	r3, [r3, #10]	@ unaligned
 2630 0284 9AB2     		uxth	r2, r3
 2631 0286 3B69     		ldr	r3, [r7, #16]
 2632 0288 9B89     		ldrh	r3, [r3, #12]	@ unaligned
 2633 028a 9BB2     		uxth	r3, r3
1641:../Generated_Code/usb_dci_kinetis.c ****                 count = (uint_16)(((bdt_elem->app_len - bdt_elem->curr_offset)
 2634              		.loc 1 1641 0 discriminator 2
 2635 028c D31A     		subs	r3, r2, r3
 2636 028e 9BB2     		uxth	r3, r3
 2637              	.L123:
1641:../Generated_Code/usb_dci_kinetis.c ****                 count = (uint_16)(((bdt_elem->app_len - bdt_elem->curr_offset)
 2638              		.loc 1 1641 0 is_stmt 0 discriminator 3
 2639 0290 7B81     		strh	r3, [r7, #10]	@ movhi
1644:../Generated_Code/usb_dci_kinetis.c **** 				if(count == 0)
 2640              		.loc 1 1644 0 is_stmt 1 discriminator 3
 2641 0292 7B89     		ldrh	r3, [r7, #10]
 2642 0294 002B     		cmp	r3, #0
 2643 0296 0AD1     		bne	.L124
1645:../Generated_Code/usb_dci_kinetis.c **** 				{
1646:../Generated_Code/usb_dci_kinetis.c ****             		/* For Zero byte Packet Receive */
1647:../Generated_Code/usb_dci_kinetis.c **** 					buffer_dsc_alt->addr = SWAP32(bdt_elem->addr);
 2644              		.loc 1 1647 0
 2645 0298 3B69     		ldr	r3, [r7, #16]
 2646 029a D3F80220 		ldr	r2, [r3, #2]	@ unaligned
 2647 029e 7B69     		ldr	r3, [r7, #20]
 2648 02a0 5A60     		str	r2, [r3, #4]	@ unaligned
1648:../Generated_Code/usb_dci_kinetis.c **** 				    buffer_dsc_alt->cnt = 0;
 2649              		.loc 1 1648 0
 2650 02a2 7B69     		ldr	r3, [r7, #20]
 2651 02a4 0022     		movs	r2, #0
 2652 02a6 9A70     		strb	r2, [r3, #2]
 2653 02a8 0022     		movs	r2, #0
 2654 02aa DA70     		strb	r2, [r3, #3]
 2655 02ac 0CE0     		b	.L125
 2656              	.L124:
1649:../Generated_Code/usb_dci_kinetis.c **** 				}
1650:../Generated_Code/usb_dci_kinetis.c **** 				else
1651:../Generated_Code/usb_dci_kinetis.c **** 				{
1652:../Generated_Code/usb_dci_kinetis.c ****                     buffer_dsc_alt->addr = SWAP32((uint_32)(bdt_elem->app_buffer + bdt_elem->curr_o
 2657              		.loc 1 1652 0
 2658 02ae 3B69     		ldr	r3, [r7, #16]
 2659 02b0 D3F80620 		ldr	r2, [r3, #6]	@ unaligned
 2660 02b4 3B69     		ldr	r3, [r7, #16]
 2661 02b6 9B89     		ldrh	r3, [r3, #12]	@ unaligned
 2662 02b8 9BB2     		uxth	r3, r3
 2663 02ba 1344     		add	r3, r3, r2
 2664 02bc 1A46     		mov	r2, r3
 2665 02be 7B69     		ldr	r3, [r7, #20]
 2666 02c0 5A60     		str	r2, [r3, #4]	@ unaligned
1653:../Generated_Code/usb_dci_kinetis.c **** 				    buffer_dsc_alt->cnt = SWAP16(count);
 2667              		.loc 1 1653 0
 2668 02c2 7B69     		ldr	r3, [r7, #20]
 2669 02c4 7A89     		ldrh	r2, [r7, #10]	@ movhi
 2670 02c6 5A80     		strh	r2, [r3, #2]	@ unaligned
 2671              	.L125:
1654:../Generated_Code/usb_dci_kinetis.c **** 				}
1655:../Generated_Code/usb_dci_kinetis.c **** 
1656:../Generated_Code/usb_dci_kinetis.c ****                 /* give the ownership to SIE and Toggle DATA bit*/
1657:../Generated_Code/usb_dci_kinetis.c ****                 buffer_dsc_alt->Stat._byte = (uint_8)((
1658:../Generated_Code/usb_dci_kinetis.c ****                     (buffer_dsc_alt->Stat.McuCtlBit.data) << 6) |
 2672              		.loc 1 1658 0
 2673 02c8 7B69     		ldr	r3, [r7, #20]
 2674 02ca 1B78     		ldrb	r3, [r3]
 2675 02cc C3F38013 		ubfx	r3, r3, #6, #1
 2676 02d0 DBB2     		uxtb	r3, r3
 2677 02d2 9B01     		lsls	r3, r3, #6
1657:../Generated_Code/usb_dci_kinetis.c ****                 buffer_dsc_alt->Stat._byte = (uint_8)((
 2678              		.loc 1 1657 0
 2679 02d4 DBB2     		uxtb	r3, r3
 2680 02d6 63F07703 		orn	r3, r3, #119
 2681 02da DBB2     		uxtb	r3, r3
 2682 02dc DAB2     		uxtb	r2, r3
 2683 02de 7B69     		ldr	r3, [r7, #20]
 2684 02e0 1A70     		strb	r2, [r3]
1659:../Generated_Code/usb_dci_kinetis.c ****                     _SIE | _DTS);
1660:../Generated_Code/usb_dci_kinetis.c ****                 return;
 2685              		.loc 1 1660 0
 2686 02e2 1EE0     		b	.L108
 2687              	.L127:
 2688              		.align	2
 2689              	.L126:
 2690 02e4 00000000 		.word	g_bdtmap
 2691 02e8 00000000 		.word	g_bdt_elem
 2692 02ec 00000000 		.word	g_trf_direction
 2693              	.L121:
 2694              	.LBE8:
1661:../Generated_Code/usb_dci_kinetis.c ****             }
1662:../Generated_Code/usb_dci_kinetis.c ****             else /* request completed */
1663:../Generated_Code/usb_dci_kinetis.c ****             {
1664:../Generated_Code/usb_dci_kinetis.c ****                 /* populate buffer structure */
1665:../Generated_Code/usb_dci_kinetis.c ****                 event->buffer_ptr = bdt_elem->app_buffer;
 2695              		.loc 1 1665 0
 2696 02f0 3B69     		ldr	r3, [r7, #16]
 2697 02f2 D3F80620 		ldr	r2, [r3, #6]	@ unaligned
 2698 02f6 3B68     		ldr	r3, [r7]
 2699 02f8 5A60     		str	r2, [r3, #4]	@ unaligned
1666:../Generated_Code/usb_dci_kinetis.c ****                 event->len = bdt_elem->curr_offset;
 2700              		.loc 1 1666 0
 2701 02fa 3B69     		ldr	r3, [r7, #16]
 2702 02fc 9B89     		ldrh	r3, [r3, #12]	@ unaligned
 2703 02fe 9AB2     		uxth	r2, r3
 2704 0300 3B68     		ldr	r3, [r7]
 2705 0302 A3F80920 		strh	r2, [r3, #9]	@ unaligned
1667:../Generated_Code/usb_dci_kinetis.c ****                 bdt_elem->app_len = (USB_PACKET_SIZE)UNINITIALISED_VAL;
 2706              		.loc 1 1667 0
 2707 0306 3B69     		ldr	r3, [r7, #16]
 2708 0308 4FF0FF32 		mov	r2, #-1
 2709 030c 9A72     		strb	r2, [r3, #10]
 2710 030e 4FF0FF32 		mov	r2, #-1
 2711 0312 DA72     		strb	r2, [r3, #11]
 2712              	.L116:
 2713              	.LBE7:
1668:../Generated_Code/usb_dci_kinetis.c ****             }
1669:../Generated_Code/usb_dci_kinetis.c ****         }
1670:../Generated_Code/usb_dci_kinetis.c **** #endif
1671:../Generated_Code/usb_dci_kinetis.c ****     } /* End of RECV loop */
1672:../Generated_Code/usb_dci_kinetis.c **** 
1673:../Generated_Code/usb_dci_kinetis.c ****     /* Notify Device Layer of Data Received or Sent Event */
1674:../Generated_Code/usb_dci_kinetis.c ****     (void)USB_Device_Call_Service(event->ep_num, event);
 2714              		.loc 1 1674 0
 2715 0314 3B68     		ldr	r3, [r7]
 2716 0316 5B78     		ldrb	r3, [r3, #1]	@ zero_extendqisi2
 2717 0318 1846     		mov	r0, r3
 2718 031a 3968     		ldr	r1, [r7]
 2719 031c FFF7FEFF 		bl	USB_Device_Call_Service
1675:../Generated_Code/usb_dci_kinetis.c **** 
1676:../Generated_Code/usb_dci_kinetis.c ****     return;
 2720              		.loc 1 1676 0
 2721 0320 00BF     		nop
 2722              	.L108:
1677:../Generated_Code/usb_dci_kinetis.c **** }
 2723              		.loc 1 1677 0
 2724 0322 2037     		adds	r7, r7, #32
 2725 0324 BD46     		mov	sp, r7
 2726              		@ sp needed
 2727 0326 80BD     		pop	{r7, pc}
 2728              		.cfi_endproc
 2729              	.LFE19:
 2731              		.section	.text.USB_ISR,"ax",%progbits
 2732              		.align	2
 2733              		.global	USB_ISR
 2734              		.thumb
 2735              		.thumb_func
 2737              	USB_ISR:
 2738              	.LFB20:
1678:../Generated_Code/usb_dci_kinetis.c **** #endif	// HIGH_SPEED_DEVICE
1679:../Generated_Code/usb_dci_kinetis.c **** 
1680:../Generated_Code/usb_dci_kinetis.c **** #if HIGH_SPEED_DEVICE
1681:../Generated_Code/usb_dci_kinetis.c **** /**************************************************************************//*!
1682:../Generated_Code/usb_dci_kinetis.c ****  * */
1683:../Generated_Code/usb_dci_kinetis.c **** uint_32 sof_counter = 0;
1684:../Generated_Code/usb_dci_kinetis.c **** static uint_32 micro_sof_counter = 0;
1685:../Generated_Code/usb_dci_kinetis.c **** void USBHS_ISR(void){
1686:../Generated_Code/usb_dci_kinetis.c **** 	uint_32 usbsts;
1687:../Generated_Code/usb_dci_kinetis.c ****     uint_32 reg;
1688:../Generated_Code/usb_dci_kinetis.c **** 	USB_DEV_EVENT_STRUCT event;
1689:../Generated_Code/usb_dci_kinetis.c **** 
1690:../Generated_Code/usb_dci_kinetis.c **** 	// get interrupt status
1691:../Generated_Code/usb_dci_kinetis.c ****     reg = USBHS_USBINTR;
1692:../Generated_Code/usb_dci_kinetis.c **** 	usbsts = USBHS_USBSTS & reg;
1693:../Generated_Code/usb_dci_kinetis.c **** 
1694:../Generated_Code/usb_dci_kinetis.c **** 	// clear interrupt status
1695:../Generated_Code/usb_dci_kinetis.c **** 	USBHS_USBSTS |= usbsts;
1696:../Generated_Code/usb_dci_kinetis.c **** 
1697:../Generated_Code/usb_dci_kinetis.c **** 	// initialize event structure
1698:../Generated_Code/usb_dci_kinetis.c **** 	event.controller_ID = g_dci_controller_Id;
1699:../Generated_Code/usb_dci_kinetis.c **** 	event.setup = FALSE;
1700:../Generated_Code/usb_dci_kinetis.c **** 	event.buffer_ptr = NULL;
1701:../Generated_Code/usb_dci_kinetis.c **** 	event.len = 0;
1702:../Generated_Code/usb_dci_kinetis.c **** 	event.direction = USB_RECV;
1703:../Generated_Code/usb_dci_kinetis.c **** 	event.errors = NO_ERRORS;
1704:../Generated_Code/usb_dci_kinetis.c **** 	event.ep_num = (uint_8)UNINITIALISED_VAL;
1705:../Generated_Code/usb_dci_kinetis.c **** 
1706:../Generated_Code/usb_dci_kinetis.c **** 	// handle SOF
1707:../Generated_Code/usb_dci_kinetis.c **** 	if(usbsts & USBHS_USBSTS_SRI_MASK){
1708:../Generated_Code/usb_dci_kinetis.c **** 		//USBHS_USBSTS |= USBHS_USBSTS_SRI_MASK;
1709:../Generated_Code/usb_dci_kinetis.c **** #ifdef ULPI_FORCE_FULLSPEED
1710:../Generated_Code/usb_dci_kinetis.c **** 		sof_counter++;
1711:../Generated_Code/usb_dci_kinetis.c **** #else
1712:../Generated_Code/usb_dci_kinetis.c **** 		if (++micro_sof_counter == 8){
1713:../Generated_Code/usb_dci_kinetis.c **** 			//sof_counter++;
1714:../Generated_Code/usb_dci_kinetis.c **** 			//micro_sof_counter = 0;
1715:../Generated_Code/usb_dci_kinetis.c **** 		}
1716:../Generated_Code/usb_dci_kinetis.c **** #endif
1717:../Generated_Code/usb_dci_kinetis.c **** 	}
1718:../Generated_Code/usb_dci_kinetis.c **** 
1719:../Generated_Code/usb_dci_kinetis.c **** 	// handle Suspend
1720:../Generated_Code/usb_dci_kinetis.c **** 	if (usbsts & USBHS_USBSTS_SLI_MASK){
1721:../Generated_Code/usb_dci_kinetis.c **** 		USB_Device_Call_Service(USB_SERVICE_SUSPEND, &event);
1722:../Generated_Code/usb_dci_kinetis.c **** 		return;
1723:../Generated_Code/usb_dci_kinetis.c **** 	}
1724:../Generated_Code/usb_dci_kinetis.c **** 
1725:../Generated_Code/usb_dci_kinetis.c **** 	// handle Bus Reset
1726:../Generated_Code/usb_dci_kinetis.c **** 	if (usbsts & USBHS_USBSTS_URI_MASK){
1727:../Generated_Code/usb_dci_kinetis.c **** 		// handle reset
1728:../Generated_Code/usb_dci_kinetis.c **** 		USB_Bus_Reset_Handler();
1729:../Generated_Code/usb_dci_kinetis.c **** 
1730:../Generated_Code/usb_dci_kinetis.c **** 		// notify device layer
1731:../Generated_Code/usb_dci_kinetis.c **** 		USB_Device_Call_Service(USB_SERVICE_BUS_RESET, &event);
1732:../Generated_Code/usb_dci_kinetis.c **** 		return;
1733:../Generated_Code/usb_dci_kinetis.c **** 	}
1734:../Generated_Code/usb_dci_kinetis.c **** 
1735:../Generated_Code/usb_dci_kinetis.c **** 	// handle Transaction Complete
1736:../Generated_Code/usb_dci_kinetis.c **** 	if (usbsts & USBHS_USBSTS_UI_MASK){
1737:../Generated_Code/usb_dci_kinetis.c **** 		if (!USBHS_EPSETUPSR && !USBHS_EPCOMPLETE){
1738:../Generated_Code/usb_dci_kinetis.c **** #ifdef USART_DEBUG
1739:../Generated_Code/usb_dci_kinetis.c **** 			printf("Warning: unexpected UI interrupt\n");
1740:../Generated_Code/usb_dci_kinetis.c **** #endif /* USART_DEBUG */
1741:../Generated_Code/usb_dci_kinetis.c **** 		}
1742:../Generated_Code/usb_dci_kinetis.c **** 
1743:../Generated_Code/usb_dci_kinetis.c **** 		// Handle dTD complete interrupt.
1744:../Generated_Code/usb_dci_kinetis.c **** 		// Must process EP complete events first, because setup complete events
1745:../Generated_Code/usb_dci_kinetis.c **** 		// trigger stack to re-prime endpoints.
1746:../Generated_Code/usb_dci_kinetis.c **** 		if(USBHS_EPCOMPLETE)
1747:../Generated_Code/usb_dci_kinetis.c **** 			usbd_ep_complete_handler(&event);
1748:../Generated_Code/usb_dci_kinetis.c **** 
1749:../Generated_Code/usb_dci_kinetis.c **** 		// Handle setup compete packet interrupt
1750:../Generated_Code/usb_dci_kinetis.c **** 		if(USBHS_EPSETUPSR & USBHS_EPSETUPSR_EPSETUPSTAT(1))
1751:../Generated_Code/usb_dci_kinetis.c **** 			usbd_setup_packet_handler(&event);
1752:../Generated_Code/usb_dci_kinetis.c **** 
1753:../Generated_Code/usb_dci_kinetis.c **** 		//
1754:../Generated_Code/usb_dci_kinetis.c **** 		if( (USBHS_EPSETUPSR & USBHS_EPSETUPSR_EPSETUPSTAT(2))||
1755:../Generated_Code/usb_dci_kinetis.c **** 				(USBHS_EPSETUPSR & USBHS_EPSETUPSR_EPSETUPSTAT(4))||
1756:../Generated_Code/usb_dci_kinetis.c **** 				(USBHS_EPSETUPSR & USBHS_EPSETUPSR_EPSETUPSTAT(8))){
1757:../Generated_Code/usb_dci_kinetis.c **** #if USART_DEBUG
1758:../Generated_Code/usb_dci_kinetis.c **** 			printf("");
1759:../Generated_Code/usb_dci_kinetis.c **** #endif /* USART_DEBUG */
1760:../Generated_Code/usb_dci_kinetis.c **** 		}
1761:../Generated_Code/usb_dci_kinetis.c **** 	}
1762:../Generated_Code/usb_dci_kinetis.c **** 
1763:../Generated_Code/usb_dci_kinetis.c **** 	// handle Port Change
1764:../Generated_Code/usb_dci_kinetis.c **** 	if (usbsts & USBHS_USBSTS_PCI_MASK){
1765:../Generated_Code/usb_dci_kinetis.c **** 		usbd_port_change(&event);
1766:../Generated_Code/usb_dci_kinetis.c **** 	}
1767:../Generated_Code/usb_dci_kinetis.c **** 
1768:../Generated_Code/usb_dci_kinetis.c **** 	// handle USB Error
1769:../Generated_Code/usb_dci_kinetis.c **** 	if (usbsts & USBHS_USBSTS_UEI_MASK){
1770:../Generated_Code/usb_dci_kinetis.c **** #ifdef USART_DEBUG
1771:../Generated_Code/usb_dci_kinetis.c **** 		printf("USBHS: Error\n");
1772:../Generated_Code/usb_dci_kinetis.c **** #endif
1773:../Generated_Code/usb_dci_kinetis.c **** 		// Notify Device Layer of ERROR Event to error service
1774:../Generated_Code/usb_dci_kinetis.c **** 		(void)USB_Device_Call_Service(USB_SERVICE_ERROR, &event);
1775:../Generated_Code/usb_dci_kinetis.c **** 	}
1776:../Generated_Code/usb_dci_kinetis.c **** 
1777:../Generated_Code/usb_dci_kinetis.c **** 	// handle USB System Error
1778:../Generated_Code/usb_dci_kinetis.c **** 	if (usbsts & USBHS_USBSTS_SEI_MASK){
1779:../Generated_Code/usb_dci_kinetis.c **** #ifdef USART_DEBUG
1780:../Generated_Code/usb_dci_kinetis.c **** 		printf("USBHS: System Error\n");
1781:../Generated_Code/usb_dci_kinetis.c **** #endif
1782:../Generated_Code/usb_dci_kinetis.c **** 		// Notify Device Layer of ERROR Event to error service
1783:../Generated_Code/usb_dci_kinetis.c **** 		(void)USB_Device_Call_Service(USB_SERVICE_ERROR, &event);
1784:../Generated_Code/usb_dci_kinetis.c **** 	}
1785:../Generated_Code/usb_dci_kinetis.c **** 
1786:../Generated_Code/usb_dci_kinetis.c **** }
1787:../Generated_Code/usb_dci_kinetis.c **** #endif	// HIGH_SPEED_DEVICE
1788:../Generated_Code/usb_dci_kinetis.c **** 
1789:../Generated_Code/usb_dci_kinetis.c **** /**************************************************************************//*!
1790:../Generated_Code/usb_dci_kinetis.c ****  *
1791:../Generated_Code/usb_dci_kinetis.c ****  * @name  USB_ISR
1792:../Generated_Code/usb_dci_kinetis.c ****  *
1793:../Generated_Code/usb_dci_kinetis.c ****  * @brief The function handles USB interrupts on the bus.
1794:../Generated_Code/usb_dci_kinetis.c ****  *
1795:../Generated_Code/usb_dci_kinetis.c ****  * @param None
1796:../Generated_Code/usb_dci_kinetis.c ****  *
1797:../Generated_Code/usb_dci_kinetis.c ****  * @return None
1798:../Generated_Code/usb_dci_kinetis.c ****  *
1799:../Generated_Code/usb_dci_kinetis.c ****  ******************************************************************************
1800:../Generated_Code/usb_dci_kinetis.c ****  * This function is hooked onto interrupt 69 and handles the USB interrupts.
1801:../Generated_Code/usb_dci_kinetis.c ****  * After handling the interrupt it calls the Device Layer to notify it about
1802:../Generated_Code/usb_dci_kinetis.c ****  * the event.
1803:../Generated_Code/usb_dci_kinetis.c ****  *****************************************************************************/
1804:../Generated_Code/usb_dci_kinetis.c **** #if !HIGH_SPEED_DEVICE
1805:../Generated_Code/usb_dci_kinetis.c **** void USB_ISR(void)
1806:../Generated_Code/usb_dci_kinetis.c **** {
 2739              		.loc 1 1806 0
 2740              		.cfi_startproc
 2741              		@ args = 0, pretend = 0, frame = 32
 2742              		@ frame_needed = 1, uses_anonymous_args = 0
 2743 0000 80B5     		push	{r7, lr}
 2744              		.cfi_def_cfa_offset 8
 2745              		.cfi_offset 7, -8
 2746              		.cfi_offset 14, -4
 2747 0002 88B0     		sub	sp, sp, #32
 2748              		.cfi_def_cfa_offset 40
 2749 0004 00AF     		add	r7, sp, #0
 2750              		.cfi_def_cfa_register 7
1807:../Generated_Code/usb_dci_kinetis.c ****     /* Which interrupt occured and also was enabled */
1808:../Generated_Code/usb_dci_kinetis.c **** 	uint_8 v1 = USB0_ISTAT;
 2751              		.loc 1 1808 0
 2752 0006 A54B     		ldr	r3, .L140
 2753 0008 93F88030 		ldrb	r3, [r3, #128]
 2754 000c FB77     		strb	r3, [r7, #31]
1809:../Generated_Code/usb_dci_kinetis.c **** 	uint_8 v2 = USB0_INTEN;
 2755              		.loc 1 1809 0
 2756 000e A34B     		ldr	r3, .L140
 2757 0010 93F88430 		ldrb	r3, [r3, #132]
 2758 0014 BB77     		strb	r3, [r7, #30]
1810:../Generated_Code/usb_dci_kinetis.c ****     uint_8 intr_stat = (uint_8)(v1 & v2);
 2759              		.loc 1 1810 0
 2760 0016 FA7F     		ldrb	r2, [r7, #31]
 2761 0018 BB7F     		ldrb	r3, [r7, #30]
 2762 001a 1340     		ands	r3, r3, r2
 2763 001c 7B77     		strb	r3, [r7, #29]
1811:../Generated_Code/usb_dci_kinetis.c ****     uint_8 stat = (uint_8)USB0_STAT;
 2764              		.loc 1 1811 0
 2765 001e 9F4B     		ldr	r3, .L140
 2766 0020 93F89030 		ldrb	r3, [r3, #144]
 2767 0024 3B77     		strb	r3, [r7, #28]
1812:../Generated_Code/usb_dci_kinetis.c ****     USB_DEV_EVENT_STRUCT event;
1813:../Generated_Code/usb_dci_kinetis.c ****     uint_8 dev_state = USB_STATUS_UNKNOWN;
 2768              		.loc 1 1813 0
 2769 0026 FF23     		movs	r3, #255
 2770 0028 FB71     		strb	r3, [r7, #7]
1814:../Generated_Code/usb_dci_kinetis.c **** 
1815:../Generated_Code/usb_dci_kinetis.c ****     /* initialize event structure */
1816:../Generated_Code/usb_dci_kinetis.c ****     event.controller_ID = g_dci_controller_Id;
 2771              		.loc 1 1816 0
 2772 002a 9D4B     		ldr	r3, .L140+4
 2773 002c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2774 002e 3B72     		strb	r3, [r7, #8]
1817:../Generated_Code/usb_dci_kinetis.c ****     event.setup = FALSE;
 2775              		.loc 1 1817 0
 2776 0030 0023     		movs	r3, #0
 2777 0032 BB72     		strb	r3, [r7, #10]
1818:../Generated_Code/usb_dci_kinetis.c ****     event.buffer_ptr = NULL;
 2778              		.loc 1 1818 0
 2779 0034 0023     		movs	r3, #0
 2780 0036 FB60     		str	r3, [r7, #12]
1819:../Generated_Code/usb_dci_kinetis.c ****     event.len = 0;
 2781              		.loc 1 1819 0
 2782 0038 3B69     		ldr	r3, [r7, #16]
 2783 003a 6FF31723 		bfc	r3, #8, #16
 2784 003e 3B61     		str	r3, [r7, #16]
1820:../Generated_Code/usb_dci_kinetis.c ****     event.direction = USB_RECV;
 2785              		.loc 1 1820 0
 2786 0040 0023     		movs	r3, #0
 2787 0042 FB72     		strb	r3, [r7, #11]
1821:../Generated_Code/usb_dci_kinetis.c ****     event.errors = NO_ERRORS;
 2788              		.loc 1 1821 0
 2789 0044 0023     		movs	r3, #0
 2790 0046 3B74     		strb	r3, [r7, #16]
1822:../Generated_Code/usb_dci_kinetis.c **** 
1823:../Generated_Code/usb_dci_kinetis.c ****     event.ep_num = (uint_8)UNINITIALISED_VAL;
 2791              		.loc 1 1823 0
 2792 0048 FF23     		movs	r3, #255
 2793 004a 7B72     		strb	r3, [r7, #9]
1824:../Generated_Code/usb_dci_kinetis.c **** 
1825:../Generated_Code/usb_dci_kinetis.c ****     /* Get the device state from the Device Layer */
1826:../Generated_Code/usb_dci_kinetis.c ****     (void)_usb_device_get_status(&g_dci_controller_Id, USB_STATUS_DEVICE_STATE,
 2794              		.loc 1 1826 0
 2795 004c FB1D     		adds	r3, r7, #7
 2796 004e 9448     		ldr	r0, .L140+4
 2797 0050 0121     		movs	r1, #1
 2798 0052 1A46     		mov	r2, r3
 2799 0054 FFF7FEFF 		bl	_usb_device_get_status
1827:../Generated_Code/usb_dci_kinetis.c ****         &dev_state);
1828:../Generated_Code/usb_dci_kinetis.c **** 
1829:../Generated_Code/usb_dci_kinetis.c ****     /* if current device state is SUSPEND and Low Power Resume Flag set */
1830:../Generated_Code/usb_dci_kinetis.c ****     if((USB0_USBTRC0 & USB_USBTRC0_USB_RESUME_INT_MASK) && (dev_state == USB_STATE_SUSPEND))
 2800              		.loc 1 1830 0
 2801 0058 904B     		ldr	r3, .L140
 2802 005a 93F80C31 		ldrb	r3, [r3, #268]
 2803 005e DBB2     		uxtb	r3, r3
 2804 0060 03F00103 		and	r3, r3, #1
 2805 0064 002B     		cmp	r3, #0
 2806 0066 16D0     		beq	.L129
 2807              		.loc 1 1830 0 is_stmt 0 discriminator 1
 2808 0068 FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 2809 006a 802B     		cmp	r3, #128
 2810 006c 13D1     		bne	.L129
1831:../Generated_Code/usb_dci_kinetis.c ****     {
1832:../Generated_Code/usb_dci_kinetis.c ****         /* Clear SUSP Bit from USB_CTRL */
1833:../Generated_Code/usb_dci_kinetis.c ****     	USB0_USBCTRL &= ~USB_USBCTRL_SUSP_MASK;
 2811              		.loc 1 1833 0 is_stmt 1
 2812 006e 8B4B     		ldr	r3, .L140
 2813 0070 8A4A     		ldr	r2, .L140
 2814 0072 92F80021 		ldrb	r2, [r2, #256]
 2815 0076 D2B2     		uxtb	r2, r2
 2816 0078 02F07F02 		and	r2, r2, #127
 2817 007c D2B2     		uxtb	r2, r2
 2818 007e 83F80021 		strb	r2, [r3, #256]
1834:../Generated_Code/usb_dci_kinetis.c **** 
1835:../Generated_Code/usb_dci_kinetis.c ****         /* Reset Low Power RESUME enable */
1836:../Generated_Code/usb_dci_kinetis.c ****         USB0_USBTRC0 &= ~USB_USBTRC0_USBRESMEN_MASK;
 2819              		.loc 1 1836 0
 2820 0082 864B     		ldr	r3, .L140
 2821 0084 854A     		ldr	r2, .L140
 2822 0086 92F80C21 		ldrb	r2, [r2, #268]
 2823 008a D2B2     		uxtb	r2, r2
 2824 008c 22F02002 		bic	r2, r2, #32
 2825 0090 D2B2     		uxtb	r2, r2
 2826 0092 83F80C21 		strb	r2, [r3, #268]
 2827              	.L129:
1837:../Generated_Code/usb_dci_kinetis.c ****     }
1838:../Generated_Code/usb_dci_kinetis.c **** 
1839:../Generated_Code/usb_dci_kinetis.c ****     /* SOF received */
1840:../Generated_Code/usb_dci_kinetis.c ****     if(SOF_TOKEN_FLAG(intr_stat))
 2828              		.loc 1 1840 0
 2829 0096 7B7F     		ldrb	r3, [r7, #29]	@ zero_extendqisi2
 2830 0098 03F00403 		and	r3, r3, #4
 2831 009c 002B     		cmp	r3, #0
 2832 009e 21D0     		beq	.L130
 2833              	.LBB9:
1841:../Generated_Code/usb_dci_kinetis.c ****     {
1842:../Generated_Code/usb_dci_kinetis.c ****         uint_16 sof_count;
1843:../Generated_Code/usb_dci_kinetis.c **** 		uint_16 tmp1, tmp2, tmp3;
1844:../Generated_Code/usb_dci_kinetis.c **** 		tmp1 = USB0_FRMNUMH;
 2834              		.loc 1 1844 0
 2835 00a0 7E4B     		ldr	r3, .L140
 2836 00a2 93F8A430 		ldrb	r3, [r3, #164]
 2837 00a6 DBB2     		uxtb	r3, r3
 2838 00a8 7B83     		strh	r3, [r7, #26]	@ movhi
1845:../Generated_Code/usb_dci_kinetis.c **** 		tmp2 = FRAME_HIGH_BYTE_SHIFT;
 2839              		.loc 1 1845 0
 2840 00aa 0823     		movs	r3, #8
 2841 00ac 3B83     		strh	r3, [r7, #24]	@ movhi
1846:../Generated_Code/usb_dci_kinetis.c **** 		tmp3 = USB0_FRMNUML;
 2842              		.loc 1 1846 0
 2843 00ae 7B4B     		ldr	r3, .L140
 2844 00b0 93F8A030 		ldrb	r3, [r3, #160]
 2845 00b4 DBB2     		uxtb	r3, r3
 2846 00b6 FB82     		strh	r3, [r7, #22]	@ movhi
1847:../Generated_Code/usb_dci_kinetis.c ****         /* Clear SOF Interrupt */
1848:../Generated_Code/usb_dci_kinetis.c ****         USB0_ISTAT = USB_ISTAT_SOFTOK_MASK;
 2847              		.loc 1 1848 0
 2848 00b8 784B     		ldr	r3, .L140
 2849 00ba 0422     		movs	r2, #4
 2850 00bc 83F88020 		strb	r2, [r3, #128]
1849:../Generated_Code/usb_dci_kinetis.c ****         sof_count = (uint_16)((tmp1 << tmp2) | tmp3);
 2851              		.loc 1 1849 0
 2852 00c0 7A8B     		ldrh	r2, [r7, #26]
 2853 00c2 3B8B     		ldrh	r3, [r7, #24]
 2854 00c4 02FA03F3 		lsl	r3, r2, r3
 2855 00c8 9AB2     		uxth	r2, r3
 2856 00ca FB8A     		ldrh	r3, [r7, #22]
 2857 00cc 1343     		orrs	r3, r3, r2
 2858 00ce 9BB2     		uxth	r3, r3
 2859 00d0 9BB2     		uxth	r3, r3
 2860 00d2 BB80     		strh	r3, [r7, #4]	@ movhi
1850:../Generated_Code/usb_dci_kinetis.c ****         /*address of Lower byte of Frame number*/
1851:../Generated_Code/usb_dci_kinetis.c ****         event.buffer_ptr = (uint_8_ptr)(&sof_count);
 2861              		.loc 1 1851 0
 2862 00d4 3B1D     		adds	r3, r7, #4
 2863 00d6 FB60     		str	r3, [r7, #12]
1852:../Generated_Code/usb_dci_kinetis.c ****         /* Notify Device Layer of SOF Event */
1853:../Generated_Code/usb_dci_kinetis.c ****         (void)USB_Device_Call_Service(USB_SERVICE_SOF, &event);
 2864              		.loc 1 1853 0
 2865 00d8 07F10803 		add	r3, r7, #8
 2866 00dc 1220     		movs	r0, #18
 2867 00de 1946     		mov	r1, r3
 2868 00e0 FFF7FEFF 		bl	USB_Device_Call_Service
 2869              	.L130:
 2870              	.LBE9:
1854:../Generated_Code/usb_dci_kinetis.c **** 
1855:../Generated_Code/usb_dci_kinetis.c **** #ifdef USE_FEEDBACK_ENDPOINT
1856:../Generated_Code/usb_dci_kinetis.c ****         // set feedback rate info number
1857:../Generated_Code/usb_dci_kinetis.c ****         if(gNrSamples!=0)
1858:../Generated_Code/usb_dci_kinetis.c ****         	feedback_data = gNrSamples;
1859:../Generated_Code/usb_dci_kinetis.c ****         gNrSamples = 0;
1860:../Generated_Code/usb_dci_kinetis.c **** #endif
1861:../Generated_Code/usb_dci_kinetis.c ****     }
1862:../Generated_Code/usb_dci_kinetis.c **** 
1863:../Generated_Code/usb_dci_kinetis.c ****     if(BUS_RESET_FLAG(intr_stat))
 2871              		.loc 1 1863 0
 2872 00e4 7B7F     		ldrb	r3, [r7, #29]	@ zero_extendqisi2
 2873 00e6 03F00103 		and	r3, r3, #1
 2874 00ea 002B     		cmp	r3, #0
 2875 00ec 16D0     		beq	.L131
1864:../Generated_Code/usb_dci_kinetis.c ****     {
1865:../Generated_Code/usb_dci_kinetis.c ****         /* Clear Reset Flag */
1866:../Generated_Code/usb_dci_kinetis.c ****     	USB0_ISTAT = USB_ISTAT_USBRST_MASK;
 2876              		.loc 1 1866 0
 2877 00ee 6B4B     		ldr	r3, .L140
 2878 00f0 0122     		movs	r2, #1
 2879 00f2 83F88020 		strb	r2, [r3, #128]
1867:../Generated_Code/usb_dci_kinetis.c **** 
1868:../Generated_Code/usb_dci_kinetis.c ****         /* Handle RESET Interrupt */
1869:../Generated_Code/usb_dci_kinetis.c ****         USB_Bus_Reset_Handler();
 2880              		.loc 1 1869 0
 2881 00f6 FFF7FEFF 		bl	USB_Bus_Reset_Handler
1870:../Generated_Code/usb_dci_kinetis.c **** 
1871:../Generated_Code/usb_dci_kinetis.c ****         /* Notify Device Layer of RESET Event */
1872:../Generated_Code/usb_dci_kinetis.c ****         (void)USB_Device_Call_Service(USB_SERVICE_BUS_RESET, &event);
 2882              		.loc 1 1872 0
 2883 00fa 07F10803 		add	r3, r7, #8
 2884 00fe 1020     		movs	r0, #16
 2885 0100 1946     		mov	r1, r3
 2886 0102 FFF7FEFF 		bl	USB_Device_Call_Service
1873:../Generated_Code/usb_dci_kinetis.c **** 
1874:../Generated_Code/usb_dci_kinetis.c ****         /* Clearing this bit allows the SIE to continue token processing
1875:../Generated_Code/usb_dci_kinetis.c ****            and clear suspend condition */
1876:../Generated_Code/usb_dci_kinetis.c ****         USB0_CTL &= ~USB_CTL_TXSUSPENDTOKENBUSY_MASK;
 2887              		.loc 1 1876 0
 2888 0106 654B     		ldr	r3, .L140
 2889 0108 644A     		ldr	r2, .L140
 2890 010a 92F89420 		ldrb	r2, [r2, #148]
 2891 010e D2B2     		uxtb	r2, r2
 2892 0110 22F02002 		bic	r2, r2, #32
 2893 0114 D2B2     		uxtb	r2, r2
 2894 0116 83F89420 		strb	r2, [r3, #148]
1877:../Generated_Code/usb_dci_kinetis.c **** 
1878:../Generated_Code/usb_dci_kinetis.c ****         /* No need to process other interrupts */
1879:../Generated_Code/usb_dci_kinetis.c ****         return;
 2895              		.loc 1 1879 0
 2896 011a BBE0     		b	.L128
 2897              	.L131:
1880:../Generated_Code/usb_dci_kinetis.c ****     }
1881:../Generated_Code/usb_dci_kinetis.c **** 
1882:../Generated_Code/usb_dci_kinetis.c ****     if(TOKEN_COMPL_FLAG(intr_stat))
 2898              		.loc 1 1882 0
 2899 011c 7B7F     		ldrb	r3, [r7, #29]	@ zero_extendqisi2
 2900 011e 03F00803 		and	r3, r3, #8
 2901 0122 002B     		cmp	r3, #0
 2902 0124 18D0     		beq	.L133
1883:../Generated_Code/usb_dci_kinetis.c ****     {
1884:../Generated_Code/usb_dci_kinetis.c ****         /* Clear TOKEN Interrupt */
1885:../Generated_Code/usb_dci_kinetis.c ****     	USB0_ISTAT = USB_ISTAT_TOKDNE_MASK;
 2903              		.loc 1 1885 0
 2904 0126 5D4B     		ldr	r3, .L140
 2905 0128 0822     		movs	r2, #8
 2906 012a 83F88020 		strb	r2, [r3, #128]
1886:../Generated_Code/usb_dci_kinetis.c **** 
1887:../Generated_Code/usb_dci_kinetis.c ****         event.ep_num = (uint_8)((stat & ENDPOINT_NUMBER_MASK) >>
 2907              		.loc 1 1887 0
 2908 012e 3B7F     		ldrb	r3, [r7, #28]	@ zero_extendqisi2
 2909 0130 1B09     		lsrs	r3, r3, #4
 2910 0132 DBB2     		uxtb	r3, r3
 2911 0134 7B72     		strb	r3, [r7, #9]
1888:../Generated_Code/usb_dci_kinetis.c ****             ENDPOINT_NUMBER_SHIFT);
1889:../Generated_Code/usb_dci_kinetis.c **** 
1890:../Generated_Code/usb_dci_kinetis.c ****         USB_Bus_Token_Cpl_Handler(stat, &event);
 2912              		.loc 1 1890 0
 2913 0136 3A7F     		ldrb	r2, [r7, #28]	@ zero_extendqisi2
 2914 0138 07F10803 		add	r3, r7, #8
 2915 013c 1046     		mov	r0, r2
 2916 013e 1946     		mov	r1, r3
 2917 0140 FFF7FEFF 		bl	USB_Bus_Token_Cpl_Handler
1891:../Generated_Code/usb_dci_kinetis.c **** 
1892:../Generated_Code/usb_dci_kinetis.c ****         /* Clearing this bit allows the SIE to continue token processing
1893:../Generated_Code/usb_dci_kinetis.c ****            and clear suspend condition */
1894:../Generated_Code/usb_dci_kinetis.c ****         USB0_CTL &= ~USB_CTL_TXSUSPENDTOKENBUSY_MASK;
 2918              		.loc 1 1894 0
 2919 0144 554B     		ldr	r3, .L140
 2920 0146 554A     		ldr	r2, .L140
 2921 0148 92F89420 		ldrb	r2, [r2, #148]
 2922 014c D2B2     		uxtb	r2, r2
 2923 014e 22F02002 		bic	r2, r2, #32
 2924 0152 D2B2     		uxtb	r2, r2
 2925 0154 83F89420 		strb	r2, [r3, #148]
 2926              	.L133:
1895:../Generated_Code/usb_dci_kinetis.c ****     }
1896:../Generated_Code/usb_dci_kinetis.c **** 
1897:../Generated_Code/usb_dci_kinetis.c ****     if(ERROR_FLAG(intr_stat))
 2927              		.loc 1 1897 0
 2928 0158 7B7F     		ldrb	r3, [r7, #29]	@ zero_extendqisi2
 2929 015a 03F00203 		and	r3, r3, #2
 2930 015e 002B     		cmp	r3, #0
 2931 0160 24D0     		beq	.L134
1898:../Generated_Code/usb_dci_kinetis.c ****     {
1899:../Generated_Code/usb_dci_kinetis.c ****         /* Clear ERROR Interrupt */
1900:../Generated_Code/usb_dci_kinetis.c ****     	USB0_ISTAT = USB_ISTAT_ERROR_MASK;
 2932              		.loc 1 1900 0
 2933 0162 4E4B     		ldr	r3, .L140
 2934 0164 0222     		movs	r2, #2
 2935 0166 83F88020 		strb	r2, [r3, #128]
1901:../Generated_Code/usb_dci_kinetis.c **** 
1902:../Generated_Code/usb_dci_kinetis.c **** 		v1 = USB0_ERRSTAT;
 2936              		.loc 1 1902 0
 2937 016a 4C4B     		ldr	r3, .L140
 2938 016c 93F88830 		ldrb	r3, [r3, #136]
 2939 0170 FB77     		strb	r3, [r7, #31]
1903:../Generated_Code/usb_dci_kinetis.c **** 		v2 = USB0_ERREN;
 2940              		.loc 1 1903 0
 2941 0172 4A4B     		ldr	r3, .L140
 2942 0174 93F88C30 		ldrb	r3, [r3, #140]
 2943 0178 BB77     		strb	r3, [r7, #30]
1904:../Generated_Code/usb_dci_kinetis.c ****         event.errors = (uint_8)(v1 & v2);
 2944              		.loc 1 1904 0
 2945 017a FA7F     		ldrb	r2, [r7, #31]
 2946 017c BB7F     		ldrb	r3, [r7, #30]
 2947 017e 1340     		ands	r3, r3, r2
 2948 0180 DBB2     		uxtb	r3, r3
 2949 0182 3B74     		strb	r3, [r7, #16]
1905:../Generated_Code/usb_dci_kinetis.c **** 
1906:../Generated_Code/usb_dci_kinetis.c ****         /* Notify Device Layer of ERROR Event to error service */
1907:../Generated_Code/usb_dci_kinetis.c ****        (void)USB_Device_Call_Service(USB_SERVICE_ERROR, &event);
 2950              		.loc 1 1907 0
 2951 0184 07F10803 		add	r3, r7, #8
 2952 0188 1620     		movs	r0, #22
 2953 018a 1946     		mov	r1, r3
 2954 018c FFF7FEFF 		bl	USB_Device_Call_Service
1908:../Generated_Code/usb_dci_kinetis.c **** 
1909:../Generated_Code/usb_dci_kinetis.c ****        USB0_ERRSTAT = ERR_STAT_CLEAR_ALL;  /*clear all errors*/
 2955              		.loc 1 1909 0
 2956 0190 424B     		ldr	r3, .L140
 2957 0192 BF22     		movs	r2, #191
 2958 0194 83F88820 		strb	r2, [r3, #136]
1910:../Generated_Code/usb_dci_kinetis.c ****         /* Clearing this bit allows the SIE to continue token processing
1911:../Generated_Code/usb_dci_kinetis.c ****            and clear suspend condition */
1912:../Generated_Code/usb_dci_kinetis.c ****        USB0_CTL &= ~USB_CTL_TXSUSPENDTOKENBUSY_MASK;
 2959              		.loc 1 1912 0
 2960 0198 404B     		ldr	r3, .L140
 2961 019a 404A     		ldr	r2, .L140
 2962 019c 92F89420 		ldrb	r2, [r2, #148]
 2963 01a0 D2B2     		uxtb	r2, r2
 2964 01a2 22F02002 		bic	r2, r2, #32
 2965 01a6 D2B2     		uxtb	r2, r2
 2966 01a8 83F89420 		strb	r2, [r3, #148]
 2967              	.L134:
1913:../Generated_Code/usb_dci_kinetis.c ****     }
1914:../Generated_Code/usb_dci_kinetis.c **** 
1915:../Generated_Code/usb_dci_kinetis.c ****     if(SLEEP_FLAG(intr_stat))
 2968              		.loc 1 1915 0
 2969 01ac 7B7F     		ldrb	r3, [r7, #29]	@ zero_extendqisi2
 2970 01ae 03F01003 		and	r3, r3, #16
 2971 01b2 002B     		cmp	r3, #0
 2972 01b4 2BD0     		beq	.L135
1916:../Generated_Code/usb_dci_kinetis.c ****     {
1917:../Generated_Code/usb_dci_kinetis.c ****         /* Clear RESUME Interrupt if Pending */
1918:../Generated_Code/usb_dci_kinetis.c ****     	USB0_ISTAT = USB_ISTAT_RESUME_MASK;
 2973              		.loc 1 1918 0
 2974 01b6 394B     		ldr	r3, .L140
 2975 01b8 2022     		movs	r2, #32
 2976 01ba 83F88020 		strb	r2, [r3, #128]
1919:../Generated_Code/usb_dci_kinetis.c **** 
1920:../Generated_Code/usb_dci_kinetis.c ****         /* Clear SLEEP Interrupt */
1921:../Generated_Code/usb_dci_kinetis.c ****     	USB0_ISTAT = USB_ISTAT_SLEEP_MASK;
 2977              		.loc 1 1921 0
 2978 01be 374B     		ldr	r3, .L140
 2979 01c0 1022     		movs	r2, #16
 2980 01c2 83F88020 		strb	r2, [r3, #128]
1922:../Generated_Code/usb_dci_kinetis.c **** 
1923:../Generated_Code/usb_dci_kinetis.c ****         /* Notify Device Layer of SLEEP Event */
1924:../Generated_Code/usb_dci_kinetis.c ****         (void)USB_Device_Call_Service(USB_SERVICE_SLEEP, &event);
 2981              		.loc 1 1924 0
 2982 01c6 07F10803 		add	r3, r7, #8
 2983 01ca 1420     		movs	r0, #20
 2984 01cc 1946     		mov	r1, r3
 2985 01ce FFF7FEFF 		bl	USB_Device_Call_Service
1925:../Generated_Code/usb_dci_kinetis.c **** 
1926:../Generated_Code/usb_dci_kinetis.c ****         /* Set Low Power RESUME enable */
1927:../Generated_Code/usb_dci_kinetis.c ****         USB0_USBTRC0 |= USB_USBTRC0_USBRESMEN_MASK;
 2986              		.loc 1 1927 0
 2987 01d2 324B     		ldr	r3, .L140
 2988 01d4 314A     		ldr	r2, .L140
 2989 01d6 92F80C21 		ldrb	r2, [r2, #268]
 2990 01da D2B2     		uxtb	r2, r2
 2991 01dc 42F02002 		orr	r2, r2, #32
 2992 01e0 D2B2     		uxtb	r2, r2
 2993 01e2 83F80C21 		strb	r2, [r3, #268]
1928:../Generated_Code/usb_dci_kinetis.c **** 
1929:../Generated_Code/usb_dci_kinetis.c ****         /* Set SUSP Bit in USB_CTRL */
1930:../Generated_Code/usb_dci_kinetis.c ****         USB0_USBCTRL |= USB_USBCTRL_SUSP_MASK;
 2994              		.loc 1 1930 0
 2995 01e6 2D4B     		ldr	r3, .L140
 2996 01e8 2C4A     		ldr	r2, .L140
 2997 01ea 92F80021 		ldrb	r2, [r2, #256]
 2998 01ee D2B2     		uxtb	r2, r2
 2999 01f0 62F07F02 		orn	r2, r2, #127
 3000 01f4 D2B2     		uxtb	r2, r2
 3001 01f6 83F80021 		strb	r2, [r3, #256]
1931:../Generated_Code/usb_dci_kinetis.c **** 
1932:../Generated_Code/usb_dci_kinetis.c ****         /* Enable RESUME Interrupt */
1933:../Generated_Code/usb_dci_kinetis.c ****         USB0_INTEN |= USB_INTEN_RESUMEEN_MASK;
 3002              		.loc 1 1933 0
 3003 01fa 284B     		ldr	r3, .L140
 3004 01fc 274A     		ldr	r2, .L140
 3005 01fe 92F88420 		ldrb	r2, [r2, #132]
 3006 0202 D2B2     		uxtb	r2, r2
 3007 0204 42F02002 		orr	r2, r2, #32
 3008 0208 D2B2     		uxtb	r2, r2
 3009 020a 83F88420 		strb	r2, [r3, #132]
 3010              	.L135:
1934:../Generated_Code/usb_dci_kinetis.c **** #ifdef USB_LOWPOWERMODE
1935:../Generated_Code/usb_dci_kinetis.c ****         /* Enter Stop3 Mode*/
1936:../Generated_Code/usb_dci_kinetis.c ****         Enter_StopMode(STOP_MODE3);
1937:../Generated_Code/usb_dci_kinetis.c **** #endif
1938:../Generated_Code/usb_dci_kinetis.c ****     }
1939:../Generated_Code/usb_dci_kinetis.c **** 
1940:../Generated_Code/usb_dci_kinetis.c ****     if(RESUME_FLAG(intr_stat))
 3011              		.loc 1 1940 0
 3012 020e 7B7F     		ldrb	r3, [r7, #29]	@ zero_extendqisi2
 3013 0210 03F02003 		and	r3, r3, #32
 3014 0214 002B     		cmp	r3, #0
 3015 0216 13D0     		beq	.L136
1941:../Generated_Code/usb_dci_kinetis.c ****     {
1942:../Generated_Code/usb_dci_kinetis.c ****         /* Clear RESUME Interrupt */
1943:../Generated_Code/usb_dci_kinetis.c ****     	USB0_ISTAT = USB_ISTAT_RESUME_MASK;
 3016              		.loc 1 1943 0
 3017 0218 204B     		ldr	r3, .L140
 3018 021a 2022     		movs	r2, #32
 3019 021c 83F88020 		strb	r2, [r3, #128]
1944:../Generated_Code/usb_dci_kinetis.c **** 
1945:../Generated_Code/usb_dci_kinetis.c ****         /* Notify Device Layer of RESUME Event */
1946:../Generated_Code/usb_dci_kinetis.c ****         (void)USB_Device_Call_Service(USB_SERVICE_RESUME, &event);
 3020              		.loc 1 1946 0
 3021 0220 07F10803 		add	r3, r7, #8
 3022 0224 1320     		movs	r0, #19
 3023 0226 1946     		mov	r1, r3
 3024 0228 FFF7FEFF 		bl	USB_Device_Call_Service
1947:../Generated_Code/usb_dci_kinetis.c **** 
1948:../Generated_Code/usb_dci_kinetis.c ****         /* Disable RESUME Interrupt */
1949:../Generated_Code/usb_dci_kinetis.c ****         USB0_INTEN &= ~USB_INTEN_RESUMEEN_MASK;
 3025              		.loc 1 1949 0
 3026 022c 1B4B     		ldr	r3, .L140
 3027 022e 1B4A     		ldr	r2, .L140
 3028 0230 92F88420 		ldrb	r2, [r2, #132]
 3029 0234 D2B2     		uxtb	r2, r2
 3030 0236 22F02002 		bic	r2, r2, #32
 3031 023a D2B2     		uxtb	r2, r2
 3032 023c 83F88420 		strb	r2, [r3, #132]
 3033              	.L136:
1950:../Generated_Code/usb_dci_kinetis.c ****     }
1951:../Generated_Code/usb_dci_kinetis.c **** 
1952:../Generated_Code/usb_dci_kinetis.c ****     if(STALL_FLAG(intr_stat))
 3034              		.loc 1 1952 0
 3035 0240 7B7F     		ldrb	r3, [r7, #29]	@ zero_extendqisi2
 3036 0242 5BB2     		sxtb	r3, r3
 3037 0244 002B     		cmp	r3, #0
 3038 0246 24DA     		bge	.L137
 3039              	.LBB10:
1953:../Generated_Code/usb_dci_kinetis.c ****     {
1954:../Generated_Code/usb_dci_kinetis.c ****         uint_8 endp_status;
1955:../Generated_Code/usb_dci_kinetis.c ****         event.ep_num = (uint_8)UNINITIALISED_VAL;
 3040              		.loc 1 1955 0
 3041 0248 FF23     		movs	r3, #255
 3042 024a 7B72     		strb	r3, [r7, #9]
1956:../Generated_Code/usb_dci_kinetis.c **** 
1957:../Generated_Code/usb_dci_kinetis.c ****         /* If Control Endpoint is stalled then unstall it.
1958:../Generated_Code/usb_dci_kinetis.c ****         For other endpoints host issues clear endpoint feature request
1959:../Generated_Code/usb_dci_kinetis.c ****         to unstall them */
1960:../Generated_Code/usb_dci_kinetis.c **** 
1961:../Generated_Code/usb_dci_kinetis.c ****         /* Get Control Endpoint Status*/
1962:../Generated_Code/usb_dci_kinetis.c ****         (void)_usb_device_get_status(&(event.controller_ID),
 3043              		.loc 1 1962 0
 3044 024c 07F10802 		add	r2, r7, #8
 3045 0250 FB1C     		adds	r3, r7, #3
 3046 0252 1046     		mov	r0, r2
 3047 0254 1021     		movs	r1, #16
 3048 0256 1A46     		mov	r2, r3
 3049 0258 FFF7FEFF 		bl	_usb_device_get_status
1963:../Generated_Code/usb_dci_kinetis.c ****             (USB_STATUS_ENDPOINT|CONTROL_ENDPOINT),
1964:../Generated_Code/usb_dci_kinetis.c ****             &endp_status);
1965:../Generated_Code/usb_dci_kinetis.c ****         if(endp_status == USB_STATUS_STALLED)
 3050              		.loc 1 1965 0
 3051 025c FB78     		ldrb	r3, [r7, #3]	@ zero_extendqisi2
 3052 025e 012B     		cmp	r3, #1
 3053 0260 03D1     		bne	.L138
1966:../Generated_Code/usb_dci_kinetis.c ****         {
1967:../Generated_Code/usb_dci_kinetis.c ****             event.ep_num = CONTROL_ENDPOINT;
 3054              		.loc 1 1967 0
 3055 0262 0023     		movs	r3, #0
 3056 0264 7B72     		strb	r3, [r7, #9]
1968:../Generated_Code/usb_dci_kinetis.c ****             event.direction = USB_SEND;
 3057              		.loc 1 1968 0
 3058 0266 0123     		movs	r3, #1
 3059 0268 FB72     		strb	r3, [r7, #11]
 3060              	.L138:
1969:../Generated_Code/usb_dci_kinetis.c ****         }
1970:../Generated_Code/usb_dci_kinetis.c **** 
1971:../Generated_Code/usb_dci_kinetis.c ****         /* Clear STALL Interrupt */
1972:../Generated_Code/usb_dci_kinetis.c ****         USB0_ISTAT = USB_ISTAT_STALL_MASK;
 3061              		.loc 1 1972 0
 3062 026a 0C4B     		ldr	r3, .L140
 3063 026c 8022     		movs	r2, #128
 3064 026e 83F88020 		strb	r2, [r3, #128]
1973:../Generated_Code/usb_dci_kinetis.c **** 
1974:../Generated_Code/usb_dci_kinetis.c ****         /* Notify Device Layer of STALL Event */
1975:../Generated_Code/usb_dci_kinetis.c ****         (void)USB_Device_Call_Service(USB_SERVICE_STALL, &event);
 3065              		.loc 1 1975 0
 3066 0272 07F10803 		add	r3, r7, #8
 3067 0276 1720     		movs	r0, #23
 3068 0278 1946     		mov	r1, r3
 3069 027a FFF7FEFF 		bl	USB_Device_Call_Service
1976:../Generated_Code/usb_dci_kinetis.c **** 
1977:../Generated_Code/usb_dci_kinetis.c ****         /* Clearing this bit allows the SIE to continue token processing
1978:../Generated_Code/usb_dci_kinetis.c ****            and clear suspend condition */
1979:../Generated_Code/usb_dci_kinetis.c ****         USB0_CTL &= ~USB_CTL_TXSUSPENDTOKENBUSY_MASK;
 3070              		.loc 1 1979 0
 3071 027e 074B     		ldr	r3, .L140
 3072 0280 064A     		ldr	r2, .L140
 3073 0282 92F89420 		ldrb	r2, [r2, #148]
 3074 0286 D2B2     		uxtb	r2, r2
 3075 0288 22F02002 		bic	r2, r2, #32
 3076 028c D2B2     		uxtb	r2, r2
 3077 028e 83F89420 		strb	r2, [r3, #148]
 3078              	.L137:
 3079              	.LBE10:
1980:../Generated_Code/usb_dci_kinetis.c ****     }
1981:../Generated_Code/usb_dci_kinetis.c ****     return;
 3080              		.loc 1 1981 0
 3081 0292 00BF     		nop
 3082              	.L128:
1982:../Generated_Code/usb_dci_kinetis.c **** }
 3083              		.loc 1 1982 0
 3084 0294 2037     		adds	r7, r7, #32
 3085 0296 BD46     		mov	sp, r7
 3086              		@ sp needed
 3087 0298 80BD     		pop	{r7, pc}
 3088              	.L141:
 3089 029a 00BF     		.align	2
 3090              	.L140:
 3091 029c 00200740 		.word	1074208768
 3092 02a0 00000000 		.word	g_dci_controller_Id
 3093              		.cfi_endproc
 3094              	.LFE20:
 3096              		.section	.text.Clear_Mem,"ax",%progbits
 3097              		.align	2
 3098              		.global	Clear_Mem
 3099              		.thumb
 3100              		.thumb_func
 3102              	Clear_Mem:
 3103              	.LFB21:
1983:../Generated_Code/usb_dci_kinetis.c **** #endif // HIGH_SPEED_DEVICE
1984:../Generated_Code/usb_dci_kinetis.c **** 
1985:../Generated_Code/usb_dci_kinetis.c **** /**************************************************************************//*!
1986:../Generated_Code/usb_dci_kinetis.c ****  *
1987:../Generated_Code/usb_dci_kinetis.c ****  * @name  Clear_Mem
1988:../Generated_Code/usb_dci_kinetis.c ****  *
1989:../Generated_Code/usb_dci_kinetis.c ****  * @brief The function clears memory starting from start_addr till count bytes
1990:../Generated_Code/usb_dci_kinetis.c ****  *
1991:../Generated_Code/usb_dci_kinetis.c ****  * @param start_addr : Buffer Start address
1992:../Generated_Code/usb_dci_kinetis.c ****  * @param count      : Count of Bytes
1993:../Generated_Code/usb_dci_kinetis.c ****  * @param val        : Value to be set
1994:../Generated_Code/usb_dci_kinetis.c ****  *
1995:../Generated_Code/usb_dci_kinetis.c ****  * @return None
1996:../Generated_Code/usb_dci_kinetis.c ****  ******************************************************************************
1997:../Generated_Code/usb_dci_kinetis.c ****  * This function is an implementation of memset
1998:../Generated_Code/usb_dci_kinetis.c ****  *****************************************************************************/
1999:../Generated_Code/usb_dci_kinetis.c **** void Clear_Mem (
2000:../Generated_Code/usb_dci_kinetis.c ****     uint_8_ptr start_addr,  /* [OUT] Buffer Start address */
2001:../Generated_Code/usb_dci_kinetis.c ****     uint_32 count,          /* [IN] Count of Bytes */
2002:../Generated_Code/usb_dci_kinetis.c ****     uint_8 val              /* [IN] Value to be set */
2003:../Generated_Code/usb_dci_kinetis.c **** )
2004:../Generated_Code/usb_dci_kinetis.c **** {
 3104              		.loc 1 2004 0
 3105              		.cfi_startproc
 3106              		@ args = 0, pretend = 0, frame = 16
 3107              		@ frame_needed = 1, uses_anonymous_args = 0
 3108 0000 80B5     		push	{r7, lr}
 3109              		.cfi_def_cfa_offset 8
 3110              		.cfi_offset 7, -8
 3111              		.cfi_offset 14, -4
 3112 0002 84B0     		sub	sp, sp, #16
 3113              		.cfi_def_cfa_offset 24
 3114 0004 00AF     		add	r7, sp, #0
 3115              		.cfi_def_cfa_register 7
 3116 0006 F860     		str	r0, [r7, #12]
 3117 0008 B960     		str	r1, [r7, #8]
 3118 000a 1346     		mov	r3, r2
 3119 000c FB71     		strb	r3, [r7, #7]
2005:../Generated_Code/usb_dci_kinetis.c ****     (void)memset(start_addr, val, count);
 3120              		.loc 1 2005 0
 3121 000e FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 3122 0010 F868     		ldr	r0, [r7, #12]
 3123 0012 1946     		mov	r1, r3
 3124 0014 BA68     		ldr	r2, [r7, #8]
 3125 0016 FFF7FEFF 		bl	memset
2006:../Generated_Code/usb_dci_kinetis.c ****     return;
 3126              		.loc 1 2006 0
 3127 001a 00BF     		nop
2007:../Generated_Code/usb_dci_kinetis.c **** }
 3128              		.loc 1 2007 0
 3129 001c 1037     		adds	r7, r7, #16
 3130 001e BD46     		mov	sp, r7
 3131              		@ sp needed
 3132 0020 80BD     		pop	{r7, pc}
 3133              		.cfi_endproc
 3134              	.LFE21:
 3136 0022 00BF     		.text
 3137              	.Letext0:
 3138              		.file 2 "c:\\freescale\\kds_v3\\toolchain\\arm-none-eabi\\include\\machine\\_default_types.h"
 3139              		.file 3 "../Generated_Code/types.h"
 3140              		.file 4 "c:\\freescale\\kds_v3\\toolchain\\arm-none-eabi\\include\\stdint.h"
 3141              		.file 5 "C:/INTRO_HS18/IntroAronAlex/TEAM_Robot/Static_Code/IO_Map/MK22F12.h"
 3142              		.file 6 "../Generated_Code/usb_devapi.h"
 3143              		.file 7 "../Generated_Code/usb_dci_kinetis.h"
 3144              		.file 8 "../Generated_Code/usb_bdt_kinetis.h"
DEFINED SYMBOLS
                            *ABS*:00000000 usb_dci_kinetis.c
                            *COM*:00000400 g_Mem
C:\Users\Aron\AppData\Local\Temp\ccOL3Bur.s:26     .bss.g_bdtmap:00000000 g_bdtmap
C:\Users\Aron\AppData\Local\Temp\ccOL3Bur.s:23     .bss.g_bdtmap:00000000 $d
C:\Users\Aron\AppData\Local\Temp\ccOL3Bur.s:29     .bss.g_bdt_elem:00000000 $d
C:\Users\Aron\AppData\Local\Temp\ccOL3Bur.s:32     .bss.g_bdt_elem:00000000 g_bdt_elem
C:\Users\Aron\AppData\Local\Temp\ccOL3Bur.s:37     .bss.g_dci_controller_Id:00000000 g_dci_controller_Id
C:\Users\Aron\AppData\Local\Temp\ccOL3Bur.s:38     .bss.g_dci_controller_Id:00000000 $d
C:\Users\Aron\AppData\Local\Temp\ccOL3Bur.s:40     .bss.g_bdt_address:00000000 $d
C:\Users\Aron\AppData\Local\Temp\ccOL3Bur.s:43     .bss.g_bdt_address:00000000 g_bdt_address
C:\Users\Aron\AppData\Local\Temp\ccOL3Bur.s:48     .data.g_trf_direction:00000000 g_trf_direction
C:\Users\Aron\AppData\Local\Temp\ccOL3Bur.s:51     .text.USB_Bus_Reset_Handler:00000000 $t
C:\Users\Aron\AppData\Local\Temp\ccOL3Bur.s:55     .text.USB_Bus_Reset_Handler:00000000 USB_Bus_Reset_Handler
C:\Users\Aron\AppData\Local\Temp\ccOL3Bur.s:3102   .text.Clear_Mem:00000000 Clear_Mem
C:\Users\Aron\AppData\Local\Temp\ccOL3Bur.s:147    .text.USB_Bus_Reset_Handler:000000ac $d
C:\Users\Aron\AppData\Local\Temp\ccOL3Bur.s:156    .text.USB_DCI_Get_BDT_Index:00000000 $t
C:\Users\Aron\AppData\Local\Temp\ccOL3Bur.s:160    .text.USB_DCI_Get_BDT_Index:00000000 USB_DCI_Get_BDT_Index
C:\Users\Aron\AppData\Local\Temp\ccOL3Bur.s:216    .text.USB_DCI_Validate_Param:00000000 $t
C:\Users\Aron\AppData\Local\Temp\ccOL3Bur.s:220    .text.USB_DCI_Validate_Param:00000000 USB_DCI_Validate_Param
C:\Users\Aron\AppData\Local\Temp\ccOL3Bur.s:285    .text.USB_DCI_Validate_Param:00000058 $d
C:\Users\Aron\AppData\Local\Temp\ccOL3Bur.s:290    .text.USB_DCI_Prepare_Send_Data:00000000 $t
C:\Users\Aron\AppData\Local\Temp\ccOL3Bur.s:294    .text.USB_DCI_Prepare_Send_Data:00000000 USB_DCI_Prepare_Send_Data
C:\Users\Aron\AppData\Local\Temp\ccOL3Bur.s:372    .text.USB_DCI_Init:00000000 $t
C:\Users\Aron\AppData\Local\Temp\ccOL3Bur.s:377    .text.USB_DCI_Init:00000000 USB_DCI_Init
C:\Users\Aron\AppData\Local\Temp\ccOL3Bur.s:549    .text.USB_DCI_Init:00000140 $d
C:\Users\Aron\AppData\Local\Temp\ccOL3Bur.s:561    .text.USB_DCI_DeInit:00000000 $t
C:\Users\Aron\AppData\Local\Temp\ccOL3Bur.s:566    .text.USB_DCI_DeInit:00000000 USB_DCI_DeInit
C:\Users\Aron\AppData\Local\Temp\ccOL3Bur.s:625    .text.USB_DCI_DeInit:00000064 $d
C:\Users\Aron\AppData\Local\Temp\ccOL3Bur.s:630    .rodata:00000000 $d
C:\Users\Aron\AppData\Local\Temp\ccOL3Bur.s:635    .text.USB_DCI_Init_EndPoint:00000000 $t
C:\Users\Aron\AppData\Local\Temp\ccOL3Bur.s:640    .text.USB_DCI_Init_EndPoint:00000000 USB_DCI_Init_EndPoint
C:\Users\Aron\AppData\Local\Temp\ccOL3Bur.s:936    .text.USB_DCI_Init_EndPoint:000001f8 $d
C:\Users\Aron\AppData\Local\Temp\ccOL3Bur.s:945    .text._usb_device_cancel_transfer:00000000 $t
C:\Users\Aron\AppData\Local\Temp\ccOL3Bur.s:950    .text._usb_device_cancel_transfer:00000000 _usb_device_cancel_transfer
C:\Users\Aron\AppData\Local\Temp\ccOL3Bur.s:1053   .text._usb_device_cancel_transfer:0000009c $d
C:\Users\Aron\AppData\Local\Temp\ccOL3Bur.s:1059   .text.USB_DCI_Deinit_EndPoint:00000000 $t
C:\Users\Aron\AppData\Local\Temp\ccOL3Bur.s:1064   .text.USB_DCI_Deinit_EndPoint:00000000 USB_DCI_Deinit_EndPoint
C:\Users\Aron\AppData\Local\Temp\ccOL3Bur.s:1169   .text.USB_DCI_Deinit_EndPoint:000000a4 $d
C:\Users\Aron\AppData\Local\Temp\ccOL3Bur.s:1176   .text._usb_device_stall_endpoint:00000000 $t
C:\Users\Aron\AppData\Local\Temp\ccOL3Bur.s:1181   .text._usb_device_stall_endpoint:00000000 _usb_device_stall_endpoint
C:\Users\Aron\AppData\Local\Temp\ccOL3Bur.s:1258   .text._usb_device_stall_endpoint:00000074 $d
C:\Users\Aron\AppData\Local\Temp\ccOL3Bur.s:1264   .text._usb_device_unstall_endpoint:00000000 $t
C:\Users\Aron\AppData\Local\Temp\ccOL3Bur.s:1269   .text._usb_device_unstall_endpoint:00000000 _usb_device_unstall_endpoint
C:\Users\Aron\AppData\Local\Temp\ccOL3Bur.s:1695   .text._usb_device_recv_data:00000000 _usb_device_recv_data
C:\Users\Aron\AppData\Local\Temp\ccOL3Bur.s:1417   .text._usb_device_unstall_endpoint:000000d8 $d
C:\Users\Aron\AppData\Local\Temp\ccOL3Bur.s:1424   .text._usb_device_read_setup_data:00000000 $t
C:\Users\Aron\AppData\Local\Temp\ccOL3Bur.s:1429   .text._usb_device_read_setup_data:00000000 _usb_device_read_setup_data
C:\Users\Aron\AppData\Local\Temp\ccOL3Bur.s:1494   .text._usb_device_read_setup_data:0000005c $d
C:\Users\Aron\AppData\Local\Temp\ccOL3Bur.s:1500   .text._usb_device_get_transfer_status:00000000 $t
C:\Users\Aron\AppData\Local\Temp\ccOL3Bur.s:1505   .text._usb_device_get_transfer_status:00000000 _usb_device_get_transfer_status
C:\Users\Aron\AppData\Local\Temp\ccOL3Bur.s:1609   .text._usb_device_get_transfer_status:0000009c $d
C:\Users\Aron\AppData\Local\Temp\ccOL3Bur.s:1615   .text._usb_device_clear_data0_endpoint:00000000 $t
C:\Users\Aron\AppData\Local\Temp\ccOL3Bur.s:1620   .text._usb_device_clear_data0_endpoint:00000000 _usb_device_clear_data0_endpoint
C:\Users\Aron\AppData\Local\Temp\ccOL3Bur.s:1684   .text._usb_device_clear_data0_endpoint:00000058 $d
C:\Users\Aron\AppData\Local\Temp\ccOL3Bur.s:1690   .text._usb_device_recv_data:00000000 $t
C:\Users\Aron\AppData\Local\Temp\ccOL3Bur.s:1886   .text._usb_device_recv_data:00000130 $d
C:\Users\Aron\AppData\Local\Temp\ccOL3Bur.s:1892   .text._usb_device_send_data:00000000 $t
C:\Users\Aron\AppData\Local\Temp\ccOL3Bur.s:1897   .text._usb_device_send_data:00000000 _usb_device_send_data
C:\Users\Aron\AppData\Local\Temp\ccOL3Bur.s:2036   .text._usb_device_send_data:000000d4 $d
C:\Users\Aron\AppData\Local\Temp\ccOL3Bur.s:2043   .text._usb_device_set_address:00000000 $t
C:\Users\Aron\AppData\Local\Temp\ccOL3Bur.s:2048   .text._usb_device_set_address:00000000 _usb_device_set_address
C:\Users\Aron\AppData\Local\Temp\ccOL3Bur.s:2084   .text._usb_device_set_address:00000028 $d
C:\Users\Aron\AppData\Local\Temp\ccOL3Bur.s:2090   .text._usb_device_shutdown:00000000 $t
C:\Users\Aron\AppData\Local\Temp\ccOL3Bur.s:2095   .text._usb_device_shutdown:00000000 _usb_device_shutdown
C:\Users\Aron\AppData\Local\Temp\ccOL3Bur.s:2133   .text._usb_device_shutdown:0000002c $d
C:\Users\Aron\AppData\Local\Temp\ccOL3Bur.s:2139   .text._usb_device_assert_resume:00000000 $t
C:\Users\Aron\AppData\Local\Temp\ccOL3Bur.s:2144   .text._usb_device_assert_resume:00000000 _usb_device_assert_resume
C:\Users\Aron\AppData\Local\Temp\ccOL3Bur.s:2237   .text._usb_device_assert_resume:000000b4 $d
C:\Users\Aron\AppData\Local\Temp\ccOL3Bur.s:2242   .text.USB_Bus_Token_Cpl_Handler:00000000 $t
C:\Users\Aron\AppData\Local\Temp\ccOL3Bur.s:2246   .text.USB_Bus_Token_Cpl_Handler:00000000 USB_Bus_Token_Cpl_Handler
C:\Users\Aron\AppData\Local\Temp\ccOL3Bur.s:2690   .text.USB_Bus_Token_Cpl_Handler:000002e4 $d
C:\Users\Aron\AppData\Local\Temp\ccOL3Bur.s:2696   .text.USB_Bus_Token_Cpl_Handler:000002f0 $t
C:\Users\Aron\AppData\Local\Temp\ccOL3Bur.s:2732   .text.USB_ISR:00000000 $t
C:\Users\Aron\AppData\Local\Temp\ccOL3Bur.s:2737   .text.USB_ISR:00000000 USB_ISR
C:\Users\Aron\AppData\Local\Temp\ccOL3Bur.s:3091   .text.USB_ISR:0000029c $d
C:\Users\Aron\AppData\Local\Temp\ccOL3Bur.s:3097   .text.Clear_Mem:00000000 $t
                     .debug_frame:00000010 $d
                           .group:00000000 wm4.0.22dcf9ce9babd46e5ea858ea4400d115
                           .group:00000000 wm4.newlib.h.8.fec018e441fee7bfa1923812ad010f97
                           .group:00000000 wm4.features.h.22.6a4ca7cd053637cc1d0db6c16f39b2d7
                           .group:00000000 wm4.config.h.212.4163ef2871a828c674038d036b081cfd
                           .group:00000000 wm4._ansi.h.23.2147fde150631f5584b9dc29b914d1b8
                           .group:00000000 wm4.stddef.h.39.daafd3d79fe2f3a84d2d73d7d4e706f8
                           .group:00000000 wm4._default_types.h.6.9e4229723f5523536bc8f574589d6a99
                           .group:00000000 wm4.lock.h.2.9bc98482741e5e2a9450b12934a684ea
                           .group:00000000 wm4._types.h.54.d3d34a3b7f3cc230cd159baf022b4b08
                           .group:00000000 wm4.stddef.h.158.61317cdbfb4026324507d123a50b0fd6
                           .group:00000000 wm4.reent.h.17.8bd9e4098e0428508c282cad794fae43
                           .group:00000000 wm4.cdefs.h.56.a2d04de9d47039852021e66fca39bb58
                           .group:00000000 wm4.string.h.15.dab3980bf35408a4c507182805e2de3a
                           .group:00000000 wm4.stddef.h.158.a7efb00f6cbc6f43213b50e183c9830c
                           .group:00000000 wm4.types.h.50.034d0729b1885c66fd44563eba5494e4
                           .group:00000000 wm4.hidef.h.47.6ef7d215344a2f057d0c5b3f27c726aa
                           .group:00000000 wm4.stdint.h.10.d0f8e374834fcfc2e296d5d5fe82f02a
                           .group:00000000 wm4.PE_Types.h.111.91c29732807f8842161a15451efcd747
                           .group:00000000 wm4.PE_Error.h.60.6ccf96637e85421388d147a5dcbc3621
                           .group:00000000 wm4.PE_Const.h.60.44eca2ca2a72148441f11b3e43b344a9
                           .group:00000000 wm4.MK22F12.h.59.83dcc0895f45d7d67f2182a38aa7f04f
                           .group:00000000 wm4.Cpu.h.80.27ab3269a1d751f899c04690559be7d6
                           .group:00000000 wm4.FSL_USB_Stack_Config.h.5.a51a5d818e84d127c6c2fe6362a5c643
                           .group:00000000 wm4.usb_user_config.h.47.47e295f338247e629ef1110422279558
                           .group:00000000 wm4.usb_devapi.h.60.9ad576a4fab4e64ae00ce9daf4685bf6
                           .group:00000000 wm4.usb_dciapi.h.51.e080c04135ff9575a4b92c8314d0be10
                           .group:00000000 wm4.usb_dci_kinetis.h.36.a934c90cbbefd33c5300c7c1b4581bd8
                           .group:00000000 wm4.usb_bdt_kinetis.h.36.2761d70994150adf1e8ff3f4a58e3aa7
                           .group:00000000 wm4.usb_class.h.36.77f32177bd1e5aa45f0594a59f863d7e

UNDEFINED SYMBOLS
memcpy
_usb_device_set_status
Watchdog_Reset
USB_Device_Call_Service
_usb_device_get_status
memset
